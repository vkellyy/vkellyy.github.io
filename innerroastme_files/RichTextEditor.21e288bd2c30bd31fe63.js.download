(window.webpackJsonp=window.webpackJsonp||[]).push([["RichTextEditor"],{"./src/lib/forEachGroup/index.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return i});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const r=t=>t;function i(t,e,o){var i=Array.isArray(t)?[t.length,e=>t[e]]:[t.size,e=>t.get(e)],s=n(i,2);const a=s[0],c=s[1];var l=(e||{}).keyFn;const d=void 0===l?r:l;var u=e||{},p=u.start;let h=void 0===p?0:p;var f=u.end;let m=void 0===f?a:f;if((h=h<0?0:h)>=(m=m>a?a:m))return;let g=c(h),b=d(g,h),y=h;for(let n=h+1;n<m;n++){const t=c(n),e=d(t,n);if(e!==b){if(!1===o(g,b,y,n))return;b=e,y=n,g=t}}o(g,b,y,m)}},"./src/lib/linkMatchers/index.ts":function(t,e,o){"use strict";var n=o("./node_modules/linkify-it/index.js"),r=o.n(n),i=o("./node_modules/tlds/index.js"),s=o.n(i),a=o("./src/lib/linkMatchers/customLinks.ts"),c=o("./node_modules/lodash/values.js"),l=o.n(c);const d=t=>l()(a.b).includes(t.substring(1)),u=["//","ftp:","http:","https:","mailto:"],p=t=>((t,e)=>(e.forEach(e=>t.add(e,null)),t))(t,u);o.d(e,"c",function(){return h}),o.d(e,"d",function(){return m}),o.d(e,"g",function(){return g}),o.d(e,"a",function(){return v}),o.d(e,"b",function(){return x}),o.d(e,"e",function(){return C}),o.d(e,"f",function(){return S});const h=r()().tlds(s.a).set({fuzzyIP:!0}),f=r()().set({fuzzyIP:!0}).add(a.f.mention.prefix,a.f.mention.config),m=p(r()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(a.f.subreddit.prefix,a.f.subreddit.config).add(a.f.subredditFull.prefix,a.f.subreddit.config),g=p(r()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(a.f.profile.prefix,a.f.profile.config).add(a.f.profileFull.prefix,a.f.profile.config),b=r()().tlds(s.a).set({fuzzyIP:!0}).add(a.f.subreddit.prefix,a.f.subreddit.config).add(a.f.subredditFull.prefix,a.f.subreddit.config).add(a.f.profile.prefix,a.f.profile.config).add(a.f.profileFull.prefix,a.f.profile.config).add(a.f.mention.prefix,a.f.mention.config),y=h.normalize;h.normalize=(t=>{y.call(h,t),!t.schema&&t.url.startsWith("http:")&&(t.url=`https:${t.url.slice(5)}`)});const v=(t,e)=>{return(b.match(t)||[]).filter(t=>{const o=d(t.text);return!o||o&&e})},x=t=>{return[...g.match(t)||[],...f.match(t)||[]].map(t=>!d(t.text)&&t.text.replace(a.a,"")).filter(t=>t)},C=(t,e)=>{const o=t.match(e);if(o&&1===o.length&&0===o[0].index&&o[0].lastIndex===e.length)return o[0]},S=t=>{const e=h.match(t);if(e&&1===e.length&&0===e[0].index){const o=e[0];return o.lastIndex===t.length?o:((t,e)=>{const o=t.substring(e.lastIndex);if(/.*\/\/.*\/.*/.test(e.url)&&/^(\?|\!)+$/.test(o))return e.lastIndex+=o.length,e.url+=o,e})(t,o)}}},"./src/reddit/actions/postCreation/mediaUpload.ts":function(t,e,o){"use strict";var n=o("./node_modules/uuid/v4.js"),r=o.n(n),i=o("./src/app/strings/index.ts"),s=o("./src/lib/constants/index.ts"),a=o("./src/lib/formatApiError/index.ts"),c=o("./src/lib/makeActionCreator/index.ts"),l=o("./src/reddit/actions/toaster.ts"),d=o("./src/reddit/actions/upload.ts"),u=o("./src/lib/makeApiRequest/index.ts"),p=o("./src/lib/omitHeaders/index.ts"),h=o("./src/reddit/constants/headers.ts");var f=o("./src/reddit/helpers/correlationIdTracker.ts"),m=o("./src/reddit/helpers/imagePreview/index.ts"),g=o("./src/reddit/helpers/media/index.ts"),b=o("./src/reddit/models/Upload/index.ts"),y=o("./src/reddit/selectors/telemetry.ts"),v=o("./src/telemetry/index.ts");const x=async({state:t,uploadKey:e,assetId:o,isCanceled:n,fileSource:r,uploadDuration:i,correlationId:s})=>{const a=t.uploads[e],c=n||a.status===b.a.CANCELED,l=a.file,d=a.url,u=a.metadata,p=a.error,h=u.mimetype||l.type,f=h.startsWith("video/"),m=a.status===b.a.SUCCESS;let g="";p?g=JSON.stringify(p):c&&(g="canceled");const x={width:u.width,height:u.height,duration:u.videoDuration&&Math.round(1e3*u.videoDuration)};Object(v.a)(Object.assign({source:f?"videoupload":"imageupload",action:"upload",correlationId:s,noun:f?"video":"image"},(t=>Object.assign({},y.defaults(t),{screen:y.screen(t),profile:y.profile(t),subreddit:y.subreddit(t)}))(t),{actionInfo:Object.assign({},y.actionInfo(t),{success:m},g?{reason:g}:{}),media:Object.assign({mimetype:h,uploadDuration:i,source:r,fileName:l.name,size:l.size,type:f?"video":"image"},o?{id:o}:{},d?{url:d}:{},x)}))};var C=o("./src/reddit/helpers/trackers/postComposer.ts"),S=o("./src/reddit/models/Toast/index.ts"),O=o("./src/reddit/selectors/postCreations.ts"),w=o("./src/reddit/selectors/user.ts"),k=o("./src/reddit/actions/postCreation/constants.ts");o.d(e,"d",function(){return I}),o.d(e,"c",function(){return A}),o.d(e,"a",function(){return M}),o.d(e,"b",function(){return B});const E=Object(c.a)(k.v),j=Object(c.a)(k.w),T=Object(c.a)(k.u),I=t=>async(e,o)=>{e(E());const n=t.map(({url:t,uploadKey:o})=>{const n=Object(g.a)(Object(g.c)(t),"poster.png");return e(A(n,o))});await Promise.all(n);const r=o().uploads,i=t.map(({uploadKey:t})=>r[t]).find(t=>t.status!==b.a.SUCCESS);e(i?T(i.error):j())},R=(t,e)=>({error:e?{type:t,fields:[{field:"",msg:e}]}:{type:t}});const A=(t,e,o,n)=>async(r,a,{apiContext:c})=>{const l=Object(O.f)(a()),y=Date.now();let v=null,S=!1,k=!1,E=!1;const j=t=>{if(!E&&o&&S){E=!0;const n=a(),r=Date.now()-y,i=Object(f.c)(f.a.PostComposer);k?x({state:n,uploadKey:e,assetId:v,isCanceled:t,fileSource:o,uploadDuration:r,correlationId:i}):C.p(n,e)}};e.startsWith(b.b.RTE_MEDIA);await r(Object(d.k)(t,e,async f=>{S=!0,Object(d.j)(f.id,()=>{j(!0)});var b=await async function(t,e,o,n){const r=Object(w.P)(t),a=o&&o.allowedPostTypes,c=o&&o.name,l=await Object(g.f)(e)||e.type,d=Object(g.b)(e)||void 0;if(!d)return R("UNSUPPORTED_BROWSER");const u={localUrl:d,mimetype:l};if(!l||!Object(g.h)(l))return{error:{type:s.X}};if(l.startsWith("image/")){if(a&&!a.images){const t=Object(i.a)(r,"postCreation.mediaInput.imagesAreNotAllowed",{subredditName:c});return R(s.X,t)}if("image/gif"===l){if(e.size>s.cb)return R(s.N)}else if(e.size>s.eb)return R(s.U);const t=await Object(m.a)(d);u.width=t.width,u.height=t.height}else if(l.startsWith("video/")){if(e.size>s.ib)return R(s.Ec);let t;try{t=await Object(g.g)(d,!0)}catch(p){return R(s.X)}if(a){const e=a.videos,o=a.images;if(o&&!e&&t.duration>s.jb){const t=Object(i.a)(r,"postCreation.mediaInput.videoTooLongForImageOnlySubreddit",{subredditName:c});return R(s.X,t)}if(!o&&!e){const t=Object(i.a)(r,"postCreation.mediaInput.videosAreNotAllowed",{subredditName:c});return R(s.X,t)}}if(t.duration>s.hb){const t=Object(i.a)(r,"postCreation.mediaInput.videoTooLongInGeneral");return R(s.X,t)}u.height=t.height,u.width=t.width,u.videoDuration=t.duration,u.videoFirstFrameUrl=t.firstFrame.dataUrl}return{metadata:u}}(a(),t,l);const y=b.error,x=b.metadata;if(y||!x)return{error:y};r(Object(d.l)({key:e,metadata:Object.assign({fileSource:o},x)})),k=!0,n&&n();const C=t.name,O=await(async(t,e,o)=>Object(u.c)(Object(p.a)(t,[h.a]),{endpoint:`${t.apiUrl}/api/media/asset.json`,method:s.lb.POST,data:{filepath:e,mimetype:o}}))(c(),C,x.mimetype);return O.ok?(v=O.body.asset.asset_id,{uploadLease:O.body.args}):{error:O.error||void 0}},!0)),j(!1)},M=t=>async(e,o,{apiContext:n})=>{const r=o().uploads[t];r&&!Object(b.d)(r)&&await e(A(r.file,r.key,r.metadata.fileSource))},B=(t,e,o)=>async(n,s)=>{const c=t.map((t,i)=>new Promise(async i=>{const s=Object(b.e)(b.b.RTE_MEDIA,`${o}-${r()().slice(-6)}`);await n(A(t,s,e,()=>i(s))),i(s)})),d=await Promise.all(c);n(((t,e=3)=>async(o,n)=>{var r=n();const s=r.uploads,c=r.user.language,d=t.map(t=>s[t]).filter(t=>t.status===b.a.FAILED&&!t.metadata.mimetype).map(t=>t.error),u=d.length>e?e-1:d.length,p=d.length-u;d.slice(0,u).forEach(t=>o(Object(l.e)({duration:l.a,kind:S.b.Error,text:Object(a.a)(c,t)}))),p>0&&o(Object(l.e)({duration:l.a,kind:S.b.Error,text:Object(i.c)(c,"postCreation.cannotAddFiles",p)}))})(d))}},"./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx":function(t,e,o){"use strict";var n=o("./bundled-modules/styled-components/styled-components.min.js");const r=o.n(n).a.div.withConfig({componentId:"jvfwx7-0"})(["",""],t=>t.breakOut?`\n        background-color: white;\n        left: -${((t,e)=>21*t+33+(e?10:0))(t.depth,t.isEditing)}px;\n        margin: -16px;\n        padding: 16px;\n        position: absolute;\n        right: 0;\n        z-index: 2;\n      `:"");e.a=r},"./src/reddit/components/CommentCreation/FormFooter/index.m.less":function(t,e,o){t.exports={SubmitButton:"_22S4OsoDdOqiM-hPTeOURa",submitButton:"_22S4OsoDdOqiM-hPTeOURa",LoadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",loadingIcon:"_2qsMO_C_HwxgUgktaOeqZ2",CancelButton:"cZz52cPDbNgzrR1Oo1k27",cancelButton:"cZz52cPDbNgzrR1Oo1k27",ButtonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp",buttonWrapper:"_3SNMf5ZJL_5F1qxcZkD0Cp"}},"./src/reddit/components/CommentCreation/FormFooter/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/app/strings/index.ts"),a=o("./src/reddit/constants/componentSizes.ts"),c=o("./src/reddit/controls/Button/index.tsx"),l=o("./src/reddit/controls/LoadingIcon/index.tsx"),d=o("./src/reddit/helpers/styles/components/index.tsx"),u=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),p=o("./src/reddit/components/CommentCreation/FormFooter/index.m.less"),h=o.n(p),f=o("./src/lib/lessComponent.tsx"),m=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const g=i()(Object(d.a)()).withConfig({componentId:"t2oek2-0"})(["position: sticky;bottom: 0;z-index: 1;opacity: ",";background-color: ",";display: flex;flex-direction: row-reverse;align-items: center;height: ","px;border-radius: 0px 0px 4px 4px;"],t=>t.pending?"0.5":"1",t=>Object(u.c)(t).field,a.C),b=f.a.wrapped(c.e,"SubmitButton",h.a),y=f.a.wrapped(l.a,"LoadingIcon",h.a),v=f.a.wrapped(c.h,"CancelButton",h.a),x=f.a.div("ButtonWrapper",h.a),C=t=>t.preventDefault();e.a=(({pending:t,cancelButtonEnabled:e=!0,children:o,className:n,submitButtonText:r,language:i,canSubmit:a,onSubmit:c,onCancel:l})=>m(g,{pending:t,className:n},void 0,m(x,{},void 0,m(b,{type:"submit",disabled:!a,onClick:c,onMouseDown:C},void 0,t?m(y,{sizePx:10}):r),e&&m(v,{type:"reset",disabled:t,onClick:l,onMouseDown:C},void 0,Object(s.a)(i,"comment.cancel"))),o))},"./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less":function(t,e,o){t.exports={LoadingIcon:"_2DZnviMjaD88Udr-5V3j38",loadingIcon:"_2DZnviMjaD88Udr-5V3j38",Wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",wrapper:"_3oZ5XBWSc3x7cXsvdt3fJ",MarkdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",markdownModeIcon:"_1EifMLRAKpii4eqciAhY4q",Button:"_1Q2Vq3gesOWZA73NbspEiQ",button:"_1Q2Vq3gesOWZA73NbspEiQ"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less":function(t,e,o){t.exports={LoadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",loadingIcon:"_2izw1tRcQRvnfuR1E05Cy4",CommentHeader:"PN-j_b1WdWATQha3fOgkV",commentHeader:"PN-j_b1WdWATQha3fOgkV",HelpButton:"MQruKnjMvMoDlmee_nF40",helpButton:"MQruKnjMvMoDlmee_nF40"}},"./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./node_modules/react-dom/index.js"),a=o("./node_modules/react-redux/es/index.js"),c=o("./node_modules/react-router-dom/es/index.js"),l=o("./node_modules/reselect/es/index.js"),d=o("./bundled-modules/styled-components/styled-components.min.js"),u=o.n(d),p=o("./src/app/strings/index.ts"),h=o("./src/reddit/components/AuthorLink/index.tsx"),f=o("./src/reddit/components/ConfirmUserActionModal/index.tsx"),m=o("./src/reddit/components/MarkdownHelp/index.tsx"),g=o("./src/reddit/controls/ErrorText/index.tsx"),b=o("./src/reddit/controls/LoadingIcon/index.tsx"),y=o("./src/reddit/featureFlags/index.ts"),v=o("./src/reddit/icons/svgs/Help/index.tsx"),x=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),C=o("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),S=o("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),O=o("./src/lib/fastdom/index.ts"),w=o("./src/reddit/components/CommentCreation/ToolbarSelector.m.less"),k=o.n(w),E=o("./src/lib/lessComponent.tsx"),j=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const T=310,I=E.a.div("Container",k.a);class R extends i.a.Component{constructor(){super(...arguments),this.state={toolbarType:null},this.setContainerRef=(t=>this.container=t),this.selectToolbar=(()=>{const t=this.container&&this.container.parentElement;if(!t)return;const e=t.getBoundingClientRect().width<T?"compact":"full";e!==this.state.toolbarType&&O.a.write(()=>{this.setState({toolbarType:e})})})}componentDidMount(){O.a.read(this.selectToolbar),window.addEventListener("resize",this.selectToolbar)}componentWillUnmount(){window.removeEventListener("resize",this.selectToolbar)}render(){return j(I,{innerRef:this.setContainerRef},void 0,this.state.toolbarType?this.props.children(this.state.toolbarType):null)}}var A=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var M=t=>A("svg",{className:t.className,viewBox:"0 0 208 128"},void 0,A("rect",{width:"198",height:"118",x:"5",y:"5",ry:"10",stroke:"currentColor",strokeWidth:"10",fill:"none"}),A("path",{d:"M30 98v-68h20l20 25 20-25h20v68h-20v-39l-20 25-20-25v39zM155 98l-30-33h20v-35h20v35h20z"})),B=o("./src/reddit/components/PostCreationForm/DivButton/index.tsx"),K=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),D=o("./src/reddit/components/CommentCreation/MarkdownCommentForm/MarkdownModeButton.m.less"),P=o.n(D),_=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const F=Object(p.e)("comment.switchToRTE"),L=E.a.wrapped(b.a,"LoadingIcon",P.a),N=E.a.div("Wrapper",P.a),U=E.a.wrapped(M,"MarkdownModeIcon",P.a),H=E.a.wrapped(B.a,"Button",P.a);var z=t=>{const e=F(t.language);return _(N,{},void 0,_(H,{"aria-label":e,setRef:t.buttonRef,className:t.className,onClick:t.onClick},void 0,t.isConverting&&_(L,{sizePx:12}),_(K.b,{text:e}),!t.isConverting&&_(U,{})))},$=o("./src/reddit/constants/keycodes.ts"),W=o("./src/reddit/components/CommentCreation/getCancelModalId.ts"),V=o("./src/reddit/components/CommentCreation/translations.ts"),q=o("./src/reddit/constants/componentSizes.ts"),Z=o("./src/reddit/constants/componentTestIds.ts"),X=o("./src/reddit/helpers/styles/components/index.tsx"),G=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),J=o("./src/reddit/selectors/activeModalId.ts"),Y=o("./src/reddit/selectors/comments.ts"),Q=o("./src/reddit/selectors/editorContent.ts"),tt=o("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),et=o("./src/app/models/Draft.ts"),ot=o("./src/reddit/actions/modal.ts"),nt=o("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),rt=o("./src/reddit/models/PostCreationForm/index.ts"),it=o("./src/reddit/models/User/index.ts"),st=o("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.m.less"),at=o.n(st);o.d(e,"a",function(){return mt});var ct=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const lt=u.a.button.withConfig({componentId:"s19e7251-0"})(["","color: ",";margin-left: 8px;width: auto;display: flex;"],G.bodyFontSmall,t=>Object(x.c)(t).linkText),dt=E.a.wrapped(b.a,"LoadingIcon",at.a),ut=E.a.div("CommentHeader",at.a),pt=u.a.span.withConfig({componentId:"s19e7251-1"})(["","color: ",";margin-right: 4px;"],G.bodyFontSmall,t=>Object(x.c)(t).bodyText),ht=E.a.button("HelpButton",at.a),ft=u()(v.a).withConfig({componentId:"s19e7251-2"})(["fill: ",";width: 12px;height: 12px;"],t=>Object(x.c)(t).actionIcon),mt=t=>ct(ht,{className:t.className,onClick:t.onClick},void 0,ct(ft,{})),gt=8,bt=16,yt=u()(Object(X.a)()).withConfig({componentId:"s19e7251-3"})(["position: relative;margin: ",";",""],t=>t.isTopLevelComment?"24px 40px":"16px 0 16px 22px",t=>t.height?`height: ${t.height}px;`:""),vt=u.a.div.withConfig({componentId:"s19e7251-4"})(["border: ",";border-radius: 4px;background: ",";"],t=>t.pending?"1px solid rgba(0,0,0,0.05)":t.focused?"1px solid #1A1A1B":"1px solid #878A8C",t=>Object(x.c)(t).body),xt=Object(a.connect)(()=>Object(l.createStructuredSelector)({activeModalId:J.a,canAccessRedesignProfiles:t=>y.d.redesignProfiles(t),userName:t=>t.user.account?Object(it.f)(t.user.account):"",pending:(t,e)=>t.comments.submit.pending[e.draftKey],draft:Y.i,isConverting:(t,e)=>Object(Q.a)(t,e.draftKey)}),(t,e)=>({cancelModalToggled:()=>t(Object(ot.i)(Object(W.a)(e.draftKey))),helpModalToggled:()=>t(Object(ot.i)(m.b))}));e.b=xt(Object(c.f)(class extends i.a.Component{constructor(t){super(t),this.textAreaRef=null,this.cancelForm=(()=>{this.props.onCancel(),this.onBlur()}),this.detectBreakout=(()=>{if(!this.wrapperEl||!this.wrapperEl.parentElement||this.props.isTopLevelComment)return;const t=this.wrapperEl.parentElement.getBoundingClientRect().width<q.f,e=this.getWrapperHeight();t===this.state.breakOut&&e===this.state.wrapperHeight||O.a.write(()=>{this.setState({breakOut:t,wrapperHeight:e})})}),this.focus=(()=>{this.textAreaRef&&this.textAreaRef.focus()}),this.onChange=(t=>{const e=t.currentTarget.value;this.props.onChange&&this.props.onChange({text:e,editorState:null}),this.setState(()=>({text:e,hasChanged:!0,showError:!1}),()=>{O.a.read(this.detectBreakout)})}),this.shouldConfirmCancel=(()=>this.userHasEnteredText()&&this.state.hasChanged&&this.props.draftType===et.a.edit),this.onCancel=(()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()}),this.onBlur=(t=>{(!t||t&&t.relatedTarget!==this.switchModeBtn)&&(this.textAreaRef&&this.textAreaRef.blur(),this.props.onFocusChanged(!1))}),this.onFocus=(()=>{this.props.onFocus(),this.props.onFocusChanged(!0)}),this.handleKeyDown=(t=>{const e=t.ctrlKey,o=t.metaKey,n=t.keyCode;(e||o)&&n===$.a.Enter&&this.onSubmit()}),this.onSubmit=(()=>{this.props.onSubmit({commentMode:rt.h.MARKDOWN,draftType:this.props.draftType,editorState:null,text:this.getCurrentText()}),this.onBlur()}),this.userHasEnteredText=(()=>!!this.state.text.trim()),this.setWrapperRef=(t=>{this.wrapperEl=t,this.props.editorElementRef&&this.props.editorElementRef(t)}),this.setTextAreaRef=(t=>this.textAreaRef=t);const e=t.draftType,o=t.hasError,n=t.initialText,r=t.language;this.state={text:n||"",autofocusDisabled:!1,hasChanged:!1,showError:o,breakOut:!1,wrapperHeight:void 0,formHeight:null,cancelModalText:e===et.a.edit?Object(p.a)(r,"comment.confirmCancellation.edit"):Object(p.a)(r,"comment.confirmCancellation.creation")}}componentDidMount(){this.props.onMount(),window.addEventListener("resize",this.detectBreakout),O.a.read(this.detectBreakout),O.a.write(()=>{this.props.draft.hasFocus&&this.textAreaRef&&this.textAreaRef.focus()}),this.props.instanceRef&&this.props.instanceRef(this)}componentWillUnmount(){this.props.onUnmount({text:this.getCurrentText()}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidUpdate(t){const e=t.pending;var o=this.props;const n=o.hasError,r=o.pending;!e||r||n?t.hasError!==this.props.hasError&&this.setState({showError:this.props.hasError}):this.setState({text:"",showError:!1})}getCurrentText(){const t=this.props.draft,e=t&&t.text;return this.state.text||e}getWrapperHeight(){if(!this.textAreaRef)return;const t=Object(s.findDOMNode)(this.textAreaRef);return t instanceof Element?t.getBoundingClientRect().height+gt+bt+q.C:void 0}render(){var t=this.props;const e=t.activeModalId,o=t.autofocus,n=t.canAccessRedesignProfiles,r=t.cancelModalToggled,i=t.className,s=t.disableAutofocus,a=t.depth,c=t.draft,l=t.draftKey,d=t.draftType,u=t.errorMsgs,b=t.pending,y=t.language,v=t.submitButtonText,x=t.isTopLevelComment,O=t.onSwitchMode,w=t.userName;var k=this.state;const E=k.cancelModalText,j=k.showError,T=k.text,I=k.breakOut,A=k.wrapperHeight,M=Object(W.a)(l),B=c.draftType===et.a.edit;return ct(yt,{"data-test-id":Z.b,className:i,height:I?A:void 0,innerRef:this.setWrapperRef,isTopLevelComment:!!x},void 0,x&&ct(ut,{},void 0,ct(pt,{},void 0,"Comment as"),ct(h.a,{author:w,canAccessRedesignProfiles:n,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},void 0,w)),ct(C.a,{breakOut:I,depth:a,isEditing:B},void 0,ct(vt,{pending:b,focused:c.hasFocus},void 0,ct(nt.a,{innerRef:this.setTextAreaRef,autoFocus:o&&!s,disabled:b,initialHeight:this.props.initialHeight,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:Object(p.a)(y,"comment.placeholder"),value:T}),ct(S.a,{cancelButtonEnabled:d!==et.a.replyToPost,language:y,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:b,submitButtonText:v,canSubmit:this.userHasEnteredText()},void 0,ct(R,{},void 0,t=>"compact"===t?ct(z,{language:y,buttonRef:t=>this.switchModeBtn=t,onClick:()=>O(rt.h.RICH_TEXT,T,l),isConverting:this.props.isConverting}):ct("div",{},void 0,ct(lt,{innerRef:t=>this.switchModeBtn=t,onClick:()=>O(rt.h.RICH_TEXT,T,l)},void 0,"Switch to Fancy Pants Editor",this.props.isConverting&&ct(dt,{sizePx:12})))),ct(mt,{onClick:this.props.helpModalToggled})))),j&&Object(g.b)(u,y),e===M&&ct(f.a,{actionText:Object(V.a)(y),cancelActionText:Object(V.b)(y),modalText:E,onConfirm:()=>this.cancelForm(),toggleModal:r,trackClick:()=>{}}),e===m.b&&ct(m.a,{language:y}),ct(tt.a,{language:y,editKey:l,hasValue:!!T}))}}))},"./src/reddit/components/CommentCreation/NavigationModule/index.ts":function(t,e,o){"use strict";var n=o("./node_modules/react/index.js"),r=o.n(n),i=o("./node_modules/react-router-dom/es/index.js"),s=o("./src/app/strings/index.ts");let a=null;class c extends r.a.PureComponent{constructor(){super(...arguments),this.unblock=(t=>{c.blockers.delete(t),c.blockers.size||(a&&a(),a=null,window.removeEventListener("beforeunload",c.navigationBlocker))})}componentDidUpdate(t){!t.hasValue&&this.props.hasValue?this.block(this.props.editKey):t.hasValue&&!this.props.hasValue&&this.unblock(this.props.editKey)}componentWillUnmount(){this.unblock(this.props.editKey)}componentDidMount(){this.props.hasValue&&this.block(this.props.editKey)}block(t){c.blockers.add(t),a||(window.addEventListener("beforeunload",c.navigationBlocker),a=this.props.history.block(()=>{const t=this.props.isPostEdit?Object(s.a)(this.props.language,"posts.confirmNavigation"):Object(s.a)(this.props.language,"comment.confirmNavigation");return window.confirm(t)?void 0:"Are you sure you want to leave?"}))}render(){return null}}c.blockers=new Set,c.navigationBlocker=(t=>{const e="Are you sure you want to leave?";return t.returnValue=e,e}),e.a=Object(i.f)(c)},"./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less":function(t,e,o){t.exports={CommentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",commentHeader:"_2kZkQ13N-kvhDEJOBd1S1I",FormFooter:"RQTXfVRnnTF5ont3w58rx",formFooter:"RQTXfVRnnTF5ont3w58rx",MarkdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",markdownButtonWrapper:"_3SWQgWX2fzvWmGCv463r_-",SectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",sectionSpacer:"_3rYrfakWyDh7Y1L9ULn4ve",ToolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr",toolbarWrapper:"_2YcMhGs5-uIg9Fj4a9J2Xr"}},"./src/reddit/components/CommentCreation/ToolbarSelector.m.less":function(t,e,o){t.exports={Container:"_1XC-wMQsKPqfaPcfWQCZdW",container:"_1XC-wMQsKPqfaPcfWQCZdW"}},"./src/reddit/components/CommentCreation/getCancelModalId.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return n});const n=t=>`Comment-cancelModal__${t}`},"./src/reddit/components/CommentCreation/index.tsx":function(t,e,o){"use strict";o.r(e);var n,r=o("./node_modules/lodash/once.js"),i=o.n(r),s=o("./node_modules/react/index.js"),a=o.n(s),c=o("./node_modules/react-redux/es/index.js"),l=o("./node_modules/reselect/es/index.js"),d=o("./src/reddit/actions/comment.ts"),u=o("./src/reddit/helpers/trackers/commentsPage.ts"),p=o("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),h=o("./node_modules/lodash/noop.js"),f=o.n(h),m=o("./bundled-modules/styled-components/styled-components.min.js"),g=o.n(m),b=o("./src/lib/fastdom/index.ts"),y=o("./src/lib/memoizeByReference/index.ts"),v=o("./src/reddit/components/AuthorLink/index.tsx"),x=o("./src/reddit/components/ConfirmUserActionModal/index.tsx"),C=o("./src/reddit/actions/users.ts"),S=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),O=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),w=o("./src/reddit/icons/svgs/Close/index.tsx"),k=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}}),E=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const j=Object(m.keyframes)(["from {opacity: 0;}to {opacity: 1;}"]),T=g.a.div.withConfig({componentId:"s1egl9ob-0"})(["cursor: pointer;margin-left: 8px;padding-top: 2px;"]),I=g()(w.a).withConfig({componentId:"s1egl9ob-1"})(["height: 12px;width: 12px;fill: white;"]),R=g.a.div.withConfig({componentId:"s1egl9ob-2"})(["","animation: "," 0.5s ease-in;background-color: ",";border-radius: 5px;bottom: 100%;color: ",";display: flex;left: 50%;margin-bottom: 5px;padding: 5px 8px;pointer-events: auto;position: absolute;text-align: center;transform: translateX(-50%);white-space: pre;z-index: 99999;&::after {border-left: 5px solid transparent;border-right: 5px solid transparent;border-top: 5px solid ",';content: "";left: 50%;margin-left: -5px;position: absolute;top: 100%;width: 0;}'],S.titleFontH6,j,t=>Object(O.c)(t).button,t=>Object(O.c)(t).lightText,t=>Object(O.c)(t).button);var A=g()(t=>{const e=t.text,o=t.children,n=E(t,["text","children"]);return a.a.createElement("div",n,e?k(R,{},void 0,e,k(T,{},void 0,k(I,{}))):null,o)}).withConfig({componentId:"s1egl9ob-3"})(["position: absolute;top: 0;left: 0;right: 0;bottom: 0;"," {transition: opacity 0s 0.5s;}&:hover "," {visibility: visible;opacity: 1;}"],R,R),M=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var B=Object(c.connect)(null,t=>({onMarkdownModeFtuUxViewed:()=>t(Object(C.q)({commentForm:{markdownModeNotification:!0}}))}))(class extends a.a.Component{componentDidUpdate(){var t=this.props;const e=t.onMarkdownModeFtuUxViewed;t.shouldShowFtuMessage&&e()}render(){var t=this.props;const e=t.onClick;return t.shouldShowFtuMessage&&M(A,{onClick:e,text:this.props.text})}}),K=o("./src/reddit/components/RichTextEditor/index.tsx"),D=o("./src/reddit/components/RichTextEditor/helpers/controlsState.ts"),P=o("./src/reddit/components/OverflowMenu/index.tsx"),_=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const F=33,L=t=>t.preventDefault(),N=t=>`Comment--Overflow-Dropdown__${t}`,U=g.a.span.withConfig({componentId:"s135tyzs-0"})(["visibility: ",""],t=>t.hidden?"none":"visible"),H=g.a.div.withConfig({componentId:"s135tyzs-1"})(["position: absolute;display: flex;"]),z=g.a.div.withConfig({componentId:"s135tyzs-2"})(["position: relative;width: 100%;height: 100%;display: flex;align-items: center;"]),$=g()(P.b).withConfig({componentId:"s135tyzs-3"})(["width: 100%;"]),W=g.a.div.withConfig({componentId:"s135tyzs-4"})(["position: relative;margin-left: 5px;border-radius: 2px;width: 28px;height: 28px;&:hover {background-color: rgba(0, 0, 0, 0.05);}"]),V=Object(m.withTheme)(g.a.div.withConfig({componentId:"s135tyzs-5"})(["margin: 0px;display: flex;flex-direction: row;justify-content: space-between;box-sizing: border-box;background-color: ",";border-radius: 4px;padding: 2px 5px;box-shadow: 0 0 0 1px ",",0 1px 10px ",";"],t=>Object(O.c)(t).body,t=>Object(O.c)(t).line,t=>Object(O.c)(t).line)),q=t=>t.reduce((t,e)=>(Array.isArray(e)?t+=e.length:t++,t),0);class Z extends a.a.Component{constructor(t){super(t),this.updateCurrentBreakpoint=(()=>{b.a.read(()=>{var t=this.state;const e=t.indexOfCurrentBreakpoint,o=t.totalNumCollapsibleItems,n=e<o-1,r=e>0,i=this.breakpoints[e],s=this.breakpoints[e+1];if(this.container){let t=this.container.clientWidth;const e=t<=i&&r,a=t>(s||i)&&n;if(e||a){t-=F;const n=e?0:o-1;let r=this.breakpoints.findIndex((e,o)=>t>=e&&t<this.breakpoints[o+1]);r=r>=0?r:n,b.a.write(()=>{this.setState({indexOfCurrentBreakpoint:r,shouldShowOverflow:r<o-1})})}}})});const e=Array.isArray(t.children)?q(t.children):1;this.state={indexOfCurrentBreakpoint:e-1,shouldShowOverflow:!1,totalNumCollapsibleItems:e},this.breakpoints=[]}componentDidMount(){window.addEventListener("resize",this.updateCurrentBreakpoint)}componentWillUnmount(){window.removeEventListener("resize",this.updateCurrentBreakpoint)}registerBreakpoint(t,e){b.a.read(()=>{if(t&&t.clientWidth){const o=t.clientWidth;this.breakpoints[e]=0===e?o:this.breakpoints[e-1]+o,e===this.state.totalNumCollapsibleItems-1&&this.updateCurrentBreakpoint()}})}render(){var t=this.props;const e=t.children,o=t.className,n=t.oveflowMenuDropdownId,r=t.onOverflowMenuClick,i=t.renderOverflowMenuTooltip;var s=this.state;const c=s.indexOfCurrentBreakpoint,l=s.shouldShowOverflow;return _(z,{className:o,innerRef:t=>this.container=t},void 0,_(H,{},void 0,a.a.Children.map(e,(t,e)=>_(U,{innerRef:t=>this.registerBreakpoint(t,e),hidden:e>c},void 0,t)),l&&_(W,{},"overflowMenuWrapper",i&&i(),_($,{dropdownId:N(n),isFixed:!1,handleMouseDown:L,onClick:r},void 0,_(V,{},void 0,a.a.Children.map(e,(t,e)=>_(U,{hidden:e<=c},void 0,t)))))))}}var X=o("./src/reddit/components/RichTextEditor/Toolbar/index.tsx"),G=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const J=g.a.div.withConfig({componentId:"o20qa2-0"})(["box-sizing: border-box;width: 1px;height: 100%;margin: 0 6px;border-right: 1px solid ",";"],t=>Object(O.c)(t).line);var Y=t=>{const e=t.className,o=t.editorKey,n=t.editorState,r=t.language,i=t.onChange,s=t.onOverflowMenuClick,a=t.readOnly,c=t.trackOnClick,l=t.onLinkButtonClick,d=Object(D.a)(n);return a&&Object(D.b)(d),G(Z,{className:e,oveflowMenuDropdownId:o,onOverflowMenuClick:s},void 0,Object(X.g)(X.f,d,n,i,c,r),G(X.a,{language:r,controlsState:d,trackOnClick:c,onLinkButtonClick:l}),Object(X.g)(X.h,d,n,i,c,r),G(J,{}),Object(X.g)(X.e,d,n,i,c,r),G(J,{}),G(X.d,{language:r,controlsState:d,editorState:n,trackOnClick:c,onChange:i}))},Q=o("./src/reddit/components/RichTextEditor/Toolbar/MarkdownButton/index.tsx"),tt=o("./src/reddit/constants/componentSizes.ts"),et=o("./src/reddit/constants/componentTestIds.ts"),ot=o("./src/reddit/constants/elementClassNames.ts"),nt=o("./src/reddit/controls/ErrorText/index.tsx"),rt=o("./src/reddit/featureFlags/index.ts"),it=o("./src/reddit/components/CommentCreation/ExpandingFormDiv.tsx"),st=o("./src/reddit/components/CommentCreation/FormFooter/index.tsx"),at=o("./src/reddit/components/CommentCreation/getCancelModalId.ts"),ct=o("./src/reddit/components/CommentCreation/translations.ts"),lt=o("./src/app/models/Draft.ts"),dt=o("./src/app/strings/index.ts"),ut=o("./src/reddit/models/PostCreationForm/index.ts"),pt=o("./src/reddit/actions/modal.ts"),ht=o("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),ft=o("./src/reddit/helpers/styles/components/index.tsx"),mt=o("./src/reddit/selectors/activeModalId.ts"),gt=o("./src/reddit/selectors/comments.ts"),bt=o("./src/reddit/selectors/user.ts"),yt=o("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),vt=o("./src/reddit/components/CommentCreation/RichtextCommentForm/index.m.less"),xt=o.n(vt),Ct=o("./src/lib/lessComponent.tsx"),St=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Ot=Object(dt.e)("comment.dontDigFancyPants"),wt=16,kt=g()(Object(ft.a)()).withConfig({componentId:"edkeh6-0"})(["margin: ",";position: relative;."," {color: ",";min-height: ","px;word-break: break-word;}",""],t=>t.isTopLevelComment?"24px 40px":"16px 0 16px 22px",ot.a,t=>Object(O.c)(t).bodyText,tt.z,t=>t.breakOut&&t.formHeight?`height: ${t.formHeight}px;`:""),Et=Ct.a.div("CommentHeader",xt.a),jt=Ct.a.wrapped(st.a,"FormFooter",xt.a),Tt=Ct.a.div("MarkdownButtonWrapper",xt.a),It=g()(Q.a).withConfig({componentId:"edkeh6-1"})(["&:hover {background-color: rgba(150, 150, 150, 0.05);}color: ",";min-width: 144px;padding-left: 0px;"],t=>Object(O.c)(t).button),Rt=Ct.a.wrapped(J,"SectionSpacer",xt.a),At=Ct.a.div("ToolbarWrapper",xt.a),Mt=g.a.span.withConfig({componentId:"edkeh6-2"})(["","color: ",";margin-right: 4px;"],S.bodyFontSmall,t=>Object(O.c)(t).bodyText),Bt=({cancelButtonEnabled:t,draftKey:e,onSubmit:o,onCancel:n,pending:r,submitButtonText:i})=>s=>{const c=s.language,l=s.editorState,d=s.onFtuTooltipClick,u=s.onMarkdownButtonClick,p=s.shouldShowFtuMessage,h=!!l.getCurrentContent().getPlainText().trim();return St(jt,{cancelButtonEnabled:t,language:c,onSubmit:o,onCancel:n,pending:r,submitButtonText:i,canSubmit:h},void 0,St(At,{},void 0,a.a.createElement(Y,s),St(Rt,{}),St(Tt,{},void 0,St(B,{onClick:d,shouldShowFtuMessage:!!p,text:Ot(c)}),St(It,{draftKey:e,language:c,onClick:u,shouldHideTooltip:p}))))};var Kt=Object(c.connect)(()=>Object(l.createStructuredSelector)({activeModalId:mt.a,canAccessRedesignProfiles:t=>rt.d.redesignProfiles(t),draft:gt.i,hasViewedMarkdownModeFtuUx:bt.d}),(t,e)=>({cancelModalToggled:()=>t(Object(pt.i)(Object(at.a)(e.draftKey)))}))(class extends a.a.Component{constructor(t){super(t),this.getToolbarRenderer=Object(y.a)((t,e,o,n)=>Bt({cancelButtonEnabled:t,draftKey:e,onSubmit:this.onSubmit,onCancel:this.onCancel,pending:o,submitButtonText:n})),this.focus=(()=>{this.editor&&this.editor.focus()}),this.setEditorWrapperRef=(t=>{this.editorWrapperElement=t,this.props.editorElementRef&&this.props.editorElementRef(t)}),this.setRTEComponentRef=(t=>this.editor=t),this.setRTEDomElementRef=(t=>{this.editorDomElement=t}),this.detectBreakout=(()=>{if(!this.editorWrapperElement||!this.editorWrapperElement.parentElement||this.props.isTopLevelComment)return;const t=this.editorWrapperElement.parentElement.getBoundingClientRect().width<tt.f,e=this.getWrapperHeight();t===this.state.breakOut&&e===this.state.formHeight||b.a.write(()=>{this.setState({breakOut:t,formHeight:e})})}),this.hasContent=(()=>{const t=this.state.rteState;return ht.a.hasContent(t)}),this.handleBlur=(()=>this.props.onFocusChanged(!1)),this.handleFocus=(()=>{this.props.onFocus(),this.props.onFocusChanged(!0)}),this.handleRTEStateInitialized=(t=>{this.props.onChange&&this.props.onChange({rteState:t}),this.setState({rteState:t})}),this.handleChange=((t,e)=>{const o=this.props.onChange;o&&o({rteState:t}),e&&this.setState({hasChanged:!0}),this.setState(()=>({showError:!1,rteState:t}),()=>{b.a.read(this.detectBreakout)})}),this.cancelForm=(()=>{this.editor&&this.props.draftType===lt.a.replyToPost&&this.setState({rteState:ht.a.createInitial()}),this.props.onCancel()}),this.shouldConfirmCancel=(()=>this.hasContent()&&this.state.hasChanged&&this.props.draftType===lt.a.edit),this.onCancel=(()=>{this.shouldConfirmCancel()?this.props.cancelModalToggled():this.cancelForm()}),this.onSubmit=(()=>{this.props.onSubmit({rteState:this.state.rteState,commentMode:ut.h.RICH_TEXT,draftType:this.props.draftType})}),this.onSwitchEditorMode=((t,e)=>{this.props.onSwitchMode(t,e,this.props.draftKey)});const e=t.draftType,o=t.hasError,n=t.language,r=t.rtJson;this.state={breakOut:!1,cancelModalText:e===lt.a.edit?Object(dt.a)(n,"comment.confirmCancellation.edit"):Object(dt.a)(n,"comment.confirmCancellation.creation"),rteState:ht.a.createInitial(r),formHeight:void 0,hasChanged:!1,showError:o}}componentWillReceiveProps(t){this.props.draft&&this.props.draft.rteState&&t.draft&&null===t.draft.rteState&&this.setState({rteState:ht.a.createInitial()}),t.hasError!==this.props.hasError&&this.setState({showError:t.hasError})}componentWillUnmount(){this.props.onUnmount({rteState:this.state.rteState}),window.removeEventListener("resize",this.detectBreakout),this.props.instanceRef&&this.props.instanceRef(null)}componentDidMount(){this.props.draft.hasFocus&&this.editor&&(window.addEventListener("resize",this.detectBreakout),b.a.read(this.detectBreakout),b.a.write(()=>{this.props.draft.hasFocus&&this.editor&&this.editor.focus()})),this.props.instanceRef&&this.props.instanceRef(this)}getWrapperHeight(){if(this.editorDomElement)return this.editorDomElement.getBoundingClientRect().height+wt}render(){var t=this.props;const e=t.activeModalId,o=t.canAccessRedesignProfiles,n=t.cancelModalToggled,r=t.className,i=t.depth,s=t.draft,a=t.draftKey,c=t.draftType,l=t.errorMsgs,d=t.hasViewedMarkdownModeFtuUx,u=t.language,p=t.pending,h=t.submitButtonText,m=t.isTopLevelComment,g=t.userName;var b=this.state;const y=b.cancelModalText,C=b.breakOut,S=b.formHeight,O=b.rteState,w=Object(at.a)(a),k=s.draftType===lt.a.edit,E=c!==lt.a.replyToPost;return St(kt,{className:r,breakOut:C,isTopLevelComment:!!m,formHeight:C?S:void 0,innerRef:this.setEditorWrapperRef,pending:p,isFocused:s.hasFocus},void 0,m&&St(Et,{},void 0,St(Mt,{},void 0,"Comment as"),St(v.a,{author:g,canAccessRedesignProfiles:o,isAdmin:!1,isAdminEmeritus:!1,isAuthorDeleted:!1,isMod:!1,isOp:!1},void 0,g)),St(it.a,{breakOut:C,depth:i,isEditing:k},void 0,St(K.b,{dataTestId:et.c,enableFtuMessage:!d,initialHeight:this.props.initialHeight,rteState:O,rteRef:this.setRTEComponentRef,domRef:this.setRTEDomElementRef,language:u,onBlur:this.handleBlur,onEditorResize:this.props.onEditorResize,onFocus:this.handleFocus,onChange:this.handleChange,onSubmit:this.onSubmit,onSwitchEditorMode:this.onSwitchEditorMode,placeholderText:"What are your thoughts?",readOnly:p,trackToolbarClick:f.a,toolbarPosition:"bottom",renderToolbar:this.getToolbarRenderer(E,a,p,h)})),this.state.showError?Object(nt.b)(l,u):null,e===w&&St(x.a,{actionText:Object(ct.a)(u),cancelActionText:Object(ct.b)(u),modalText:y,onConfirm:this.cancelForm,toggleModal:n,trackClick:f.a}),St(yt.a,{language:u,editKey:a,hasValue:ht.a.hasContent(O)}))}}),Dt=o("./src/reddit/models/User/index.ts");const Pt=Object(l.createStructuredSelector)({language:bt.P,userName:t=>t.user.account?Object(Dt.f)(t.user.account):"",pending:(t,e)=>t.comments.submit.pending[e.draftKey],hasError:gt.v,errorMsgs:gt.G,draft:gt.i,disableAutofocus:gt.g}),_t=Object(c.connect)(Pt,(t,e)=>({onMount:()=>t(d.H(e.draftKey)),onCancel:()=>{e.draftType===lt.a.edit?t(d.T({commentId:e.parentCommentId,commentsPageKey:e.commentsPageKey})):t(d.N({parentCommentId:e.parentCommentId,commentsPageKey:e.commentsPageKey}))},onUnmount:o=>t(d.cb(e.draftKey,o)),onFocus:i()(()=>t((t,o)=>Object(u.e)(o(),e.draftType))),onFocusChanged:o=>t(d.V({hasFocus:o,draftKey:e.draftKey})),onSwitchMode:(e,o,n)=>t(d.O(e,o,n)),dispatchSubmit:(o,n)=>t(e.submitAction(o,n))}),(t,e,o)=>Object.assign({},t,e,o,{onSubmit:o=>e.dispatchSubmit(o,t.draft.commentMode)}));e.default=_t(class extends a.a.Component{constructor(){super(...arguments),this.state={},this.getInstanceRef=(t=>this.formInstanceRef=t),this.onCancel=(()=>{this.props.onCancel()}),this.onSwitchMode=(async(t,e,o)=>{await this.props.onSwitchMode(t,e,o),this.formInstanceRef&&this.formInstanceRef.focus()}),this.onEditorResize=(t=>{this.setState({editorHeight:t})})}render(){const t=this.props,e=t.draft.rtJson||t.rtJson||void 0,o={autofocus:t.autofocus||!1,className:t.className,depth:t.depth,disableAutofocus:t.disableAutofocus,draftKey:t.draftKey,draftType:t.draftType,editorElementRef:t.editorElementRef,errorMsgs:t.errorMsgs,initialHeight:this.state.editorHeight,instanceRef:this.getInstanceRef,hasError:t.hasError,language:t.language,onCancel:t.onCancel,onEditorResize:this.onEditorResize,onFocus:t.onFocus,onFocusChanged:t.onFocusChanged,onMount:t.onMount,onSubmit:t.onSubmit,onUnmount:t.onUnmount,pending:t.pending,rtJson:e,isTopLevelComment:t.isTopLevelComment,submitButtonText:t.submitButtonText,userName:t.userName,initialText:t.draft?t.draft.text:t.initialText||"",onSwitchMode:this.onSwitchMode};return t.draft.commentMode===ut.h.RICH_TEXT?a.a.createElement(Kt,o):a.a.createElement(p.b,o)}})},"./src/reddit/components/CommentCreation/translations.ts":function(t,e,o){"use strict";o.d(e,"b",function(){return r}),o.d(e,"a",function(){return i});var n=o("./src/app/strings/index.ts");const r=Object(n.e)("comment.keep"),i=Object(n.e)("postCreation.discard.button");Object(n.e)("comment.confirmCancellation.creation")},"./src/reddit/components/MakeGifToggle/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/app/strings/index.ts"),a=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),c=o("./src/reddit/controls/ToggleSwitch/index.tsx"),l=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),d=o("./src/reddit/layout/row/Inline/index.tsx"),u=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),p=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const h=Object(s.e)("postCreation.mediaInput.makeGif.label"),f=i()(c.a).withConfig({componentId:"qzqq6k-0"})(["width: ","px;"],t=>t.toggleWidth||27),m=i.a.label.withConfig({componentId:"qzqq6k-1"})(["","color: ",";padding: 0 7px;"],l.titleFontH5,t=>Object(u.c)(t).bodyText),g=i()(a.b).withConfig({componentId:"qzqq6k-2"})(["user-select: none;"," {max-width: 400px;min-width: 250px;white-space: normal;}"],a.a);e.a=i()(t=>p(d.a,{className:t.className,onMouseDown:t=>t.preventDefault(),onClick:e=>{e.stopPropagation(),!t.disabled&&t.onClick()}},void 0,p(d.a,{},void 0,p(f,{toggleWidth:t.toggleWidth,on:t.on}),p(m,{},void 0,h(t.language))),t.tooltip?p(g,{text:t.tooltip}):null)).withConfig({componentId:"qzqq6k-3"})(["position: relative;padding: 4px;"," {opacity: ",";}"],d.a,t=>t.disabled?".25;":"1")},"./src/reddit/components/MarkdownHelp/index.tsx":function(t,e,o){"use strict";o.d(e,"b",function(){return S});var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./node_modules/react-redux/es/index.js"),a=o("./bundled-modules/styled-components/styled-components.min.js"),c=o.n(a),l=o("./src/reddit/components/FlairPickerTitle/index.tsx"),d=o("./src/reddit/components/FlairPickerWrapper/index.tsx"),u=o("./src/reddit/components/RichTextJson/elements.tsx"),p=o("./src/reddit/components/RichTextJson/SpoilerText.tsx"),h=o("./src/reddit/components/TrackingHelper/index.tsx"),f=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),m=o("./src/higherOrderComponents/asModal.tsx"),g=o("./src/reddit/actions/modal.ts"),b=o("./src/reddit/controls/Button/index.tsx"),y=o("./src/reddit/layout/row/Inline/index.tsx"),v=o("./src/reddit/layout/row/RightAlign/index.tsx"),x=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),C=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const S="Markdown_Help__Modal",O=c()(y.a).withConfig({componentId:"s82yea6-0"})(["border: none;padding: 16px;"]),w=c.a.div.withConfig({componentId:"s82yea6-1"})(["color: ",";padding: 8px;.help-table {width: 100%;}"],t=>Object(x.c)(t).bodyText),k=c.a.table.withConfig({componentId:"s82yea6-2"})(["margin: 12px 0;"]),E=c.a.p.withConfig({componentId:"s82yea6-3"})(["",""],f.metadataFont);const j=Object(s.connect)(null,(t,e)=>({closeModal:()=>t(Object(g.i)(S))}))(class extends i.a.Component{render(){return C(d.a,{},void 0,C(l.a,{onClosePressed:this.props.closeModal,title:"Markdown Help"}),C(w,{},void 0,C(k,{className:"help-table"},void 0,C("tr",{},void 0,C(u.s,{},void 0,C(u.j,{},void 0,"Type this:")),C(u.s,{},void 0,C(u.j,{},void 0,"to get this:"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"*italics*")),C(u.p,{},void 0,C(u.f,{},void 0,"italics"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"**bold**")),C(u.p,{},void 0,C(u.b,{},void 0,"bold"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"[reddit!](https://reddit.com)")),C(u.p,{},void 0,C(u.a,{href:"https://www.reddit.com"},void 0,"reddit!"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"* item 1"),C(u.j,{},void 0,"* item 2"),C(u.j,{},void 0,"* item 3")),C(u.p,{},void 0,C(u.v,{},void 0,C(u.g,{},void 0,"item 1"),C(u.g,{},void 0,"item 2"),C(u.g,{},void 0,"item 3")))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"> quoted text")),C(u.p,{},void 0,C(u.c,{},void 0,"quoted text"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"~~strikethrough~~")),C(u.p,{},void 0,C(u.d,{},void 0,"strikethrough"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,"super^script")),C(u.p,{},void 0,"super",C(u.m,{},void 0,"script"))),C("tr",{},void 0,C(u.p,{},void 0,C(u.j,{},void 0,">!spoilers!<")),C(u.p,{},void 0,C(p.a,{},void 0,"spoilers")))),C(E,{},void 0,"Check the",C(u.a,{href:"https://www.reddit.com/wiki/commenting"},void 0," commenting wiki page "),"for more help")),C(O,{},void 0,C(v.a,{},void 0,C(b.e,{onClick:this.props.closeModal,"data-redditstyle":!0},void 0,"Close"))))}});e.a=Object(m.a)(Object(h.b)(j))},"./src/reddit/components/PostCreationForm/DivButton/index.m.less":function(t,e,o){t.exports={button:"ypAk-GyDXsczk_xkC7Eq_",disabled:"_3hBIa9WhGl-wxARDDgBvSE"}},"./src/reddit/components/PostCreationForm/DivButton/index.tsx":function(t,e,o){"use strict";var n=o("./node_modules/react/index.js"),r=o.n(n),i=o("./src/lib/classNames/index.ts"),s=o("./src/reddit/constants/keycodes.ts"),a=o("./src/reddit/components/PostCreationForm/DivButton/index.m.less"),c=o.n(a),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},d=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const u=(t,e,o)=>{!e&&o&&o(t)},p=(t,e,o)=>{e||(o&&o(t),t.defaultPrevented||t.which!==s.a.Enter&&t.which!==s.a.Space||t.currentTarget.click())};e.a=(t=>{var e=t.className,o=t.disabled,n=t.onClick,s=t.onKeyPress,a=t.setRef,h=t.tabIndex,f=d(t,["className","disabled","onClick","onKeyPress","setRef","tabIndex"]);return r.a.createElement("div",l({"aria-disabled":!!o,className:Object(i.a)(e,c.a.button,o?c.a.disabled:null),onClick:t=>u(t,o,n),onKeyPress:t=>p(t,o,s),role:"button",ref:a,tabIndex:h||0},f))})},"./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./node_modules/react-redux/es/index.js"),a=o("./node_modules/reselect/es/index.js"),c=o("./bundled-modules/styled-components/styled-components.min.js"),l=o.n(c),d=o("./src/reddit/actions/postCreation/general.ts"),u=o("./src/reddit/components/CommentCreation/MarkdownCommentForm/index.tsx"),p=o("./src/reddit/components/FocusableContent/index.tsx"),h=o("./src/reddit/components/MarkdownHelp/index.tsx"),f=o("./src/reddit/components/PostCreationForm/Prompt/index.tsx"),m=o("./src/reddit/components/ResizableAutosizeTextarea/index.tsx"),g=o("./src/reddit/constants/keycodes.ts"),b=o("./src/reddit/controls/LoadingIcon/index.tsx"),y=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),v=o("./src/reddit/models/PostCreationForm/index.ts"),x=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),C=o("./src/reddit/selectors/activeModalId.ts"),S=o("./src/reddit/selectors/editorContent.ts"),O=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const w=l()(b.a).withConfig({componentId:"s18bgawx-0"})(["display: inline-block;margin-right: 4px;margin-bottom: -4px;border-top: .6em solid rgba(192, 192, 192, 0.7);border-right: .6em solid rgba(192, 192, 192, 0.7);border-bottom: .6em solid rgba(192, 192, 192, 0.7);border-left: .6em solid rgba(192, 192, 192, 0);"]),k=l.a.span.withConfig({componentId:"s18bgawx-1"})(["","border-radius: 4px;color: ",";"],y.titleFontH5,t=>Object(x.c)(t).bodyText),E=l.a.div.withConfig({componentId:"s18bgawx-2"})(["display: flex;align-items: flex-end;"]),j=l.a.button.withConfig({componentId:"s18bgawx-3"})(["","color: ",";"],y.bodyFontSmall,t=>Object(x.c)(t).button),T=l()(u.a).withConfig({componentId:"s18bgawx-4"})(["margin-left: 8px;"]),I=l.a.div.withConfig({componentId:"s18bgawx-5"})(["border-top-left-radius: 4px;border-top-right-radius: 4px;height: 20px;padding: 8px 16px;background-color: ",";display: flex;align-items: center;justify-content: space-between;"],t=>Object(x.c)(t).field),R=Object(a.createStructuredSelector)({activeModalId:C.a,isConverting:t=>Object(S.a)(t)}),A=Object(s.connect)(R,(t,e)=>({onChange:o=>{t(Object(d.c)(o)),e.onChange&&e.onChange(o)},helpModalToggled:()=>t(Object(d.x)(h.b)),switchToRTEModalToggled:()=>t(Object(d.x)(f.c))}));e.a=A(class extends i.a.Component{constructor(t){super(t),this.textAreaRef=null,this.onChange=(t=>{const e=t.currentTarget.value;this.props.onChange(e)}),this.onBlur=(()=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur()}),this.onFocus=(()=>{const t=this.props.onFocus;t&&t(),this.setState({isFocused:!0})}),this.handleKeyDown=(t=>{const e=t.ctrlKey,o=t.metaKey,n=t.keyCode;(e||o)&&n===g.a.Enter&&this.props.onSubmit()}),this.handleSwitchModeClick=(()=>{this.props.value?this.props.switchToRTEModalToggled():this.props.onSwitchEditorMode(v.h.RICH_TEXT,this.props.value)}),this.handleSwitchToRTEConfirm=(()=>{this.props.switchToRTEModalToggled(),this.props.onSwitchEditorMode(v.h.RICH_TEXT,this.props.value)}),this.setTextAreaRef=(t=>this.textAreaRef=t),this.state={isFocused:!1}}componentDidMount(){const t=this.props.instanceRef;t&&t(this)}componentWillUnmount(){const t=this.props.instanceRef;t&&t(null)}focus(){this.textAreaRef&&this.textAreaRef.focus()}render(){var t=this.props;const e=t.className,o=t.isConverting,n=t.placeholderText,r=t.value,i=this.state.isFocused;return O("div",{className:e},void 0,O(p.a,{isFocused:i},void 0,O(I,{},void 0,O(E,{},void 0,O(k,{},void 0,"Markdown"),O(T,{onClick:this.props.helpModalToggled})),O(j,{onClick:this.handleSwitchModeClick},void 0,o&&O(w,{sizePx:12}),"Switch to Fancy Pants Editor")),O(m.a,{disabled:!!this.props.disabled,initialHeight:this.props.initialHeight,innerRef:this.setTextAreaRef,onBlur:this.onBlur,onChange:this.onChange,onEditorResize:this.props.onEditorResize,onFocus:this.onFocus,onKeyDown:this.handleKeyDown,placeholder:n,value:r})),this.props.activeModalId===h.b&&O(h.a,{language:this.props.language}),this.props.activeModalId===f.c&&O(f.d,{modalId:f.c,onCancel:this.props.switchToRTEModalToggled,onConfirm:this.handleSwitchToRTEConfirm}))}})},"./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./bundled-modules/styled-components/styled-components.min.js"),a=o.n(s),c=o("./src/higherOrderComponents/asModal.tsx"),l=o("./src/reddit/components/ModalStyledComponents/index.tsx"),d=o("./src/reddit/constants/keycodes.ts"),u=o("./src/reddit/controls/Button/index.tsx"),p=o("./src/reddit/controls/TextButton/index.tsx"),h=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),f=o("./src/reddit/layout/twoCol/ExpandLeft/index.tsx"),m=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const g=a()(u.e).withConfig({componentId:"s1o5libp-0"})(["margin-left: 8px;"]),b=a()(l.k).withConfig({componentId:"s1o5libp-1"})(["",""],h.bodyFont);e.a=Object(c.a)(class extends i.a.PureComponent{constructor(){super(...arguments),this.handleEscapeKey=(t=>{t.keyCode===d.a.Escape&&this.props.onClose()})}componentDidMount(){document.addEventListener("keydown",this.handleEscapeKey)}componentWillUnmount(){document.removeEventListener("keydown",this.handleEscapeKey)}render(){return m(l.c,{},void 0,m(l.g,{},void 0,m(f.b,{},void 0,m(l.l,{},void 0,this.props.titleText),m(p.a,{onClick:this.props.onClose},void 0,m(l.b,{})))),m(l.h,{},void 0,m(b,{},void 0,this.props.bodyText)),m(l.e,{},void 0,m(l.a,{onClick:this.props.onSecondaryAction},void 0,this.props.secondaryButtonText),m(g,{onClick:this.props.onPrimaryAction},void 0,this.props.primaryButtonText)))}})},"./src/reddit/components/PostCreationForm/Prompt/index.tsx":function(t,e,o){"use strict";o.d(e,"a",function(){return u}),o.d(e,"b",function(){return p}),o.d(e,"c",function(){return h});var n=o("./node_modules/react/index.js"),r=o.n(n),i=o("./node_modules/react-redux/es/index.js"),s=o("./node_modules/reselect/es/index.js"),a=o("./src/app/strings/index.ts"),c=o("./src/reddit/selectors/user.ts"),l=o("./src/reddit/components/PostCreationForm/Prompt/PromptModal.tsx"),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};const u="POST_CREATION__LOAD_DRAFT_MODAL_ID",p="POST_CREATION__MAX_DRAFTS_MODAL_ID",h="MARKDOWN_EDITOR__SWITCH_TO_RTE_MODAL_ID",f=(t,e)=>`postCreation.prompt.${t}.${e}`,m={body:f("default","body"),cancel:"postCreation.cancel",confirm:f("default","confirm"),title:f("default","title")},g=Object.assign({},m,{body:f("loadDraft","body"),confirm:f("loadDraft","confirm"),title:f("loadDraft","title")}),b=Object.assign({},m,{body:f("maxDrafts","body"),confirm:f("maxDrafts","confirm"),title:f("maxDrafts","title")}),y=Object.assign({},m,{body:f("switchToRTE","body"),confirm:f("switchToRTE","confirm"),title:f("switchToRTE","title")}),v={[u]:g,[p]:b,[h]:y},x=Object(s.createStructuredSelector)({language:c.P}),C=Object(i.connect)(x),S=(t,e)=>({bodyText:Object(a.a)(t,e.body),secondaryButtonText:Object(a.a)(t,e.cancel),primaryButtonText:Object(a.a)(t,e.confirm),titleText:Object(a.a)(t,e.title)});e.d=C(class extends r.a.PureComponent{constructor(){super(...arguments),this.onCancel=(()=>{this.props.onCancel(this.props.modalId)}),this.onConfirm=(()=>{this.props.onConfirm(this.props.modalId)})}render(){var t=this.props;const e=t.language,o=t.modalId;return r.a.createElement(l.a,d({},S(e,v[o]),{onClose:this.onCancel,onPrimaryAction:this.onConfirm,onSecondaryAction:this.onCancel}))}})},"./src/reddit/components/PostEditForm/index.tsx":function(t,e,o){"use strict";o.r(e);var n=o("./node_modules/lodash/noop.js"),r=o.n(n),i=o("./node_modules/react/index.js"),s=o.n(i),a=o("./node_modules/react-redux/es/index.js"),c=o("./node_modules/react-router-redux/es/index.js"),l=o("./node_modules/reselect/es/index.js"),d=o("./bundled-modules/styled-components/styled-components.min.js"),u=o.n(d),p=o("./src/app/strings/index.ts"),h=o("./src/reddit/helpers/correlationIdTracker.ts"),f=o("./src/reddit/models/PostCreationForm/index.ts"),m=o("./src/reddit/selectors/postCreations.ts"),g=o("./src/reddit/actions/postCreation/editing.ts"),b=o("./src/reddit/actions/postCreation/editorContent.ts"),y=o("./src/reddit/components/CommentCreation/NavigationModule/index.ts"),v=o("./src/lib/constants/index.ts"),x=o("./src/lib/memoizeByReference/index.ts"),C=o("./src/reddit/components/RichTextEditor/media/helpers.ts");const S=Object(x.a)((t,e,o)=>{const n=t.name,r=t.allowedPostTypes,i=Object(C.f)(e),s=((t,e,o,n)=>{if(!e)return null;let r="";return!t.total||e.images||e.videos?t.video&&!e.videos?r="postCreation.mediaInput.videosAreNotAllowed":!t.image&&!t.gifvideo||e.images||(r="postCreation.mediaInput.imagesAreNotAllowed"):r="postCreation.mediaInput.mediaAreNotAllowed",r?Object(p.a)(n,r,{subredditName:o}):null})(i,r,n,o);return s?[s]:((t,e)=>{const o=[];return t.image>v.db&&o.push(Object(p.a)(e,"postCreation.mediaInput.imagesLimitExceeded")),t.video+t.gifvideo>v.gb&&o.push(Object(p.a)(e,"postCreation.mediaInput.videosLimitExceeded")),o})(i,o)});var O,w=o("./src/reddit/components/PostCreationForm/MarkdownEditor/index.tsx"),k=o("./src/reddit/components/RichTextEditor/index.tsx"),E=o("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),j=o("./src/reddit/contexts/PageLayer/index.tsx"),T=o("./src/reddit/controls/ErrorText/index.tsx"),I=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),R=o("./src/reddit/selectors/user.ts"),A=o("./src/reddit/controls/Button/index.tsx"),M=o("./src/reddit/controls/LoadingIcon/index.tsx"),B=(O="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,n){var r=t&&t.defaultProps,i=arguments.length-3;if(e||0===i||(e={}),e&&r)for(var s in r)void 0===e[s]&&(e[s]=r[s]);else e||(e=r||{});if(1===i)e.children=n;else if(i>1){for(var a=Array(i),c=0;c<i;c++)a[c]=arguments[c+3];e.children=a}return{$$typeof:O,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const K=Object(p.e)("postCreation.rtfPlaceholderOptional"),D=Object(p.e)("postCreation.rtfPlaceholderRequired"),P=u.a.div.withConfig({componentId:"s8znyg9-0"})(["display: flex;flex-direction: row;justify-content: flex-end;margin-top: 8px;"]),_=u.a.div.withConfig({componentId:"s8znyg9-1"})(["display: flex;align-items: flex-end;flex-flow: column nowrap;overflow: hidden;white-space: nowrap;"]),F=u()(k.b).withConfig({componentId:"s8znyg9-2"})(["color: #222;opacity: ",";"],t=>t.pending?"0.6":"1"),L=u.a.div.withConfig({componentId:"s8znyg9-3"})(["padding: 8px;cursor: text;color: ",";"],t=>Object(I.c)(t).body),N=u()(A.e).withConfig({componentId:"s8znyg9-4"})(["min-width: 90px;min-height: 27px;padding: 5px 10px;line-height: normal;"]),U=u()(M.a).withConfig({componentId:"s8znyg9-5"})(["display: inline-block;margin-bottom: -3px;"]),H=Object(j.w)(),z=Object(l.createStructuredSelector)({destSubreddit:m.f,editorMode:m.g,errorText:m.h,hasError:m.i,language:R.P,markdownDraft:m.j,pending:m.P,postingRequirements:(t,{pageLayer:e})=>{const o=Object(j.t)(t,{pageLayer:e});if(o)return t.subredditSettings.requirementsBySubreddit[o.name.toLowerCase()]},rteDraft:m.k,subreddit:j.t,uploads:t=>t.uploads,user:R.j}),$=Object(a.connect)(z,(t,e)=>({onCancel:e=>t(g.b(e)),onSubmitDraft:e=>t(g.c(e)),onSuccess:e=>t(Object(c.b)(e)),onToggleEditorMode:(e,o)=>t(b.d(f.g.POST_EDITING,e,o))}));e.default=H($(class extends s.a.Component{constructor(t){super(t),this.onEditorResize=(t=>{this.setState({editorHeight:t})}),this.onMarkdownPostChange=(t=>{const e=this.state.markdownBody,o=this.state.markdownPostDraftChanged||e.trim()!==t.trim();this.setState({markdownBody:t,markdownPostDraftChanged:o})}),this.onRichPostChange=((t,e)=>{this.setState({rteState:t,richtextPostDraftChanged:this.state.richtextPostDraftChanged||e})}),this.haveMarkdownPostDraft=(()=>!!(this.state.markdownBody||"").trim()),this.haveDraft=(()=>this.props.editorMode===f.h.RICH_TEXT?this.haveRichPostDraft():this.haveMarkdownPostDraft()),this.onSubmit=(()=>{const t=this.buildPostSubmission();t&&this.props.onSubmitDraft(t)}),this.onToggleEditorMode=(async(t,e)=>{this.setState({markdownPostDraftChanged:!1,richtextPostDraftChanged:!1}),await this.props.onToggleEditorMode(t,e),t===f.h.RICH_TEXT?this.rteRef&&this.rteRef.focus():this.markdownEditorRef&&this.markdownEditorRef.focus()}),this.getMediaValidationErrors=(()=>{var t=this.props;const e=t.editorMode,o=t.destSubreddit,n=t.language,r=this.state.rteState;return r.isBound&&e===f.h.RICH_TEXT?S(o,r.editorState.getCurrentContent(),n):[]}),this.getTextPostContent=(()=>{var t=this.props;const e=t.editorMode,o=t.uploads;var n=this.state;const r=n.markdownBody,i=n.rteState;return e===f.h.RICH_TEXT?E.a.toRichTextJSON(i,o):{markdown:r}}),this.buildPostSubmission=(()=>{const t=this.props.post;return Object.assign({post:t},this.getTextPostContent(),{validate_on_submit:!0})}),this.cancelEdit=(()=>{this.props.onCancel(this.props.post.id)}),this.setRteRef=(t=>this.rteRef=t),this.setMarkdownEditorRef=(t=>this.markdownEditorRef=t),this.state={markdownBody:t.markdownDraft,markdownPostDraftChanged:!1,richtextPostDraftChanged:!1,rteState:t.rteDraft}}componentDidMount(){Object(h.d)(h.a.PostComposer)}componentWillUnmount(){Object(h.b)(h.a.PostComposer),this.cancelEdit()}componentWillReceiveProps(t){t.rteDraft!==this.props.rteDraft&&this.setState({rteState:t.rteDraft,richtextPostDraftChanged:!0}),t.markdownDraft!==this.props.markdownDraft&&this.setState({markdownBody:t.markdownDraft,markdownPostDraftChanged:!0})}haveRichPostDraft(){const t=this.state.rteState;return E.a.hasContent(t)}hasChanged(){const t=this.props.editorMode;var e=this.state;const o=e.markdownPostDraftChanged,n=e.richtextPostDraftChanged;return t===f.h.RICH_TEXT?!!n:t===f.h.MARKDOWN&&!!o}render(){var t=this.props;const e=t.language,o=t.pending,n=t.editorMode,i=t.errorText,s=t.hasError,a=t.post,c=t.postingRequirements;var l=this.state;const d=l.markdownBody,u=l.markdownPostDraftChanged,h=l.richtextPostDraftChanged,m=l.rteState,g=c&&"required"===c.ruleBodyRequirement?D(e):K(e),b=this.getMediaValidationErrors(),v=s?[i||Object(p.a)(e,"error.type.generic")]:b;return B(L,{},void 0,n===f.h.RICH_TEXT?B(F,{allowMedia:!0,destSubreddit:this.props.destSubreddit,initialHeight:this.state.editorHeight,rteState:m,language:e,onChange:this.onRichPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,pending:!!o,readOnly:!!o,rteRef:this.setRteRef,trackToolbarClick:r.a,placeholderText:g}):B(w.a,{language:e,initialHeight:this.state.editorHeight,instanceRef:this.setMarkdownEditorRef,disabled:!!o,value:d,onChange:this.onMarkdownPostChange,onEditorResize:this.onEditorResize,onSubmit:this.onSubmit,onSwitchEditorMode:this.onToggleEditorMode,placeholderText:g}),B(P,{},void 0,B(A.m,{disabled:!!o,onClick:this.cancelEdit},void 0,Object(p.a)(e,"posts.cancel")),B(N,{disabled:!!o||!!b.length||!this.hasChanged(),onClick:this.onSubmit},void 0,o?B(U,{sizePx:10}):Object(p.a)(e,"posts.save"))),B(_,{},void 0,!!v.length&&Object(T.b)(v,e)),B(y.a,{editKey:a.id,language:e,hasValue:!(!u&&!h),isPostEdit:!0}))}}))},"./src/reddit/components/ProgressBar/index.tsx":function(t,e,o){"use strict";o.d(e,"a",function(){return c});o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const c=i.a.div.withConfig({componentId:"s19asorx-0"})(["height: 100%;background: ",";transition: width .5s;border-radius: 2px;"],t=>Object(s.c)(t).lightText);e.b=i()(t=>a("div",{className:t.className},void 0,a(c,{style:{width:`${t.percent.toFixed(2)}%`}}))).withConfig({componentId:"s19asorx-1"})(["height: 2px;border-radius: 2px;background: rgba(255, 255, 255, .2);"])},"./src/reddit/components/ResizableAutosizeTextarea/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./node_modules/react-autosize-textarea/lib/index.js"),a=o.n(s),c=o("./bundled-modules/styled-components/styled-components.min.js"),l=o.n(c),d=o("./src/reddit/constants/componentSizes.ts"),u=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),p=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),h=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}}),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},m=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const g=l()(({className:t,children:e,editorWrapperRef:o})=>i.a.createElement("div",{className:t,ref:o},e)).withConfig({componentId:"s16k5j9u-0"})(["background-color: ",";height: ",";min-height: ","px;overflow: hidden auto;padding: ","px ","px;resize: vertical;"],t=>Object(p.c)(t).body,t=>t.initialHeight?`${t.initialHeight}px`:"unset",d.z,d.A,d.B),b=l()(t=>{t.isFullHeight;var e=t.textAreaRef,o=m(t,["isFullHeight","textAreaRef"]);return i.a.createElement(a.a,f({innerRef:e},o))}).withConfig({componentId:"s16k5j9u-1"})(["","background: transparent;border: none;box-sizing: border-box;caret-color: ",";color: ",";display: block;min-height: ",";outline: none;resize: none;width: 100%;&:disabled,&:placeholder-shown {opacity: 0.5;}"],u.bodyFontMono,t=>Object(p.c)(t).button,t=>Object(p.c)(t).bodyText,t=>t.isFullHeight?"100%":`${d.z}px`);e.a=class extends i.a.Component{constructor(t){super(t),this.editorHeight=null,this.editorRef=null,this.editorStyleMutationObserver=null,this.onEditorStyleChanged=(()=>{if(!this.editorRef)return;this.state.isResized||this.setState({isResized:!0});const t=this.editorRef.style.height?Number.parseInt(this.editorRef.style.height):null;this.editorHeight!==t&&(this.editorHeight=t,t&&this.props.onEditorResize&&this.props.onEditorResize(t))}),this.setEditorWrapperRef=(t=>this.editorRef=t),this.state={initialHeight:t.initialHeight,isResized:!!t.initialHeight}}componentDidMount(){this.editorRef&&(this.editorStyleMutationObserver=new MutationObserver(this.onEditorStyleChanged),this.editorStyleMutationObserver.observe(this.editorRef,{attributes:!0,attributeFilter:["style"]}))}componentWillUnmount(){this.editorStyleMutationObserver&&(this.editorStyleMutationObserver.disconnect(),this.editorStyleMutationObserver=null)}render(){const t=this.props,e=t.initialHeight,o=t.innerRef,n=(t.onEditorResize,m(t,["initialHeight","innerRef","onEditorResize"])),r=this.state.isResized;return h(g,{editorWrapperRef:this.setEditorWrapperRef,initialHeight:e},void 0,i.a.createElement(b,f({},n,{children:!0,isFullHeight:!!r,textAreaRef:o})))}}},"./src/reddit/components/RichTextEditor/DragController/helpers.ts":function(t,e,o){"use strict";var n=o("./node_modules/lodash/includes.js"),r=o.n(n);var i=o("./src/reddit/helpers/dom/index.ts"),s=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");o.d(e,"b",function(){return h}),o.d(e,"c",function(){return f}),o.d(e,"a",function(){return m});const a=t=>t.className.indexOf("public-DraftEditor-content")>=0,c=t=>!!t.parentElement&&!!t.parentElement.parentElement&&a(t.parentElement.parentElement),l=t=>!(!t.dataset.block||!t.dataset.offsetKey),d=t=>{const e=t.dataset.offsetKey;return e?(t=>t.split("-")[0])(e):""},u=(t,e)=>{return((t,e)=>{const o=function(t,e){let o=0,n=t.length-1;for(;o<=n;){const r=n+o>>1,i=e(t[r]);if(i>0)o=r+1;else{if(!(i<0))return r;n=r-1}}return o}(t,t=>{const o=t.getBoundingClientRect();return e<o.top?-1:e>o.bottom?1:0});return t[Math.min(o,t.length-1)]})(t.querySelectorAll("[data-block][data-offset-key]"),e)},p=(t,e)=>{const o=Object(i.b)(t,l,a);return o||u(t,e)},h=(t,e)=>{const o=(t=>{const e=t.target;if(!(e instanceof HTMLElement))return;const o=Object(i.b)(e,a);if(!o)return;const n=p(e,t.clientY);if(!n)return;const r=Object(i.b)(n,c);return r?{editorContentElement:o,topLevelElement:r,blockElement:n}:void 0})(e);if(!o)return;const n=o.topLevelElement,r=o.blockElement,l=d(r),u=t.getCurrentContent().getBlockForKey(l);if(!u)return;var h=((t,e,o)=>{let n=o,r=o;return t.getType()===s.b.UNSTYLED?n=r=e:Object(s.o)(t.getType())?(n=e,r=o.nextElementSibling):Object(s.u)(t.getType())&&(n=o.previousElementSibling,r=e),{upperElement:n,lowerElement:r}})(u,r,n);const f=h.upperElement,m=h.lowerElement;var g=((t,e,o)=>{const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();let s,c;if(o>(n.top+r.bottom)/2){s=r.bottom,c=!1;const t=Object(i.b)(e,t=>!!t.nextElementSibling,a);t&&(s=(t.nextElementSibling.getBoundingClientRect().top+r.bottom)/2)}else{s=n.top,c=!0;const e=Object(i.b)(t,t=>!!t.previousElementSibling,a);e&&(s=(e.previousElementSibling.getBoundingClientRect().bottom+n.top)/2)}return{clientY:s,isBefore:c}})(f,m,e.clientY);const b=g.clientY,y=g.isBefore;let v=l;if(u.getType()!==s.b.UNSTYLED){const t=p(y?f:m,b);t&&(v=d(t))}return{clientY:b,isBefore:y,blockKey:v}},f=t=>t.items?!!Array.from(t.items).find(t=>"file"===t.kind):!(!t.files||!t.files.length)||r()(t.types,"Files"),m=t=>t.items?Array.from(t.items).map(t=>"file"===t.kind?t.getAsFile():null).filter(Boolean):t.files?Array.from(t.files):[]},"./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx":function(t,e,o){"use strict";o.d(e,"a",function(){return h});var n,r=o("./node_modules/react/index.js"),i=o.n(r),s=o("./bundled-modules/styled-components/styled-components.min.js"),a=o.n(s),c=o("./src/reddit/constants/colors.ts"),l=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),d=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),u=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}}),p=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const h=a.a.div.withConfig({componentId:"d71y8a-0"})(["","position: absolute;bottom: 100%;left: 50%;transform: translateX(-50%);margin-bottom: 5px;padding: 5px 16px;border-radius: 5px;background-color: ",";color: ",';text-align: center;pointer-events: none;white-space: pre;z-index: 99999;&::after {content: "";position: absolute;top: 100%;left: 50%;margin-left: -5px;width: 0;border-top: 5px solid ',";border-right: 5px solid transparent;border-left: 5px solid transparent;}"],l.titleFontH6,c.a.black,t=>Object(d.c)(t).lightText,c.a.black);e.b=a()(t=>{const e=t.text,o=t.children,n=p(t,["text","children"]);return i.a.createElement("div",n,e?u(h,{},void 0,e):null,o)}).withConfig({componentId:"d71y8a-1"})(["position: absolute;top: 0;left: 0;right: 0;bottom: 0;"," {opacity: 0;visibility: hidden;transition: opacity 0s 0.5s;}&:hover "," {visibility: visible;opacity: 1;}"],h,h)},"./src/reddit/components/RichTextEditor/Toolbar/FormatterButton/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),a=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),c=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const l=t=>{t.preventDefault(),t.stopPropagation()};e.a=i()(t=>{const e=t.active,o=t.className;var n=t.enabled;const r=void 0===n||n,i=t.tooltip,s=t.Icon,d=t.onClick,u=t.children;return c("div",{"aria-label":i,"aria-selected":e,className:o,onMouseDown:l,onClick:function(t){l(t),r&&d&&d()},role:"button",tabIndex:-1},void 0,c(a.b,{text:r?i:""}),s?c(s,{}):null,u)}).withConfig({componentId:"sfwc85-0"})(["align-items: center;border-radius: 2px;box-sizing: border-box;display: flex;line-height: 0px;outline: none;padding:  4px;position: relative;transition: background-color 0.1s;color: ",";&:hover, &:focus {// TODO STYLE (theme colors)\n","}"],t=>{var e=t.active;const o=void 0!==e&&e;var n=t.enabled;return void 0===n||n?o?Object(s.c)(t).navIcon:Object(s.c)(t).actionIcon:Object(s.c)(t).inactive},({enabled:t=!0})=>t?"background-color: rgba(150, 150, 150, 0.05);":"")},"./src/reddit/components/RichTextEditor/Toolbar/MarkdownButton/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./node_modules/react-redux/es/index.js"),i=o("./node_modules/reselect/es/index.js"),s=o("./bundled-modules/styled-components/styled-components.min.js"),a=o.n(s),c=o("./src/app/strings/index.ts"),l=o("./src/reddit/components/PostCreationForm/DivButton/index.tsx"),d=o("./src/reddit/controls/LoadingIcon/index.tsx"),u=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),p=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),h=o("./src/reddit/selectors/editorContent.ts"),f=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),m=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const g=Object(c.e)("postCreation.toolbar.markdownMode"),b=Object(c.e)("postCreation.toolbar.switchToMarkdown"),y=a()(d.a).withConfig({componentId:"s100gssv-0"})(["display: inline-block;margin-right: 4px;margin-bottom: -4px;border-top: .6em solid rgba(192, 192, 192, 0.7);border-right: .6em solid rgba(192, 192, 192, 0.7);border-bottom: .6em solid rgba(192, 192, 192, 0.7);border-left: .6em solid rgba(192, 192, 192, 0);"]),v=a.a.span.withConfig({componentId:"s100gssv-1"})(["","color: ",";"],u.bodyFontSmall,t=>Object(p.c)(t).linkText),x=a()(l.a).withConfig({componentId:"s100gssv-2"})(["border-radius: 2px;color: ",";line-height: 20px;outline: none;padding: 4px;position: relative;vertical-align: bottom;&:hover, &:focus {background-color: rgba(150, 150, 150, 0.05);}"],t=>Object(p.c)(t).actionIcon),C=Object(i.createStructuredSelector)({isConverting:(t,e)=>Object(h.a)(t,e.draftKey)}),S=Object(r.connect)(C);e.a=S(t=>{const e=g(t.language);return m(x,{"aria-label":e,tabIndex:-1,className:t.className,onClick:t.onClick},void 0,t.isConverting&&m(y,{sizePx:12}),!t.shouldHideTooltip&&m(f.b,{text:e}),m(v,{},void 0,b(t.language)))})},"./src/reddit/components/RichTextEditor/Toolbar/formatterConfigs.ts":function(t,e,o){"use strict";var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/app/strings/index.ts"),a=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),c=(o("./node_modules/react/index.js"),o("./src/reddit/models/Theme/NewColorSystem/index.ts")),l=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});var d=i()(t=>l("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,l("polygon",{points:"8.63 4 5.36 4 2 9.8 2 16 9.2 16 9.2 9.24 6.75 9.24 8.63 4"}),l("polygon",{points:"15.56 9.24 17.39 4 14.16 4 10.8 9.8 10.8 16 18 16 18 9.24 15.56 9.24"}))).withConfig({componentId:"s10msepz-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),u=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var p=i()(t=>u("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,u("path",{d:"M12.44,9.72v0a3.07,3.07,0,0,0,2.67-3.22c0-2.84-2.42-3.46-5-3.46H4.51V17H10.4c2.61,0,5.09-1,5.09-3.86C15.49,10.91,14.14,10,12.44,9.72ZM7.54,5.38H9.85c1.65,0,2.31.61,2.31,1.7s-.74,1.68-2.35,1.68H7.54ZM10,14.65H7.54V10.95H9.89c1.7,0,2.59.61,2.59,1.83S11.72,14.65,10,14.65Z"}))).withConfig({componentId:"hvqc8l-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),h=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var f=i()(t=>h("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,h("path",{d:"M15,2H13a1,1,0,0,0,0,2h2a1,1,0,0,1,1,1V15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V13a1,1,0,0,0-2,0v2a3,3,0,0,0,3,3H15a3,3,0,0,0,3-3V5A3,3,0,0,0,15,2Z"}),h("path",{d:"M2.79,5a.71.71,0,0,0,.53-.2.74.74,0,0,0,.19-.54V4.08l0-.48H5.07V8.4H4.9a1,1,0,0,0-.69.18A.79.79,0,0,0,4,9.2a.79.79,0,0,0,.21.61A1,1,0,0,0,4.9,10H7.1a1,1,0,0,0,.69-.19A.79.79,0,0,0,8,9.2a.78.78,0,0,0-.21-.61A1,1,0,0,0,7.1,8.4H6.93V3.6H8.44l0,.48a1.19,1.19,0,0,0,.18.72.7.7,0,0,0,.56.2.75.75,0,0,0,.59-.2A1,1,0,0,0,10,4.14V4.08L9.93,2.9q0-.64-.18-.77A1.06,1.06,0,0,0,9.11,2H2.89a1.06,1.06,0,0,0-.63.13q-.16.13-.18.77L2,4.08v.06a.94.94,0,0,0,.19.65A.78.78,0,0,0,2.79,5Z"}))).withConfig({componentId:"s1y5or1g-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),m=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var g=i()(t=>m("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,m("polygon",{points:"6.57 3 6.57 5.57 10.73 5.57 10.73 17 13.82 17 13.82 5.57 18 5.57 18 3 6.57 3"}),m("polygon",{points:"2 9.65 4.68 9.65 4.68 17 6.66 17 6.66 9.65 9.35 9.65 9.35 8 2 8 2 9.65"}))).withConfig({componentId:"s1ceihzv-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),b=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var y=i()(t=>b("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,b("polygon",{points:"7.24 17 10.3 17 12.1 6.85 9.05 6.85 7.24 17"}),b("polygon",{points:"9.7 3 9.28 5.46 12.34 5.46 12.76 3 9.7 3"}))).withConfig({componentId:"s1syzggm-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),v=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var x=i()(t=>v("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,v("path",{d:"M18.8,9.4l-3-4a1,1,0,1,0-1.6,1.2L16.75,10,14.2,13.4a1,1,0,1,0,1.6,1.2l3-4A1,1,0,0,0,18.8,9.4Z"}),v("path",{d:"M5.6,5.2a1,1,0,0,0-1.4.2l-3,4a1,1,0,0,0,0,1.2l3,4a1,1,0,0,0,1.6-1.2L3.25,10,5.8,6.6A1,1,0,0,0,5.6,5.2Z"}),v("path",{d:"M12.24,1A1,1,0,0,0,11,1.76l-4,16A1,1,0,1,0,9,18.24l4-16A1,1,0,0,0,12.24,1Z"}))).withConfig({componentId:"s9ygb27-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),C=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var S=i()(t=>C("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,C("path",{d:"M4.78,5.15H4.15V2H3.09a1,1,0,0,1-.73.25V3a1.84,1.84,0,0,0,.7-.17V5.15H2.35V6H4.78Z"}),C("path",{d:"M3.62,8.88c.25,0,.39.12.39.35s-.17.41-.77.78c-1,.63-1.15,1.21-1.15,1.78V12H5v-.85H3.31c.06-.16.22-.35.72-.64.81-.43,1-.87,1-1.32C5,8.47,4.58,8,3.65,8A1.76,1.76,0,0,0,2.08,9l.72.52A1.07,1.07,0,0,1,3.62,8.88Z"}),C("path",{d:"M4.43,15.87A.82.82,0,0,0,5,15.05C5,14.4,4.53,14,3.65,14a2.15,2.15,0,0,0-1.51.61l.55.64a1.24,1.24,0,0,1,.88-.39c.27,0,.41.12.41.32s-.15.38-.67.38H3v.72h.31c.53,0,.76.13.76.46s-.15.42-.57.42a1.05,1.05,0,0,1-.85-.5L2,17.21A1.83,1.83,0,0,0,3.57,18c.94,0,1.55-.43,1.55-1.24A.87.87,0,0,0,4.43,15.87Z"}),C("path",{d:"M17,9H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),C("path",{d:"M17,15H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),C("path",{d:"M8,5h9a1,1,0,0,0,0-2H8A1,1,0,0,0,8,5Z"}))).withConfig({componentId:"s1qpen4q-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),O=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var w=i()(t=>O("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,O("path",{d:"M10,1.5A8.5,8.5,0,1,0,18.5,10,8.51,8.51,0,0,0,10,1.5Zm.71,13-.15.12-.18.1-.18.05a.73.73,0,0,1-.2,0,1,1,0,0,1-.71-.29,1,1,0,0,1-.21-.32A1,1,0,0,1,9,13.83a1,1,0,0,1,.08-.38,1,1,0,0,1,.21-.32,1,1,0,0,1,.91-.28l.18.06.18.09.15.13a1,1,0,0,1,.29.7A1,1,0,0,1,10.71,14.54Zm-.22-3.6a.5.5,0,0,1-1,0l-1-4.67A.5.5,0,0,1,9,5.67h2a.5.5,0,0,1,.49.6Z"}))).withConfig({componentId:"s18lwxpe-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),k=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var E=i()(t=>k("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,k("path",{d:"M11.86,12a1.36,1.36,0,0,1,.7,1.19c0,1.07-1,1.59-2.42,1.59a4.12,4.12,0,0,1-3.75-2.36L4.08,13.79A6.21,6.21,0,0,0,10,17.2c3.86,0,5.55-2,5.55-4.22a4,4,0,0,0-.12-1Z"}),k("path",{d:"M17,9H11.61l-1.09-.31c-1.82-.51-2.85-.9-2.85-2,0-.82.71-1.39,2-1.39a4.13,4.13,0,0,1,3.41,2L15.2,5.65A6.23,6.23,0,0,0,9.69,2.8c-3,0-5,1.56-5,4.14A3.31,3.31,0,0,0,5.31,9H3a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Z"}))).withConfig({componentId:"s1s07yzp-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),j=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var T=i()(t=>j("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,j("path",{d:"M6.94,3,2,17H4.83L5.9,13.89h4.75l1,3.11h3.11L9.86,3Zm-.28,8.67L8.29,6.92h0l1.6,4.75Z"}),j("path",{d:"M16.06,3H14.92L13,8.49h1.11l.42-1.22h1.86l.41,1.22H18ZM14.81,6.4l.64-1.86h0l.63,1.86Z"}))).withConfig({componentId:"s1qvf1bc-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon),I=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var R=i()(t=>I("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,I("path",{d:"M17,9H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),I("path",{d:"M17,15H8a1,1,0,0,0,0,2h9a1,1,0,0,0,0-2Z"}),I("path",{d:"M8,5h9a1,1,0,0,0,0-2H8A1,1,0,0,0,8,5Z"}),I("path",{d:"M4.88,9.43a1.29,1.29,0,0,0-.13-.26,2.17,2.17,0,0,0-.19-.23,1.55,1.55,0,0,0-2.12,0,2.16,2.16,0,0,0-.19.23,2.2,2.2,0,0,0-.14.26A2.3,2.3,0,0,0,2,9.71,1.32,1.32,0,0,0,2,10a1.5,1.5,0,0,0,1.5,1.5,1.55,1.55,0,0,0,.57-.11A1.52,1.52,0,0,0,5,10a1.32,1.32,0,0,0,0-.29A1.27,1.27,0,0,0,4.88,9.43Z"}),I("path",{d:"M4.33,14.75l-.26-.14-.28-.08a1.42,1.42,0,0,0-.58,0l-.28.08-.26.14a2.16,2.16,0,0,0-.23.19A1.52,1.52,0,0,0,2,16a1.47,1.47,0,0,0,.44,1.06,1.52,1.52,0,0,0,.49.33,1.53,1.53,0,0,0,1.14,0,1.61,1.61,0,0,0,.49-.33A1.52,1.52,0,0,0,5,16a1.5,1.5,0,0,0-.44-1.06A2.06,2.06,0,0,0,4.33,14.75Z"}),I("path",{d:"M2.44,2.94A1.52,1.52,0,0,0,2,4a1.47,1.47,0,0,0,.44,1.06,1.59,1.59,0,0,0,.48.33,1.65,1.65,0,0,0,.58.11,1.55,1.55,0,0,0,.57-.11,1.5,1.5,0,0,0,.49-.33,1.5,1.5,0,0,0,0-2.12A1.55,1.55,0,0,0,2.44,2.94Z"}))).withConfig({componentId:"s1rg85nh-0"})(["fill: ",";"],t=>Object(c.c)(t).actionIcon);o.d(e,"f",function(){return A}),o.d(e,"b",function(){return z}),o.d(e,"e",function(){return $}),o.d(e,"j",function(){return W}),o.d(e,"g",function(){return V}),o.d(e,"i",function(){return q}),o.d(e,"k",function(){return Z}),o.d(e,"d",function(){return X}),o.d(e,"l",function(){return G}),o.d(e,"h",function(){return J}),o.d(e,"a",function(){return Y}),o.d(e,"c",function(){return Q});const A=(t,e=0)=>i()(t).withConfig({componentId:"atffc4-0"})(["fill: currentColor;width: 20px;height: 20px;box-sizing: border-box;",""],e?`padding: ${e}px;`:""),M=A(d),B=A(p),K=A(f),D=A(g),P=A(y),_=A(x),F=A(S),L=A(w,1),N=A(E),U=A(T),H=A(R),z={type:"style",name:"bold",Icon:B,style:a.k.BOLD,tooltipTranslation:Object(s.e)("postCreation.toolbar.bold")},$={type:"style",name:"italics",Icon:P,style:a.k.ITALIC,tooltipTranslation:Object(s.e)("postCreation.toolbar.italics")},W={type:"style",name:"strikethrough",Icon:N,style:a.k.STRIKETHROUGH,tooltipTranslation:Object(s.e)("postCreation.toolbar.strikethrough")},V={type:"style",name:"inline_code",Icon:_,style:a.k.MONOSPACE,tooltipTranslation:Object(s.e)("postCreation.toolbar.monospace")},q={type:"style",name:"spoiler",Icon:L,style:a.k.SPOILER,tooltipTranslation:Object(s.e)("postCreation.toolbar.spoiler")},Z={type:"style",name:"superscript",Icon:U,style:a.k.SUPERSCRIPT,tooltipTranslation:Object(s.e)("postCreation.toolbar.superscript")},X={type:"block",name:"heading",Icon:D,block:a.b.H1,tooltipTranslation:Object(s.e)("postCreation.toolbar.heading")},G={type:"block",name:"unordered_list",Icon:H,block:a.i.UNORDERED,tooltipTranslation:Object(s.e)("postCreation.toolbar.unorderedList")},J={type:"block",name:"ordered_list",Icon:F,block:a.i.ORDERED,tooltipTranslation:Object(s.e)("postCreation.toolbar.orderedList")},Y={type:"block",name:"block_quote",Icon:M,block:a.e,tooltipTranslation:Object(s.e)("postCreation.toolbar.blockQuote")},Q={type:"block",name:"code_block",Icon:K,block:a.f,tooltipTranslation:Object(s.e)("postCreation.toolbar.codeBlock")}},"./src/reddit/components/RichTextEditor/Toolbar/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/draft-js/lib/Draft.js"),i=o("./node_modules/react/index.js"),s=o("./bundled-modules/styled-components/styled-components.min.js"),a=o.n(s),c=o("./src/app/strings/index.ts"),l=o("./src/reddit/constants/componentSizes.ts"),d=o("./src/reddit/constants/zIndex.ts"),u=o("./src/reddit/icons/svgs/FormattingHyperlink/index.tsx"),p=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),h=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});var f=a()(t=>h("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,h("path",{d:"M17,2H3A1,1,0,0,0,2,3V17a1,1,0,0,0,1,1H17a1,1,0,0,0,1-1V3A1,1,0,0,0,17,2ZM4,6H9V9.8H4Zm7,0h5V9.8H11ZM4,11.8H9V16H4ZM11,16V11.8h5V16Z"}))).withConfig({componentId:"pwqm20-0"})(["fill: ",";"],t=>Object(p.c)(t).actionIcon),m=o("./src/reddit/components/RichTextEditor/editorStateTransforms.ts"),g=o("./src/reddit/components/RichTextEditor/helpers/controlsState.ts"),b=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),y=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),v=o("./src/reddit/components/RichTextEditor/constants/editorChangeTypes.ts"),x=o("./src/reddit/components/RichTextEditor/helpers/common.ts"),C=o("./src/reddit/components/RichTextEditor/table/helpers.ts");var S=(t,e,o)=>{if(Object(y.v)(r.RichUtils.getCurrentBlockType(t)))return t;const n=t.getCurrentContent(),i=t.getSelection().getEndKey(),s=Object(C.l)(e,o),a=Object(x.f)(n,i,s,x.a.after,!0),c=r.EditorState.push(t,a,v.d);return r.EditorState.forceSelection(c,r.SelectionState.createEmpty(s[0].getKey()))},O=o("./src/reddit/components/RichTextEditor/Toolbar/FormatterButton/index.tsx"),w=o("./src/reddit/components/RichTextEditor/Toolbar/formatterConfigs.ts"),k=o("./src/reddit/components/RichTextEditor/Toolbar/MarkdownButton/index.tsx"),E=o("./src/lib/constants/index.ts"),j=o("./src/reddit/icons/svgs/ImagePost/index.tsx"),T=o("./src/reddit/icons/svgs/Video/index.tsx"),I=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const R=Object(c.e)("postCreation.toolbar.image"),A=Object(c.e)("postCreation.toolbar.video"),M="\n  fill: currentColor;\n  width: 20px;\n  height: 20px;\n  box-sizing: border-box;\n",B=a()(j.a).withConfig({componentId:"s8xi4qo-0"})(["",""],M),K=a()(T.a).withConfig({componentId:"s8xi4qo-1"})(["",""],M),D=a.a.input.withConfig({componentId:"s8xi4qo-2"})(["display: none;"]);class P extends i.Component{constructor(){super(...arguments),this.hiddenInputEl=null,this.onFileInputChange=(t=>{t.stopPropagation();const e=this.hiddenInputEl;e.files&&e.files.length&&(this.props.onFilesInput(Array.from(e.files)),e.value="")}),this.onButtonClick=(()=>{this.hiddenInputEl&&this.hiddenInputEl.click(),this.props.onClick()}),this.onHiddenInputClick=(t=>t.stopPropagation())}render(){var t=this.props;const e=t.controlsState,o=t.destSubreddit,n=t.language,r="image"===t.type,i=e.blocks[y.a];let s=!0;if(o&&o.allowedPostTypes){var a=o.allowedPostTypes;const t=a.images,e=a.videos;s=r?t:e}return I(O.a,{Icon:r?B:K,active:i.isActive,enabled:i.isEnabled&&s,tooltip:(r?R:A)(n),onClick:this.onButtonClick},void 0,I(D,{multiple:!0,innerRef:t=>this.hiddenInputEl=t,onChange:this.onFileInputChange,onClick:this.onHiddenInputClick,type:"file",accept:Array.from(r?E.a:E.b).join()}))}}o.d(e,"c",function(){return z}),o.d(e,"g",function(){return V}),o.d(e,"f",function(){return q}),o.d(e,"h",function(){return Z}),o.d(e,"e",function(){return X}),o.d(e,"a",function(){return G}),o.d(e,"d",function(){return J}),o.d(e,"b",function(){return Y});var _=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const F=Object(c.e)("postCreation.toolbar.table"),L=Object(c.e)("postCreation.toolbar.link"),N=Object(w.f)(u.a),U=Object(w.f)(f),H=a.a.div.withConfig({componentId:"s16eky3e-0"})(["display: flex;align-items: center;background-color: ",";border-radius: 3px 3px 0 0;box-sizing: border-box;height: ","px;padding: 4px;border-radius: 4px;",'// Don\'t use "position: sticky" for MS Edge\n@supports (-ms-ime-align: auto) {position: static;}// This is needed for removing tooltip delay when user moves mouse pointer\n// from one toolbar icon to other\n&:hover '," "," {opacity: 1;}flex-wrap: wrap;"],t=>Object(p.c)(t).field,l.D,t=>t.isSticky?`\n        position: sticky;\n        top: ${l.j}px;\n        z-index: ${d.g-2};`:"",b.b,b.a),z=a.a.div.withConfig({componentId:"s16eky3e-1"})(["box-sizing: border-box;height: 14px;width: 1px;margin: 0 6px;border-right: 1px solid ",";"],t=>Object(p.c)(t).line),$=a.a.div.withConfig({componentId:"s16eky3e-2"})(["display: flex;flex-grow: 1;"]),W=(t,e,o,n,i,s)=>{const a=t.name,c=t.Icon,l=(0,t.tooltipTranslation)(s);if("style"===t.type){const r=t.style;return _(O.a,{Icon:c,active:e.styles[r].isActive,enabled:e.styles[r].isEnabled,tooltip:l,onClick:()=>{const t=Object(m.c)(r,o);n(t),i(a,((t,e)=>t.getCurrentInlineStyle().contains(e))(t,r))}},a)}{const s=t.block;return _(O.a,{Icon:c,active:e.blocks[s].isActive,enabled:e.blocks[s].isEnabled,tooltip:l,onClick:()=>{const t=Object(m.i)(s,o);n(t),i(a,((t,e)=>r.RichUtils.getCurrentBlockType(t)===e)(t,s))}},a)}},V=(t,e,o,n,r,i)=>t.map(t=>W(t,e,o,n,r,i)),q=[w.b,w.e],Z=[w.j,w.g,w.k,w.i],X=[w.d,w.l,w.h,w.a,w.c],G=t=>_(O.a,{Icon:N,active:t.controlsState.link.isActive,enabled:t.controlsState.link.isEnabled,tooltip:L(t.language),onClick:()=>{t.onLinkButtonClick(),t.trackOnClick("link",!0)}}),J=t=>_(O.a,{Icon:U,active:t.controlsState.blocks[y.l].isActive,enabled:t.controlsState.blocks[y.l].isEnabled,tooltip:F(t.language),onClick:()=>{t.onChange(S(t.editorState,3,2)),t.trackOnClick("table",!0)}}),Y=t=>{const e=t.className;var o=t.allowMedia;const n=void 0!==o&&o,r=t.destSubreddit,i=t.editorState,s=t.isOverlay,a=t.language,c=t.onChange,l=t.onFilesSelect,d=t.readOnly,u=t.trackOnClick,p=t.onLinkButtonClick,h=t.onMarkdownButtonClick,f=Object(g.a)(i);return d&&Object(g.b)(f),_(H,{className:e,isSticky:!s},void 0,V(q,f,i,c,u,a),_(G,{language:a,controlsState:f,trackOnClick:u,onLinkButtonClick:p}),V(Z,f,i,c,u,a),_(z,{}),V(X,f,i,c,u,a),_(z,{}),_(J,{language:a,controlsState:f,editorState:i,trackOnClick:u,onChange:c}),n&&_(P,{destSubreddit:r,language:a,controlsState:f,onClick:()=>u("image_upload"),onFilesInput:l,type:"image"}),n&&_(P,{destSubreddit:r,language:a,controlsState:f,onClick:()=>u("video_upload"),onFilesInput:l,type:"video"}),_($,{}),_(k.a,{language:a,onClick:h}))}},"./src/reddit/components/RichTextEditor/Tooltip/index.tsx":function(t,e,o){"use strict";o.d(e,"a",function(){return p});var n,r=o("./node_modules/react/index.js"),i=o("./bundled-modules/styled-components/styled-components.min.js"),s=o.n(i),a=o("./src/reddit/constants/zIndex.ts"),c=o("./src/reddit/helpers/dom/index.ts"),l=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),d=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const u=s.a.div.withConfig({componentId:"ntpebu-0"})(["color: ",";position: absolute;z-index: ",";"],t=>Object(l.c)(t).bodyText,a.t);class p extends r.Component{constructor(t){super(t),this.containerRef=null,this.updateContainerRef=(t=>this.containerRef=t),this.updatePosition=(t=>{let e=null;t&&this.containerRef&&(e=function(t,e){if(e){const o=e.getBoundingClientRect();return{left:t.left-o.left+e.scrollLeft,top:t.top-o.top+e.scrollTop}}{const e=document.documentElement,o=window.pageYOffset||e.scrollTop,n=window.pageXOffset||e.scrollLeft;return{left:t.left+n,top:t.top+o}}}(t,Object(c.e)(this.containerRef))),this.setState({offsets:e})}),this.state={offsets:null}}componentDidUpdate(t,e){t.rect!==this.props.rect&&this.updatePosition(this.props.rect)}componentDidMount(){this.updatePosition(this.props.rect),this.props.onSetPositionUpdater&&this.props.onSetPositionUpdater(this.updatePosition)}componentWillUnmount(){this.props.onSetPositionUpdater&&this.props.onSetPositionUpdater(null)}render(){const t=this.state.offsets;return d(u,{className:this.props.className,style:t||{},innerRef:this.updateContainerRef},void 0,t?this.props.children:null)}}},"./src/reddit/components/RichTextEditor/constants/draftEditorCommands.ts":function(t,e,o){"use strict";o.d(e,"c",function(){return n}),o.d(e,"e",function(){return r}),o.d(e,"g",function(){return i}),o.d(e,"h",function(){return s}),o.d(e,"b",function(){return a}),o.d(e,"d",function(){return c}),o.d(e,"f",function(){return l}),o.d(e,"a",function(){return d});const n="bold",r="italic",i="underline",s="undo",a="backspace",c="delete",l="split-block",d="adjust-depth"},"./src/reddit/components/RichTextEditor/constants/editorChangeTypes.ts":function(t,e,o){"use strict";o.d(e,"d",function(){return n}),o.d(e,"c",function(){return r}),o.d(e,"a",function(){return i}),o.d(e,"b",function(){return s}),o.d(e,"e",function(){return a});const n="insert-fragment",r="insert-characters",i="change-block-data",s="change-block-type",a="remove-range"},"./src/reddit/components/RichTextEditor/editorStateTransforms.ts":function(t,e,o){"use strict";o.d(e,"c",function(){return d}),o.d(e,"i",function(){return u}),o.d(e,"b",function(){return f}),o.d(e,"f",function(){return m}),o.d(e,"h",function(){return g}),o.d(e,"g",function(){return b}),o.d(e,"d",function(){return y}),o.d(e,"e",function(){return v}),o.d(e,"a",function(){return x});var n=o("./node_modules/draft-js/lib/Draft.js"),r=o("./node_modules/immutable/dist/immutable.js"),i=o("./src/reddit/components/RichTextEditor/constants/draftEditorCommands.ts"),s=o("./src/reddit/components/RichTextEditor/constants/editorChangeTypes.ts"),a=o("./src/reddit/components/RichTextEditor/helpers/modifiers.ts"),c=o("./src/reddit/components/RichTextEditor/helpers/styles.ts"),l=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");const d=(t,e)=>{return e.getSelection().isCollapsed()?Object(c.a)(t,e):Object(c.b)(t,e)},u=(t,e)=>{const o=e.getCurrentContent(),r=e.getSelection(),i=r.getEndKey(),a=n.RichUtils.getCurrentBlockType(e)===t?l.n:t;let d=e,u=n.Modifier.setBlockType(o,r,a);const p=o.getBlockForKey(i).getLength();if(Object(l.r)(a)||Object(l.q)(a)){const t=n.SelectionState.createEmpty(r.getStartKey()).merge({focusKey:r.getEndKey(),focusOffset:p});d=Object(c.c)(d),u=((t,e)=>Object.keys(l.k).reduce((t,o)=>n.Modifier.removeInlineStyle(t,e,l.k[o]),t))(u,t)}if(Object(l.q)(a)||Object(l.p)(a)){const t=u.getBlockAfter(i);if(!t||t.getType()!==a&&t.getType()!==l.n){const t=n.SelectionState.createEmpty(i).merge({anchorOffset:p,focusOffset:p});u=n.Modifier.splitBlock(u,t),u=n.Modifier.setBlockType(u,u.getSelectionAfter(),l.n)}}return u=u.merge({selectionAfter:r}),n.EditorState.push(d,u,s.b)},p=(t,e)=>{const o=n.Modifier.setBlockType(t,e,l.n);return n.Modifier.replaceText(o,e,"",Object(r.OrderedSet)([]))},h=(t,e)=>n.EditorState.forceSelection(t,n.SelectionState.createEmpty(e)),f=t=>{const e=t.getCurrentContent(),o=t.getSelection(),i=a.d(e,o),c=i.getBlockAfter(o.getEndKey()),d=n.SelectionState.createEmpty(c.getKey()),u=n.Modifier.replaceText(n.Modifier.setBlockType(i,d,l.n),d,"",Object(r.OrderedSet)([])),p=n.EditorState.push(t,u,s.c);return h(p,c.getKey())},m=t=>{const e=t.getCurrentContent(),o=t.getSelection(),r=e.getBlockForKey(o.getEndKey()),s=r.set("depth",Math.max(r.getDepth()-1,0)),a=e.merge({blockMap:e.getBlockMap().merge({[r.getKey()]:s})});return n.EditorState.push(t,a,i.a)},g=t=>{const e=t.getCurrentContent(),o=t.getSelection(),r=e.getBlockForKey(o.getEndKey()).getKey(),i=n.EditorState.push(t,p(e,o),s.b);return h(i,r)},b=t=>{const e=t.getCurrentContent(),o=t.getSelection(),r=e.getBlockForKey(o.getEndKey()),i=r.getKey(),a=e.getBlockBefore(i).getKey(),c=n.SelectionState.createEmpty(i).merge({focusOffset:r.getText().length}),l=n.EditorState.push(t,p(((t,e)=>{const o=t.getBlockMap().remove(e);return t.merge({blockMap:o})})(e,a),c),s.b);return h(l,i)},y=t=>{const e=a.d(t.getCurrentContent(),t.getSelection());return n.EditorState.push(t,e,i.f)},v=t=>{const e=a.a(t.getCurrentContent(),t.getSelection(),"\n");return n.EditorState.push(t,e,s.c)},x=t=>{const e=t.getSelection(),o=a.a(t.getCurrentContent(),e," ");return n.EditorState.push(t,o,s.c)}},"./src/reddit/components/RichTextEditor/entity/applyEntityToContentBlock.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o("./node_modules/draft-js/lib/Draft.js");function r(t,e,o,r){let i=t.getCharacterList();return i=i.withMutations(t=>{for(let i=e;i<o;i++)t.set(i,n.CharacterMetadata.applyEntity(t.get(i),r))}),t.set("characterList",i)}},"./src/reddit/components/RichTextEditor/entity/cloneEntitiesInFragment.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return i}),o.d(e,"b",function(){return s});var n=o("./src/reddit/components/RichTextEditor/entity/applyEntityToContentBlock.ts"),r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function i(t,e,o,r,i){const s=t.createEntity(o.getType(),o.getMutability(),o.getData()),a=t.getLastCreatedEntityKey();return[s,Object(n.a)(e,r,i,a)]}function s(t,e,o=!1){const n=new Map;let s=e,a=t;return e.forEach((t,e)=>{t&&e&&t.findEntityRanges(t=>!!t.getEntity(),(o,r)=>{const i=t.getEntityAt(o),s=n.get(i)||[];s.push({start:o,end:r,blockKey:e}),n.set(i,s)})}),n.forEach((e,n)=>{const c=t.getEntity(n);(o?e.slice(1):e).forEach(({start:t,end:e,blockKey:o})=>{const n=s.get(o);var l=i(a,n,c,t,e),d=r(l,2);const u=d[0],p=d[1];a=u,s=s.set(o,p)})}),[a,s]}},"./src/reddit/components/RichTextEditor/entity/entityTypes.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"b",function(){return r});const n={LINK:"LINK",SUBREDDIT_LINK:"SUBREDDIT_LINK",USER_LINK:"USER_LINK",POST_LINK:"POST_LINK",COMMENT_LINK:"COMMENT_LINK"},r=(t,e)=>{const o=t&&e.getEntity(t);return!!o&&(t=>t in n)(o.getType())}},"./src/reddit/components/RichTextEditor/entity/getSelectionEntityInfo.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o("./node_modules/draft-js/lib/Draft.js");function r(t,e){const o=e.getFocusKey();if(o!==e.getAnchorKey())return;const r=t.getBlockForKey(o),i=e.getStartOffset(),s=e.getEndOffset(),a=r.getEntityAt(s)||(s>0?r.getEntityAt(s-1):null);if(!a)return;let c,l;if(r.findEntityRanges(t=>t.getEntity()===a,(t,e)=>{t<=i&&s<=e&&(c=t,l=e)}),"number"!=typeof c||"number"!=typeof l)return;const d=r.getText().slice(c,l);return{entitySelection:n.SelectionState.createEmpty(o).merge({anchorOffset:c,focusOffset:l}),entityKey:a,entityText:d}}},"./src/reddit/components/RichTextEditor/entity/link/helpers.tsx":function(t,e,o){"use strict";o.d(e,"a",function(){return p}),o.d(e,"d",function(){return h}),o.d(e,"f",function(){return f}),o.d(e,"b",function(){return m}),o.d(e,"c",function(){return g}),o.d(e,"h",function(){return b}),o.d(e,"g",function(){return y}),o.d(e,"e",function(){return v});var n=o("./node_modules/draft-js/lib/Draft.js"),r=o("./src/lib/linkMatchers/index.ts"),i=o("./src/lib/linkMatchers/customLinks.ts"),s=o("./src/lib/memoizeByReference/index.ts"),a=o("./src/reddit/components/RichTextEditor/spoiler/helpers.ts"),c=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),l=o("./src/reddit/components/RichTextEditor/entity/entityTypes.ts"),d=o("./src/reddit/components/RichTextEditor/entity/getSelectionEntityInfo.ts");const u=t=>`/r/${t}`;function p(t,e,o){t.findEntityRanges(t=>{const e=t.getEntity();if(!e)return!1;const n=o.getEntity(e).getType();return n===l.a.LINK||n===l.a.SUBREDDIT_LINK||n===l.a.USER_LINK},e)}const h=Object(s.a)(function(t){const e=t.getCurrentContent(),o=t.getSelection();if(!o.isCollapsed())return;if(Object(c.q)(e.getBlockForKey(o.getStartKey()).getType()))return;const i=o.getFocusKey(),s=e.getBlockForKey(i),l=o.getFocusOffset(),d=s.getText(),u=d.lastIndexOf(" ",l-1)+1,p=d.slice(u,l);if(!p)return;const h=r.c.match(p);if(!h)return;const f=h[h.length-1],m=u+f.index,g=u+f.lastIndex;let b=-1;if(s.findEntityRanges(t=>!!t.getEntity(),(t,e)=>{t<l&&(b=e)}),b>=m)return;return s.getCharacterList().slice(m,g).find(a.b)?void 0:{selection:n.SelectionState.createEmpty(i).merge({anchorOffset:m,focusOffset:g}),url:f.url}});function f(t,e,o){const r=t.getSelection();let i=t.getCurrentContent();const s=(i=i.createEntity(l.a.LINK,"MUTABLE",{url:o})).getLastCreatedEntityKey();return i=(i=n.Modifier.applyEntity(i,e,s)).merge({selectionAfter:r}),n.EditorState.push(t,i,"apply-entity")}const m=Object(s.a)(function(t){const e=t.getCurrentContent(),o=Object(d.a)(e,t.getSelection());if(!o)return;const n=e.getEntity(o.entityKey);if(n.getType()!==l.a.LINK)return;const r=n.getData().url;return Object.assign({url:r},o)});const g=Object(s.a)(function(t){const e=t.getCurrentContent(),o=t.getSelection(),n=Object(d.a)(e,o);if(!n)return;const r=o.getFocusOffset(),s=e.getEntity(n.entityKey),a=("/"===n.entityText[0]?"/":"")+i.e;if(s.getType()!==l.a.SUBREDDIT_LINK||!n.entityText.startsWith(a)||r-n.entitySelection.getStartOffset()<a.length)return;const c=n.entityText.slice(a.length);return Object.assign({subredditName:c},n)});function b(t,e,o,r){let i="apply-entity",s=t.getCurrentContent(),a=t;const c=Object(d.a)(s,e);if(o)if(c){s.getEntity(c.entityKey).getData().url!==o&&(s=s.mergeEntityData(c.entityKey,{url:o})),void 0!==r&&c.entityText!==r&&(s=n.Modifier.replaceText(s,c.entitySelection,r,void 0,c.entityKey),i="insert-characters")}else{if(void 0===r)throw new Error("New link display text must be provided!");const t=(s=s.createEntity(l.a.LINK,"MUTABLE",{url:o})).getLastCreatedEntityKey();s=n.Modifier.replaceText(s,e,r,void 0,t),i="insert-characters"}else s=(s=n.Modifier.applyEntity(s,e,"")).merge({selectionAfter:t.getSelection()});return s===t.getCurrentContent()?t:a=n.EditorState.push(a,s,i)}function y(t,e){const o=g(t);if(!o)return t;const r=`${"/"===o.entityText[0]?"/":""}${i.e}${e}`,s=u(e),a=o.entitySelection.getStartOffset()+r.length;let c=b(t,o.entitySelection,s,r);return c=n.EditorState.forceSelection(c,o.entitySelection.merge({anchorOffset:a,focusOffset:a}))}function v(t,e){if(e.getStartKey()!==e.getEndKey())return!1;const o=t.getBlockForKey(e.getEndKey()).getType();if(Object(c.q)(o)||Object(c.t)(o))return!1;const n=Object(d.a)(t,e);if(n){if(t.getEntity(n.entityKey).getType()!==l.a.LINK)return!1}return!0}},"./src/reddit/components/RichTextEditor/helpers/common.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"g",function(){return a}),o.d(e,"e",function(){return c}),o.d(e,"c",function(){return l}),o.d(e,"f",function(){return d}),o.d(e,"b",function(){return u}),o.d(e,"h",function(){return p}),o.d(e,"d",function(){return h});var n,r=o("./node_modules/draft-js/lib/Draft.js"),i=o("./node_modules/immutable/dist/immutable.js"),s=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");!function(t){t.before="before",t.after="after"}(n||(n={}));const a=(t,e)=>new r.ContentBlock(Object.assign({key:t||Object(r.genKey)()},e?{text:e,characterList:Object(i.List)(Object(i.Repeat)(r.CharacterMetadata.create(),e.length))}:{})),c=t=>t.props.children,l=t=>c(t).props.block,d=(t,e,o,i=n.after,c=!1,l=!1)=>{const d=[];let p=-1;if(t.getBlockMap().forEach((t,r)=>{i===n.after&&d.push(t),r===e&&(d.push(...o),p=d.length-1),i===n.before&&d.push(t)}),p>=0){if(c){const t=d[p+1];t&&t.getType()===s.n||d.splice(p+1,0,a())}if(l){const t=p-o.length,e=d[t];e&&e.getType()===s.n||d.splice(t+1,0,a())}}return t.merge({blockMap:r.BlockMapBuilder.createFromArray(d),selectionAfter:u(o[o.length-1],!1,!0)})},u=(t,e=!1,o=!1)=>{let n=r.SelectionState.createEmpty(t.getKey()).merge({hasFocus:o});return e&&(n=n.merge({anchorOffset:t.getLength(),focusOffset:t.getLength()})),n},p=(t,e)=>{let o=t.getBlockBefore(e),n=t.getBlockMap();return n.get(e)?(n=n.size>1?n.remove(e):n.set(e,a(e)),o=o||n.first(),t.merge({blockMap:n,selectionAfter:u(o,!0)})):t},h=(t,e)=>e.querySelector(`[data-block][data-offset-key="${t}-0-0"]`)},"./src/reddit/components/RichTextEditor/helpers/controlsState.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return h}),o.d(e,"b",function(){return f});var n=o("./node_modules/lodash/forEach.js"),r=o.n(n),i=o("./src/lib/forEachGroup/index.ts"),s=o("./src/lib/memoizeByReference/index.ts"),a=o("./src/reddit/components/RichTextEditor/entity/link/helpers.tsx"),c=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),l=o("./src/reddit/components/RichTextEditor/table/helpers.ts"),d=o("./src/reddit/components/RichTextEditor/helpers/forEachBlock.ts"),u=o("./src/reddit/components/RichTextEditor/helpers/styles.ts");const p=t=>{const e={};return r()(c.b,o=>e[o]={isActive:!1,isEnabled:t}),e},h=Object(s.a)(t=>{const e=t.getCurrentContent(),o=t.getSelection();return{link:{isActive:!1,isEnabled:Object(a.e)(e,o)},blocks:(t=>{const e=t.getCurrentContent(),o=t.getSelection();let n=p(!0),i=null;if(o.isCollapsed())i=e.getBlockForKey(o.getEndKey()).getType();else{let t=null;Object(d.a)(e,o,(e,o)=>{const r=e.getType();return Object(c.t)(r)?(n=p(!1),!1):(null===t&&(t=r),t!==r?(t=null,!1):void 0)}),i=t}return null!==i&&((Object(c.v)(i)||Object(c.t)(i))&&r()(n,t=>{t.isEnabled=!1}),n[i].isActive=!0),n})(t),styles:(t=>{const e=t.getCurrentContent(),o=t.getSelection(),n={};r()(c.k,t=>n[t]={isActive:!1,isEnabled:!1});const s=new Set(Object.keys(n));if(s.delete(c.k.HIGHLIGHT),o.isCollapsed()){const r=e.getBlockForKey(o.getEndKey()),i=r.getType();Object(c.q)(i)||Object(c.r)(i)||Object(c.t)(i)||s.forEach(t=>n[t].isEnabled=!0),t.getCurrentInlineStyle().forEach(t=>{t&&n[t]&&(n[t].isActive=!0)}),Object(l.i)(r)&&(n[c.k.BOLD]={isEnabled:!1,isActive:!1})}else Object(u.e)(e,o).forEach(t=>{s.delete(t),n[t]&&(n[t].isActive=!0,n[t].isEnabled=!0)}),Object(d.a)(e,o,(t,r)=>{if(!s.size)return!1;const a=o.getStartKey()===r?o.getStartOffset():0,l=o.getEndKey()===r?o.getEndOffset():t.getLength(),d=t.getType(),p=t.getCharacterList();Object(c.q)(d)||Object(c.r)(d)||Object(c.t)(d)||Object(i.a)(p,{start:a,end:l},(o,r,i,a)=>{const c=o.getStyle(),l=o.getEntity(),d=l?e.getEntity(l):null;if(s.forEach(e=>{const o=!n[e].isActive,r=Object(u.f)(c,t,d,e,o);r&&r!==c&&(n[e].isEnabled=!0,s.delete(e))}),!s.size)return!1})});return n})(t)}}),f=t=>{r()(t.blocks,t=>{t.isEnabled=!1}),r()(t.styles,t=>{t.isEnabled=!1}),t.link.isEnabled=!1}},"./src/reddit/components/RichTextEditor/helpers/forEachBlock.ts":function(t,e,o){"use strict";function n(t,e,o){const n=e.getStartKey(),r=e.getEndKey();if(n===r)return void o(t.getBlockForKey(n),n);let i=!1;t.getBlockMap().forEach((t,e)=>{if(e===n&&(i=!0),!i||!t||!e)return;const s=o(t,e);return e!==r&&s})}o.d(e,"a",function(){return n})},"./src/reddit/components/RichTextEditor/helpers/modifiers.ts":function(t,e,o){"use strict";var n=o("./node_modules/draft-js/lib/Draft.js"),r=o("./src/reddit/components/RichTextEditor/entity/cloneEntitiesInFragment.ts"),i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function s(t,e){const o=e.getStartKey();if(o!==e.getEndKey())return;const n=t.getBlockForKey(o),s=e.getStartOffset(),a=e.getEndOffset(),c=s>0?n.getEntityAt(s-1):null,l=n.getEntityAt(a);if(!c||!l||c!==l)return;const d=t.getEntity(l),u=n.getCharacterList().toSeq().skip(a).takeWhile(t=>!!t&&t.getEntity()===l).count();var p=Object(r.a)(t,n,d,a,a+u),h=i(p,2);const f=h[0],m=h[1];return f.merge({blockMap:f.getBlockMap().set(n.getKey(),m)})}function a(t,e,o){const r=s(t,e)||t;return n.Modifier.replaceWithFragment(r,e,o)}function c(t,e,o,r,i){let a=t;return-1!==o.indexOf("\n")&&(a=s(t,e)||a),n.Modifier.replaceText(a,e,o,r,i)}function l(t,e,o,r,i){let a=t;return-1!==o.indexOf("\n")&&(a=s(t,e)||a),n.Modifier.insertText(a,e,o,r,i)}function d(t,e){const o=s(t,e)||t;return n.Modifier.splitBlock(o,e)}o.d(e,"c",function(){return a}),o.d(e,"b",function(){return c}),o.d(e,"a",function(){return l}),o.d(e,"d",function(){return d})},"./src/reddit/components/RichTextEditor/helpers/sliceContiguousBlocks.ts":function(t,e,o){"use strict";var n=o("./node_modules/lodash/forEach.js"),r=o.n(n);e.a=((t,e)=>{const o=t.getBlocksAsArray(),n=e.getKey(),i=e.getType();let s=null,a=null,c=!1;if(r()(o,(t,e)=>{if(c||t.getKey()!==n||(c=!0),t.getType()===i)null===s&&(s=e),a=e;else{if(c)return!1;s=null,a=null}}),c)return a=a||0,{start:s=s||0,blocks:o.slice(s,a+1)}})},"./src/reddit/components/RichTextEditor/helpers/styles.ts":function(t,e,o){"use strict";o.d(e,"f",function(){return u}),o.d(e,"e",function(){return p}),o.d(e,"b",function(){return h}),o.d(e,"a",function(){return f}),o.d(e,"c",function(){return m}),o.d(e,"d",function(){return g});var n=o("./node_modules/draft-js/lib/Draft.js"),r=o("./node_modules/immutable/dist/immutable.js"),i=o("./src/lib/forEachGroup/index.ts"),s=o("./src/reddit/components/RichTextEditor/entity/entityTypes.ts"),a=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts"),c=o("./src/reddit/components/RichTextEditor/table/helpers.ts"),l=o("./src/reddit/components/RichTextEditor/helpers/forEachBlock.ts");const d=Object(r.OrderedSet)([]),u=(t,e,o,n,i=!0)=>{const l=e.getType();if(Object(a.q)(l)||Object(a.r)(l)||Object(a.t)(l))return;if(n===a.k.BOLD&&Object(c.i)(e))return;const u=o?o.getType():null;return u!==s.a.SUBREDDIT_LINK&&u!==s.a.USER_LINK||n===a.k.SPOILER||n===a.k.MONOSPACE?n===a.k.MONOSPACE||n===a.k.SPOILER?i?Object(r.OrderedSet)([n]):d:(t.has(a.k.MONOSPACE)||t.has(a.k.SPOILER))&&i?Object(r.OrderedSet)([n]):!i||n!==a.k.SUPERSCRIPT&&n!==a.k.SUBSCRIPT?i?t.add(n):t.has(n)?t.delete(n):void 0:t.delete(a.k.SUBSCRIPT).delete(a.k.SUPERSCRIPT).add(n):void 0},p=(t,e)=>{let o=null,n=!0;return Object(l.a)(t,e,(r,l)=>{const d=r.getType(),u=Object(c.i)(r);if(u||(n=!1),Object(a.q)(d)||Object(a.r)(d)||Object(a.t)(d))return!1;const p=e.getStartKey()===l?e.getStartOffset():0,h=e.getEndKey()===l?e.getEndOffset():r.getLength(),f=r.getCharacterList();Object(i.a)(f,{start:p,end:h},e=>{const n=e.getEntity();if(n&&t.getEntity(n).getType()===s.a.SUBREDDIT_LINK)return;let r=e.getStyle();return u&&(r=r.add(a.k.BOLD)),null===o?o=r.asMutable():o.intersect(r),!(o&&!o.size)&&void 0})}),null===o?[]:(n&&o.delete(a.k.BOLD),o.toJS())},h=(t,e)=>{const o=e.getCurrentContent(),r=e.getSelection();let s=o.getBlockMap();const c=-1===p(o,r).indexOf(t);Object(l.a)(o,r,(e,l)=>{if(!e||!l)return!1;const d=r.getStartKey()===l?r.getStartOffset():0,p=r.getEndKey()===l?r.getEndOffset():e.getLength(),h=e.getCharacterList(),f=h.withMutations(r=>{Object(i.a)(h,{start:d,end:p},(i,s,l,d)=>{const p=i.getStyle(),h=i.getEntity(),f=h?o.getEntity(h):null,m=u(p,e,f,t,c);if(m){const t=((t,e)=>n.CharacterMetadata.create({style:e,entity:e.has(a.k.SPOILER)?null:t.getEntity()}))(i,m);for(let e=l;e<d;e++)r.set(e,t)}})});if(f!==h){const t=e.set("characterList",f);s=s.set(l,t)}});const d=o.merge({blockMap:s,selectionAfter:r});return n.EditorState.push(e,d,"change-inline-style")},f=(t,e)=>{const o=e.getCurrentContent(),r=e.getSelection(),i=o.getBlockForKey(r.getStartKey()),s=i.getEntityAt(r.getStartOffset()),a=s?o.getEntity(s):null,c=e.getCurrentInlineStyle(),l=u(c,i,a,t,!c.has(t));let d=e;return l&&(d=n.EditorState.setInlineStyleOverride(d,l)),d},m=t=>n.EditorState.setInlineStyleOverride(t,d),g=(t,e)=>{const o=t.getSelection(),n=e.getSelection();return o.getStartOffset()>0||o.getFocusKey()===n.getFocusKey()||t.getCurrentInlineStyle().isEmpty()?t:m(t)}},"./src/reddit/components/RichTextEditor/index.tsx":function(t,e,o){"use strict";var n=o("./node_modules/draft-js/lib/Draft.js"),r=(o("./node_modules/draft-js/dist/Draft.css"),o("./node_modules/lodash/filter.js")),i=o.n(r),s=o("./node_modules/react/index.js"),a=o.n(s),c=o("./node_modules/react-redux/es/index.js"),l=o("./node_modules/reselect/es/index.js"),d=o("./node_modules/shallowequal/index.js"),u=o.n(d),p=o("./bundled-modules/styled-components/styled-components.min.js"),h=o.n(p),f=o("./src/app/strings/index.ts"),m=o("./src/lib/fastdom/index.ts"),g=o("./src/lib/logs/console.ts"),b=o("./src/telemetry/models/Media.ts"),y=o("./src/reddit/actions/postCreation/mediaUpload.ts"),v=o("./src/reddit/helpers/styles/mixins/fonts.tsx"),x=o("./src/reddit/helpers/trackers/postComposer.ts"),C=o("./src/reddit/models/PostCreationForm/index.ts"),S=o("./src/reddit/models/Upload/index.ts"),O=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");const w={BREAK_HEADER_ENTITY:"BREAK_HEADER_ENTITY",CONVERT_TO_LIST_ON_SPACE:"CONVERT_TO_LIST_ON_SPACE",EXEC_TABLE_ON_ENTER_HANDLER:"EXEC_TABLE_ON_ENTER_HANDLER",INSERT_LINE_BREAK:"INSERT_LINE_BREAK",LINKIFY_ON_ENTER:"LINKIFY_ON_ENTER",LINKIFY_ON_SPACE:"LINKIFY_ON_SPACE",MAKE_PLAIN_BLOCK:"MAKE_PLAIN_BLOCK",OPEN_LINK_TOOLTIP:"OPEN_LINK_TOOLTIP",REDUCE_LIST_INDENT:"REDUCE_LIST_INDENT",REMOVE_EXTRA_LIST_ITEM:"REMOVE_EXTRA_LIST_ITEM",RESET_CURRENT_AND_PREVIOUS_BLOCKS:"RESET_CURRENT_AND_PREVIOUS_BLOCKS",SUBMIT:"SUBMIT"};const k=t=>{const e=t.getCurrentContent().getBlockMap();if(e.size>2||(t=>!!t.reduce((t=0,e)=>t+e.getLength(),0))(e)||(t=>!!t.find(t=>Object(O.o)(t.getType())))(e))return null;{const o=t.getSelection();if(o.isCollapsed()&&o.getFocusKey()===e.first().getKey())return o.getFocusKey()}},E=t=>{const e=t.getCharacterList().map(t=>n.CharacterMetadata.create({entity:t.getEntity()}));return t.set("characterList",e)};var j=o("./src/reddit/components/ConfirmUserActionModal/index.tsx"),T=o("./src/reddit/components/RichTextEditor/constants/draftEditorCommands.ts"),I=o("./node_modules/lodash/escape.js"),R=o.n(I),A=o("./src/reddit/components/RichTextEditor/media/helpers.ts"),M=o("./src/reddit/components/RichTextEditor/helpers/common.ts"),B=o("./src/reddit/components/RichTextEditor/helpers/modifiers.ts");const K=t=>{const e=t.first(),o=t.last();let r=t;if(Object(O.u)(e.getType())?r=r.set(r.keySeq().first(),e.merge({type:O.n})):Object(O.o)(e.getType())&&(r=n.BlockMapBuilder.createFromArray([Object(M.g)(),...r.toArray()])),Object(O.u)(o.getType())){const t=Object(M.g)();r=r.set(t.getKey(),t)}else if(Object(O.o)(o.getType())){const t=Object(M.g)().merge({type:O.j});r=r.set(t.getKey(),t)}return r},D=(t,e,o)=>{const n=t.getBlockForKey(e.getStartKey());if(Object(O.u)(n.getType())){const n=o.first(),r=o.set(o.keySeq().first(),Object(M.g)(n.getKey(),n.getText()).merge({type:O.j}));return B.c(t,e,r)}},P=(t,e,o)=>{const n=((t,e,o)=>{const n=e.getText();return`<span data-editor="${o}">${R()(n)}</span>`})(0,e,o.editor.getEditorKey());o.htmlParts.push(n)},_=t=>{const e=t.remaining,o=e.shift(),n=e.shift();P(0,n,t),((t,e)=>{const o=t.getText();e.textParts.push(o)})(n,t),t.processed.push(o,n)},F=t=>{const e=t.getSelection(),o=e.getFocusKey();if(o!==e.getAnchorKey())return;const r=t.getCurrentContent(),i=r.getBlockForKey(o);if(Object(O.o)(i.getType())){const t=r.getBlockAfter(i.getKey());return n.ContentState.createFromBlockArray([i,t]).getBlockMap()}},L=t=>{const e=F(t);if(e)return Object(A.c)(t,e.first().getKey())},N=t=>{const e=t.getSelection();let o=t.getCurrentContent();const r=o.getBlockForKey(e.getStartKey()),i=o.getBlockForKey(e.getEndKey());if(Object(O.t)(r.getType())||Object(O.t)(i.getType())){if(e.isCollapsed())if(Object(O.u)(r.getType()))o=B.d(o,e),o=n.Modifier.setBlockType(o,o.getSelectionAfter(),O.n);else if(Object(O.o)(r.getType())){const r=o.getBlockAfter(e.getStartKey());return n.EditorState.forceSelection(t,Object(M.b)(r,!0))}return n.EditorState.push(t,o,"split-block")}},U=(t,e)=>{const o=t.getSelection(),r=t.getCurrentContent(),i="up"===e?o.getStartKey():o.getEndKey(),s=r.getBlockForKey(i);if(!Object(O.o)(s.getType()))return;const a="up"===e?r.getBlockBefore(i):r.getBlockAfter(i);return a?n.EditorState.forceSelection(t,Object(M.b)(a,!0)):Object(A.b)(t,i,"up"===e?M.a.before:M.a.after)},H=(t,e)=>{if(t.shiftKey)return;const o=U(e,"up");return o&&t.preventDefault(),o},z=(t,e)=>{if(t.shiftKey)return;const o=U(e,"down");return o&&t.preventDefault(),o},$=(t,e)=>{const o=t.getSelection();return o.isCollapsed()&&0===o.getStartOffset()&&Object(O.o)(t.getCurrentContent().getBlockForKey(o.getStartKey()).getType())};var W=t=>{const e=t.getSelection(),o=t.getCurrentContent(),n=o.getBlockForKey(e.getStartKey());if(Object(O.o)(n.getType())){const e=o.getBlockAfter(n.getKey());if(!e||!Object(O.u)(e.getType()))return Object(A.c)(t,n.getKey(),!1)}return t},V=o("./src/reddit/actions/modal.ts"),q=o("./src/reddit/actions/upload.ts"),Z=o("./src/reddit/components/ThumbnailSelector/index.tsx"),X=o("./src/reddit/featureFlags/index.ts"),G=o("./src/reddit/helpers/dom/index.ts"),J=o("./src/reddit/helpers/getOverlayContainerById/index.ts"),Y=o("./src/reddit/helpers/media/index.ts"),Q=o("./src/reddit/selectors/activeModalId.ts"),tt=o("./src/reddit/selectors/user.ts");const et="application/x-reddit-rte-block";var ot,nt=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),rt=(ot="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,n){var r=t&&t.defaultProps,i=arguments.length-3;if(e||0===i||(e={}),e&&r)for(var s in r)void 0===e[s]&&(e[s]=r[s]);else e||(e=r||{});if(1===i)e.children=n;else if(i>1){for(var a=Array(i),c=0;c<i;c++)a[c]=arguments[c+3];e.children=a}return{$$typeof:ot,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const it=h.a.img.withConfig({componentId:"s1v175w3-0"})(["align-self: center;z-index: 0;max-width: 100%;border-radius: 4px;"]);var st=h()(t=>{const e=t.className,o=t.url;return rt("div",{className:e},void 0,rt(it,{draggable:!1,src:o}))}).withConfig({componentId:"s1v175w3-1"})(["display: flex;justify-content: center;position: relative;overflow: hidden;flex-grow: 0;border-radius: 4px;user-select: all;"]),at=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const ct=Object(f.e)("postCreation.processingVideo"),lt=Object(f.e)("postCreation.processingImage"),dt=h.a.div.withConfig({componentId:"s1hr376y-0"})(["position: absolute;left: 12px;bottom: 6px;"]);var ut=h()(t=>{const e=t.className,o=t.isImage,n=t.language;return at("div",{className:e},void 0,at(dt,{},void 0,(o?lt:ct)(n)))}).withConfig({componentId:"s1hr376y-1"})(["display: flex;flex-grow: 1;justify-content: center;overflow: hidden;border-radius: 4px;position: relative;background: ",";&:after {display: block;content: '';padding-top: ","%;height: 0;}"],t=>Object(nt.c)(t).body,56.25),pt=o("./node_modules/polished/dist/polished.es.js"),ht=o("./src/lib/formatApiError/index.ts"),ft=o("./src/reddit/components/ProgressBar/index.tsx"),mt=o("./src/reddit/constants/colors.ts"),gt=o("./src/reddit/controls/Button/index.tsx"),bt=o("./src/reddit/helpers/styles/components/index.tsx"),yt=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const vt=Object(f.e)("postCreation.cancel"),xt=Object(f.e)("postCreation.retry"),Ct=Object(f.e)("postCreation.remove"),St=Object(f.e)("postCreation.uploadStatus.uploadCanceled"),Ot=Object(f.e)("postCreation.uploadStatus.uploadFailed"),wt=Object(f.e)("postCreation.uploadStatus.success"),kt=Object(f.e)("postCreation.uploadStatus.uploading"),Et=h.a.div.withConfig({componentId:"k5okax-0"})(["width: 100%;display: flex;align-items: center;justify-content: space-between;padding-top: 10px;font-size: 13px;"]),jt="\n  padding: 1px 0;\n  margin-left: 8px;\n  line-height: 13px;\n",Tt=t=>`\n  color: ${t};\n  &[disabled] {\n    color: ${t};\n  }\n  &:hover {\n    color: ${Object(pt.f)(t,.7)};\n  }\n`,It=h()(gt.m).withConfig({componentId:"k5okax-1"})(["","",""],jt,t=>Tt(mt.a.black)),Rt=h()(gt.m).withConfig({componentId:"k5okax-2"})(["","",""],jt,t=>Tt(mt.a.warning)),At=h.a.div.withConfig({componentId:"k5okax-3"})([""]),Mt=h()(Object(bt.a)()).withConfig({componentId:"k5okax-4"})(["color: ",";flex: 1;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"],t=>t.haveError?"#f00":"#000"),Bt=h()(ft.b).withConfig({componentId:"k5okax-5"})(["background: rgba(0, 0, 0, .2);"," {background: #000;}"],ft.a),Kt=h.a.div.withConfig({componentId:"k5okax-6"})(["height: 2px;background: #f00;"]),Dt=t=>e=>{e.stopPropagation(),t(e)};var Pt=h()(t=>{const e=t.language,o=t.upload,n=Dt(t.onCancel),r=Dt(t.onRetry),i=Dt(t.onRemove),s=o.status,a=o.progress,c=a&&a.percent||0,l=s===S.a.FAILED||s===S.a.CANCELED,d=((t,e)=>{const o=t.status,n=t.progress;return o===S.a.CANCELED?St(e):o===S.a.FAILED?`${Ot(e)}: ${Object(ht.a)(e,t.error)} `:100===(n&&n.percent||0)?wt(e):`${kt(e)}: "${t.file.name}"`})(o,e);return yt("div",{className:t.className},void 0,l?yt(Kt,{}):yt(Bt,{percent:c}),yt(Et,{},void 0,yt(Mt,{haveError:l,title:l?d:void 0},void 0,d),yt(At,{},void 0,l?[yt(Rt,{onClick:i},"remove",Ct(e)),yt(Rt,{onClick:r},"retry",xt(e))]:yt(It,{disabled:100===c,onClick:n},void 0,vt(e)))))}).withConfig({componentId:"k5okax-7"})(["height: 64px;box-sizing: border-box;padding: 25px 15px 16px;border-radius: 0 0 4px 4px;background: ",";"],t=>Object(nt.c)(t).body),_t=o("./node_modules/react-motion/lib/react-motion.js"),Ft=o("./src/reddit/components/HTML5StreamPlayer/index.tsx"),Lt=o("./src/reddit/components/PlayButton/index.tsx"),Nt=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Ut={stiffness:60,damping:20},Ht=[{key:"video",style:{opacity:Object(_t.spring)(1,Ut)}}],zt="\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n",$t=h()(t=>{var e=t.autoPlay;const o=void 0!==e&&e,n=t.className,r=t.showControls,i=t.shouldPause,s=t.style,a=t.dashUrl,c=t.hlsUrl,l=t.otherUrl;return Nt("div",{className:n,style:s},void 0,Nt(Ft.b,{autoPlay:o,shouldIgnoreAutoplayPref:!0,shouldLoad:!1,shouldPause:i,isGif:!1,hlsSource:c,mpegDashSource:a,otherSource:l,showSettingsIcon:!1,showControlBar:r,playerClickPlay:!1,hideUntilLoaded:!0}))}).withConfig({componentId:"s1k6n5w6-0"})(["z-index: 1;",""],zt),Wt=h.a.img.withConfig({componentId:"s1k6n5w6-1"})(["width: 100%;height: 100%;object-fit: contain;"]),Vt=h()(t=>{const e=t.className,o=t.onPlayButtonClick,n=t.url,r=t.showPlayButton;return Nt("div",{className:e},void 0,Nt(Wt,{draggable:!1,src:n}),r&&Nt(Lt.b,{onClick:o}))}).withConfig({componentId:"s1k6n5w6-2"})(["z-index: 0;","background: #000;"],zt);var qt=h()(class extends a.a.Component{constructor(t){super(t),this.onPlayButtonClick=(()=>{this.setState({showVideo:!0})}),this.willEnter=(()=>({opacity:0})),this.willLeave=(()=>({opacity:Object(_t.spring)(0,Ut)})),this.didLeave=(()=>{this.setState({showVideo:!1})}),this.state={showVideo:!1}}renderVideo(){const t=this.props;return Nt("div",{className:t.className},void 0,Nt($t,{dashUrl:t.dashUrl,hlsUrl:t.hlsUrl,showControls:t.isUploaded&&t.isSelected,shouldPause:!t.isSelected||void 0}))}render(){var t=this.props;const e=t.className,o=t.isSelected,n=t.posterUrl,r=t.dashUrl,i=t.hlsUrl,s=t.otherUrl;if(!n)return this.renderVideo();const a=this.state.showVideo,c=!!(r||i||s);return Nt(_t.TransitionMotion,{defaultStyles:[],styles:o&&a&&c?Ht:[],willEnter:this.willEnter,willLeave:this.willLeave,didLeave:this.didLeave},void 0,t=>Nt("div",{className:e},void 0,t.map(t=>Nt($t,{autoPlay:!0,style:t.style,otherUrl:s,dashUrl:r,hlsUrl:i,showControls:!0,shouldPause:!o||void 0},t.key)),Nt(Vt,{url:n,showPlayButton:!a||!o,onPlayButtonClick:this.onPlayButtonClick})))}}).withConfig({componentId:"s1k6n5w6-3"})(["flex-grow: 1;border-radius: 4px;overflow: hidden;position: relative;user-select: all;&:after {display: block;content: '';padding-top: ","%;height: 0;}"," {cursor: pointer;}"],56.25,Lt.a),Zt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Xt=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),Gt=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const Jt=h()(Pt).withConfig({componentId:"s13tom42-0"})(["position: absolute;bottom: 0;left: 0;right: 0;z-index: 1;"]),Yt=h()(t=>{t.compact,t.isUploaded,t.isSelected;var e=Gt(t,["compact","isUploaded","isSelected"]);return a.a.createElement("div",e)}).withConfig({componentId:"s13tom42-1"})(["position: relative;background: ",";border-radius: 4px;display: flex;justify-content: center;overflow: visible;transition: background 1s, padding .3s 1s, box-shadow .1s;padding: ",";","",", ",", "," {transition: box-shadow .1s;","}&:hover {",", ",", "," {","}}"," {","","}"],t=>Object(nt.c)(t).body,t=>t.compact?"15px 0 45px":"0",t=>t.isUploaded?"\n    background: transparent;\n    padding: 0;\n    box-shadow: none;\n  ":`\n    ${t.isSelected?`box-shadow: 0 0 0 4px ${Object(nt.c)(t).button};`:`&:hover { box-shadow: 0 0 0 2px ${Object(nt.c)(t).button}; }`}\n  `,st,qt,ut,t=>t.isUploaded&&t.isSelected?`box-shadow: 0 0 0 4px ${Object(nt.c)(t).button};`:"",st,qt,ut,t=>t.isUploaded&&!t.isSelected?`box-shadow: 0 0 0 2px ${Object(nt.c)(t).button};`:"",Jt,t=>t.compact?" background: transparent;":"",t=>t.isUploaded?"\n      opacity: 0;\n      visibility: hidden;\n      transition: opacity 1s, visibility 0s 1s;\n    ":"");var Qt=t=>{const e=t.isSelected,o=t.onCancel,n=t.onRetry,r=t.onRemove,i=t.language,s=t.upload,c=t.mediaAsset,l=t.thumbnail,d=Gt(t,["isSelected","onCancel","onRetry","onRemove","language","upload","mediaAsset","thumbnail"]);let u=!1;if(s)u="image"===Object(Y.e)(s.metadata.mimetype);else{if(!c)return null;u=c.type===A.a.Image||c.type===A.a.AnimatedImage}const p=s?s.metadata.height:c.height,h=!s||s.status===S.a.SUCCESS,f=u&&!!p&&p<104,m=!p;return a.a.createElement(Yt,Zt({compact:f,isUploaded:h,isSelected:e},d),m?Xt(ut,{isImage:u,language:i}):u?Xt(st,{url:s?s.metadata.localUrl:c.imageUrl}):Xt(qt,{isSelected:e,isUploaded:h,dashUrl:c?c.dashUrl:void 0,hlsUrl:c?c.hlsUrl:void 0,otherUrl:s?s.metadata.localUrl:void 0,posterUrl:l?l.url:c.posterUrl}),s&&Xt(Jt,{language:i,upload:s,onCancel:o,onRetry:n,onRemove:r}))},te=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},ee=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),oe=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const ne=h.a.div.withConfig({componentId:"s11zvsy3-0"})(["width: 0px;margin-top: -1px;height: 1px;overflow: hidden;pointer-events: none;"]);var re=t=>{var e=t.elementRef,o=oe(t,["elementRef"]);return a.a.createElement(ne,te({},o,{innerRef:e}),ee("br",{}))},ie=o("./src/reddit/components/MakeGifToggle/index.tsx"),se=o("./src/reddit/icons/svgs/ThumbnailSelect/index.tsx"),ae=o("./src/reddit/icons/svgs/Trash2/index.tsx"),ce=o("./src/reddit/layout/row/Inline/index.tsx"),le=o("./src/reddit/components/RichTextEditor/Toolbar/index.tsx"),de=o("./src/reddit/components/RichTextEditor/Toolbar/FormatterButton/index.tsx"),ue=o("./src/reddit/components/RichTextEditor/Toolbar/formatterConfigs.ts"),pe=o("./src/reddit/components/RichTextEditor/media/MediaBlock/Toolbar/index.m.less"),he=o.n(pe),fe=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const me=Object(f.e)("postCreation.remove"),ge=Object(f.e)("postCreation.mediaInput.chooseThumbnail"),be=h()(de.a).withConfig({componentId:"zmvy8o-0"})(["line-height: 0;padding: 3px;"]),ye=Object(ue.f)(ae.b),ve=Object(ue.f)(se.a),xe=h()(ce.a).withConfig({componentId:"zmvy8o-1"})(["background-color: ",";box-shadow: 0 0 0 1px ",",0 1px 10px ",";"],t=>Object(nt.c)(t).field,t=>Object(nt.c)(t).line,t=>Object(nt.c)(t).line);var Ce=t=>{const e=t.block,o=t.editorState,n=t.language,r=t.onChange,i=t.showVideoControls,s=e.getKey();var a=(Object(A.g)(e)||{}).makeGif;const c=void 0!==a&&a;return fe("div",{className:he.a.container},void 0,fe(xe,{className:he.a.content},void 0,i&&fe(ie.a,{on:c,language:n,onClick:()=>r(Object(A.o)(o,s,{makeGif:!c})),toggleWidth:24},"make-gif"),i&&t.showThumbnailButton&&fe(be,{Icon:ve,onClick:t.onThumbnailButtonClick,tooltip:ge(n)}),i&&fe(le.c,{}),fe(be,{Icon:ye,onClick:()=>r(Object(A.c)(o,s)),tooltip:me(n)})))},Se=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Oe=t=>`RTE_VIDEO_THUMBNAIL_SELECTOR_${t.getKey()}`,we=Object(l.createSelector)(t=>t.uploads,(t,e)=>{const o=Object(A.g)(e.block);return o&&o.uploadInfo&&o.uploadInfo.uploadKey},(t,e)=>e?t[e]:void 0),ke=Object(c.connect)((t,e)=>({upload:we(t,e),language:Object(tt.P)(t),isThumbnailSelectorOpen:Object(Q.a)(t)===Oe(e.block),isRteVideoPosterEnabled:X.d.rteVideoPoster(t)}),(t,e)=>({onCancelUpload:e=>t(q.i(e,!1)),toggleVideoThumbnailsSelector:()=>t(Object(V.i)(Oe(e.block)))})),Ee=h.a.div.withConfig({componentId:"s1gsrkf2-0"})(["padding: 4px 0;"]),je=h.a.div.withConfig({componentId:"s1gsrkf2-1"})(["margin: 8px 0 4px;// In order to override selection style defined for the editor we\n// have to use !important here\n& ::-moz-selection { background: transparent !important; }& ::selection { background: transparent !important; }&::-moz-selection { background: transparent !important; }&::selection { background: transparent !important; }"]);var Te=ke(class extends a.a.Component{constructor(t){super(t),this.onNativeSelectionChange=(()=>{const t=window.getSelection();if(0===t.rangeCount)return;const e=t.getRangeAt(0),o=e.commonAncestorContainer;this.state.active?this.rootContainer.contains(o)||this.setState({active:!1}):this.rootContainer&&this.rootContainer.contains(o)&&this.selectBlock(),this.setState({isInSelection:Object(G.h)(e,this.rootContainer)})}),this.selectBlock=(()=>{const t=document.createRange();t.selectNodeContents(this.rootContainer);const e=window.getSelection();e.removeAllRanges(),e.addRange(t),this.setState({active:!0})}),this.isSelected=(()=>{const t=this.props.blockProps.getEditorState().getSelection(),e=this.props.block.getKey();return this.state.active&&Object(A.l)(t,e)}),this.onRetryUpload=(()=>{const t=this.props.upload;t&&this.props.blockProps.onRetryUpload(t.key)}),this.onMediaViewClickCapture=(t=>{this.state.active||this.selectBlock()}),this.onDragStart=(t=>{t.dataTransfer.effectAllowed="move",t.dataTransfer.setData(et,this.props.block.getKey())}),this.onRemove=(()=>{const t=this.props.blockProps.getEditorState();this.props.blockProps.onChange(Object(A.c)(t,this.props.block.getKey()))}),this.onCancelUpload=(async()=>{this.props.upload&&(await this.props.onCancelUpload(this.props.upload.key),this.selectBlock())}),this.onToolbarStateChange=(t=>{this.props.blockProps.onChange(t)}),this.toggleVideoThumbnailsSelector=(()=>{this.props.toggleVideoThumbnailsSelector()}),this.onThumbnailSelect=(t=>{const e=this.props.blockProps.getEditorState(),o=this.props.block.getKey();let n=Object(A.o)(e,this.props.block.getKey(),{thumbnail:t});n=Object(A.n)(n,o),this.props.blockProps.onChange(n),this.toggleVideoThumbnailsSelector()}),this.state={active:!1,isInSelection:!1}}shouldComponentUpdate(t,e){return e.active!==this.state.active||e.isInSelection!==this.state.isInSelection||t.block!==this.props.block||t.upload!==this.props.upload||Object(A.l)(t.selection,t.block.getKey())}componentDidMount(){document.addEventListener("selectionchange",this.onNativeSelectionChange);const t=this.props.selection;t.getHasFocus()&&Object(A.l)(t,this.props.block.getKey())&&this.selectBlock(),this.overlayContainer=Object(J.a)(!0)}componentWillUnmount(){document.removeEventListener("selectionchange",this.onNativeSelectionChange)}componentWillReceiveProps(t){const e=t.block.getKey(),o=this.props.blockProps.getEditorState(),n=o;o!==n&&this.props.blockProps.onChange(n),!this.state.active&&t.selection!==this.props.selection&&t.selection.getHasFocus()&&Object(A.l)(t.selection,e)&&this.selectBlock()}getToolbarOffset(){return this.props.blockProps.rteFocusableContentRef&&this.rootContainer?this.rootContainer.getBoundingClientRect().top-this.props.blockProps.rteFocusableContentRef.getBoundingClientRect().top-30-10:0}render(){var t=this.props;const e=t.block,o=t.blockProps,n=t.isRteVideoPosterEnabled,r=t.language,i=t.offsetKey,s=t.upload,a=Object(A.g)(e),c=a.thumbnail,l=!!s&&Object(Y.k)(s.metadata.mimetype||"");var d=this.state;const u=d.active,p=d.isInSelection;return Se(je,{innerRef:t=>this.rootContainer=t},void 0,u&&Se(Ce,{block:e,editorState:o.getEditorState(),language:r,onChange:this.onToolbarStateChange,onThumbnailButtonClick:this.toggleVideoThumbnailsSelector,showThumbnailButton:n,showVideoControls:l}),Se(re,{}),Se("div",{contentEditable:!1,"data-offset-key":i},void 0,Se(Ee,{draggable:!0,onDragStart:this.onDragStart,innerRef:t=>this.mediaContainer=t},void 0,Se(Qt,{isSelected:p||u,language:r,thumbnail:c,onCancel:this.onCancelUpload,onClickCapture:this.onMediaViewClickCapture,onRetry:this.onRetryUpload,onRemove:this.onRemove,upload:s,mediaAsset:a.mediaAsset})),s&&l&&Se(Z.a,{language:r,onSelect:this.onThumbnailSelect,onToggleModal:this.toggleVideoThumbnailsSelector,videoSource:s.metadata.localUrl,videoDuration:s.metadata.videoDuration,selected:c,isOpen:this.props.isThumbnailSelectorOpen})),Se(re,{}))}}),Ie=o("./node_modules/immutable/dist/immutable.js"),Re=o("./src/reddit/constants/elementClassNames.ts"),Ae=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Me=Object(f.e)("postCreation.addCaption"),Be=h.a.div.withConfig({componentId:"tx32cd-0"})(["margin: 0 10% 12px;."," {text-align: center;font-size: 13px;line-height: 18px;&::after {content: '","';display: flex;position: absolute;top: 0;right: 0;left: 0;bottom: 0;justify-content: center;pointer-events: none;color: ",";}}"],Re.c,t=>t.placeholderText,t=>Object(nt.c)(t).actionIcon),Ke=Object(c.connect)(t=>({language:Object(tt.P)(t)}))(class extends a.a.PureComponent{constructor(t){super(t);var e=Object(M.e)(t.children[0]).props;const o=e.contentState,n=e.block;this.mediaBlockKey=o.getBlockBefore(n.getKey()).getKey()}render(){const t=this.props.children[0];var e=Object(M.e)(t).props;const o=e.block,n=e.contentState.getBlockForKey(this.mediaBlockKey),r=Object(A.g)(n);if(!r||!(r.mediaAsset||r.uploadInfo&&r.uploadInfo.mediaType))return null;const i=!o.getLength();return Ae(Be,{placeholderText:i?Me(this.props.language):""},void 0,t)}}),De=Object(Ie.Map)({[O.j]:{element:"div",wrapper:Ae(Ke,{})}});var Pe=o("./node_modules/lodash/chunk.js"),_e=o.n(Pe),Fe=o("./node_modules/lodash/flatten.js"),Le=o.n(Fe),Ne=o("./node_modules/lodash/takeWhile.js"),Ue=o.n(Ne),He=o("./node_modules/draft-js/lib/removeEntitiesAtEdges.js"),ze=o.n(He);var $e=(t,e)=>{const o=e.getStartKey(),n=e.getStartOffset(),r=e.getEndKey(),i=e.getEndOffset(),s=ze()(t,e).getBlockMap(),a=s.keySeq(),c=a.indexOf(o),l=a.indexOf(r)+1;return s.slice(c,l).map((t,e)=>{const s=t.getText(),a=t.getCharacterList();return o===r?t.merge({text:s.slice(n,i),characterList:a.slice(n,i)}):e===o?t.merge({text:s.slice(n),characterList:a.slice(n)}):e===r?t.merge({text:s.slice(0,i),characterList:a.slice(0,i)}):t})};const We=t=>{const e=t.remaining.shift();((t,e)=>Qe(t,e))(e,t),((t,e)=>{e.textParts.push(t.getText())})(e,t),t.processed.push(e)},Ve=(t,e)=>{const o={children:[],parentItem:e,type:t.getType()},n={block:t,parentList:o};return o.children.push(n),e&&(e.childrenLists=e.childrenLists||[],e.childrenLists.push(o)),{list:o,item:n}},qe=(t,e)=>{const o=t.type,n=t.children,r=e.htmlParts,i=o===O.b.ORDERED_LIST?"ol":"ul";r.push(`<${i}>`),n.forEach(t=>((t,e)=>{const o=t.block,n=t.childrenLists,r=e.htmlParts;r.push("<li>"),Qe(o,e,!0),n&&n.forEach(t=>qe(t,e)),r.push("</li>")})(t,e)),r.push(`</${i}>`)},Ze=(t,e)=>{t.children.forEach((t,o)=>Xe(t,o,e))},Xe=(t,e,o)=>{const n=t.block,r=t.childrenLists,i=o.textParts,s=" ".repeat(n.getDepth()),a=n.getType()===O.b.ORDERED_LIST?`${e+1}.`:"-";i.push(`${s}${a} ${n.getText()}`),r&&r.forEach(t=>Ze(t,o))},Ge=t=>{const e=t.remaining,o=e.shift(),n=o.getType(),r=[o];for(;e.length;){const t=e[0],o=t.getType();if(!Object(O.s)(o))break;if(t.getDepth()>0||o===O.b.UNORDERED_LIST)r.push(e.shift());else{if(o!==n)break;if(r.some(t=>t.getType()!==O.b.ORDERED_LIST))break;r.push(e.shift())}}const i=(t=>{const e=t[0],o={type:e.getType(),children:[]};let n,r=o,i=e.getDepth();return t.forEach(t=>{const e=t.getType(),o=t.getDepth();if(o>i){const e=Ve(t,n);r=e.list,n=e.item,i=o}else{for(;i!==o;)r=r.parentItem?r.parentItem.parentList:r,i--;if(e===r.type)n={block:t,parentList:r},r.children.push(n);else{const e=Ve(t,r.parentItem);r=e.list,n=e.item}}}),o})(r);qe(i,t),Ze(i,t),t.processed.push(...r)};var Je=(t,e)=>{const o=t.toArray().filter(t=>!Object(O.t)(t.getType()));1===o.length&&o[0].getType()!==O.n&&o.push(new n.ContentBlock({key:Object(n.genKey)(),type:O.n}));const r=n.ContentState.createFromBlockArray(o),i=JSON.stringify(Object(n.convertToRaw)(r));return`<div data-reddit-rtjson="${R()(i)}">${e}</div>`};const Ye=()=>!!window.clipboardData,Qe=(t,e,o=!1)=>{const n=e.htmlParts,r=to(t,e);r&&r.forEach(t=>n.push(o?t.innerHTML:t.outerHTML))},to=(t,e)=>{const o=e.selection,n=e.editor,r=o.getStartKey(),i=o.getEndKey(),s=t.getKey(),a=n.refs.editor,c=Object(M.d)(s,a);return c?s===r||s===i?Object(G.c)(c):[c]:null};var eo=(t,e,o)=>{const r=t.getCurrentContent(),i=t.getSelection(),s=F(t)||$e(r,i);if(!s||!s.count())return;const a=s.toArray(),c={editor:e,selection:i,remaining:a,processed:[],htmlParts:[],textParts:[],blocksParts:[...a]};for(;c.remaining.length;){const t=c.remaining[0].getType();switch(!0){case Object(O.t)(t):_(c);break;case Object(O.s)(t):Ge(c);break;case Object(O.v)(t):yo(c);break;default:We(c)}}const l=c.textParts.join("\n"),d=(t=>Object(Ie.OrderedMap)(t.map(t=>{const e=Object(n.genKey)();return[e,t.set("key",e)]})))(c.blocksParts);return((t,{html:e,text:o})=>{Ye()?window.clipboardData.setData("text",o):(e&&t.clipboardData.setData("text/html",e),t.clipboardData.setData("text/plain",o))})(o,{html:Je(d,c.htmlParts.join("")),text:l}),o.stopPropagation(),o.preventDefault(),e.setClipboard(d),d},oo=o("./src/reddit/components/RichTextEditor/table/helpers.ts"),no=o("./node_modules/lodash/last.js"),ro=o.n(no),io=o("./src/reddit/components/RichTextEditor/constants/editorChangeTypes.ts"),so=o("./src/reddit/components/RichTextEditor/helpers/forEachBlock.ts"),ao=o("./node_modules/lodash/find.js"),co=o.n(ao),lo=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var uo=(t,e)=>{const o=t.getSelection(),r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=lo(a,2);const l=c[0],d=c[1];if(!l||l!==d)return t;const u=Object(oo.g)(i),p=Object(oo.g)(s),h=l.blocks,f=l.start,m=p.colCount,g=h.length/m;var b=Object(oo.f)(u,p);const y=b.minCol,v=b.minRow,x=b.maxCol,C=b.maxRow,S=h.filter(t=>{var o=Object(oo.g)(t);const n=o.rowIndex,r=o.colIndex;return"rows"===e?!(v<=n&&n<=C):!(y<=r&&r<=x)});S.sort(oo.b);const O="rows"===e?m:S.length/g,w=Le()(Object(oo.d)(_e()(S,O))),k=r.getBlocksAsArray(),E=[...k.slice(0,f),...w,...k.slice(f+h.length)],j=r.merge({blockMap:n.BlockMapBuilder.createFromArray(E)}),T={colIndex:y,rowIndex:v};let I=co()(w,t=>Object(oo.h)(T,Object(oo.g)(t)));I||(I=w.length?w[w.length-1]:k[f>0?f-1:0]);const R=n.SelectionState.createEmpty(I.getKey()).merge({focusOffset:I.getLength(),anchorOffset:I.getLength()});let A=n.EditorState.push(t,j,io.d);return A=n.EditorState.forceSelection(A,R)},po=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var ho=(t,e=!1)=>{const o=t.getSelection();if(o.isCollapsed())return;if(o.getStartKey()===o.getEndKey()&&!e)return;const r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=po(a,2);const l=c[0],d=c[1];if(!l||l!==d)return;const u={};let p=o;if(i===s){const t=Object(oo.n)(s,0,o.getStartOffset()),e=Object(oo.n)(s,o.getEndOffset());u[s.getKey()]=Object(oo.j)(s,[t,e]),p=o}else{if(l.blocks[0].getKey()===o.getStartKey()&&ro()(l.blocks).getKey()===o.getEndKey())return uo(t,"rows");Object(so.a)(r,o,(t,e)=>{u[e]=Object(oo.n)(t,0,0)}),p=o.merge({anchorOffset:0,focusOffset:0})}const h=r.merge({blockMap:r.getBlockMap().merge(u),selectionAfter:p});return n.EditorState.push(t,h,io.e)},fo=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const mo=(t,e,o,n)=>{const r=e.htmlParts;t.forEach((t,i)=>{r.push(`<${o} ${n[i]} style="margin: 0px; padding: 4px 9px; border: 1px solid rgb(229, 227, 218);">`),Qe(t,e),r.push(`</${o}>`)})},go=(t,e)=>{const o=e.editor,n=e.htmlParts,r=o.getEditorKey(),i=t[0].map(t=>{const e=Object(oo.g)(t).alignment;return e?`align="${oo.a[e]}"`:""});var s=function(t){return Array.isArray(t)?t:Array.from(t)}(t);const a=s[0],c=s.slice(1);n.push(`\n    <table data-editor="${r}">\n      <thead>\n        <tr>`),mo(a,e,"th",i),n.push("\n        </tr>\n      </thead>\n      <tbody>"),c.forEach(t=>{n.push("\n        <tr>"),mo(t,e,"td",i),n.push("\n        </tr>")}),n.push("\n      </tbody>\n    </table>")},bo=t=>{const e=t[0],o=t[t.length-1],n=[...t].sort(oo.b);var r=Object(oo.f)(Object(oo.g)(e),Object(oo.g)(o));const i=r.minCol,s=r.maxCol-i+1;return Object(oo.d)(_e()(n,s))},yo=t=>{const e=t.processed,o=t.remaining,n=[];for(;o.length;){const t=o[0];if(!Object(O.v)(t.getType()))break;n.push(o.shift())}const r=!o.length&&!e.length,i=1===n.length&&r;((t,e,o)=>{o?Qe(t[0],e):go(bo(t),e)})(n,t,i),((t,e,o)=>{o?e.textParts.push(t[0].getText()):((t,e)=>{const o=e.textParts;t.forEach(t=>{o.push(t.map(t=>t.getText()).join(" "))})})(bo(t),e)})(n,t,i),((t,e,o,n)=>{if(o)if(n){const o=t[0].merge({data:Object(Ie.Map)(),type:O.n});e.blocksParts=[o]}else e.blocksParts=Le()(bo(t))})(n,t,r,i),e.push(...n)},vo=t=>ho(t,!0),xo=(t,e,o)=>{const r=Object(O.v)(o.first().getType()),i=Object(O.v)(o.last().getType()),s=t.getBlockForKey(e.getAnchorKey()),a=t.getBlockForKey(e.getFocusKey());var c=Object(oo.e)(t,s,a),l=fo(c,2);const d=l[0],u=l[1];return d&&d===u?((t,e,o,r)=>{const i=Object(O.v)(r.first().getType()),s=t.getBlockForKey(e.getAnchorKey()),a=t.getBlockForKey(e.getFocusKey()),c=o.blocks,l=o.start;c.sort(oo.b);let d=Object(oo.g)(c[0]).colCount;const u=_e()(c,d);let p=u.length;var h=Object(oo.f)(Object(oo.g)(s),Object(oo.g)(a));const f=h.minRow,m=h.minCol,g=r.toArray();if(i){const o=Ue()(g,t=>Object(O.v)(t.getType()));o.sort(oo.b);const r=Object(oo.g)(o[0]).colCount,i=_e()(o,r),s=i.length,a=f+s-1,h=m+r-1;if(o.length!==s*r)throw new Error("Invalid table fragment!");if(h>=d&&u.forEach(t=>{t.push(...Object(oo.l)(h-d+1,1))}),d=u[0].length,a>=p){const t=_e()(Object(oo.l)(d,a-p+1),d);u.push(...t)}p=u.length;for(let t=0;t<s;t++)for(let e=0;e<r;e++){const o=f+t,n=m+e,r=i[t][e];u[o][n]=r.set("key",u[o][n].getKey())}const b=Object(oo.d)(u),y=Le()(b),v=t.getBlocksAsArray(),x=[...v.slice(0,l),...y,...v.slice(l+c.length)],C=Object(oo.o)(e,u[f][m],u[a][h]);return t.merge({blockMap:n.BlockMapBuilder.createFromArray(x),selectionAfter:C})}{const o=u[f][m],r=Object(oo.j)(o,g," ");let i=e;return e.getStartKey()!==e.getEndKey()&&(i=Object(oo.o)(e,o,o)),B.c(t,i,n.BlockMapBuilder.createFromArray([r]))}})(t,e,d,o):d||u||!r&&!i?void 0:((t,e,o)=>{const r=Object(O.v)(o.first().getType()),i=Object(O.v)(o.last().getType()),s=o.toArray();r&&s.unshift(Object(M.g)()),i&&s.push(Object(M.g)());const a=n.BlockMapBuilder.createFromArray(s);return B.c(t,e,a)})(t,e,o)};var Co=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var So=(t,e,o)=>{const r=t.getSelection(),i=t.getCurrentContent(),s=i.getBlockForKey(r.getAnchorKey()),a=i.getBlockForKey(r.getFocusKey());var c=Object(oo.e)(i,s,a),l=Co(c,2);const d=l[0],u=l[1];if(!d||d!==u)return t;const p=d.blocks,h=d.start,f=Object(oo.g)(s),m=Object(oo.g)(a),g=m.colCount;p.sort(oo.b);const b=_e()(p,g);var y=Object(oo.f)(f,m);const v=y.minCol,x=y.minRow,C=y.maxCol,S=y.maxRow,O={rowIndex:0,colIndex:0};if("rows"===e){const t="before"===o?x:S+1,e=_e()(Object(oo.l)(g,S-x+1),g);b.splice(t,0,...e),O.rowIndex=t}else{const t="before"===o?v:C+1;b.forEach(e=>{e.splice(t,0,...Object(oo.l)(C-v+1,1))}),O.colIndex=t}const w=Object(oo.d)(b),k=i.getBlocksAsArray(),E=Le()(w),j=[...k.slice(0,h),...E,...k.slice(h+p.length)],T=i.merge({blockMap:n.BlockMapBuilder.createFromArray(j)}),I=co()(E,t=>Object(oo.h)(O,Object(oo.g)(t))),R=Object(oo.o)(r,I,I);let A=n.EditorState.push(t,T,io.d);return A=n.EditorState.forceSelection(A,R)},Oo=o("./node_modules/lodash/clamp.js"),wo=o.n(Oo),ko=o("./src/reddit/components/RichTextEditor/helpers/sliceContiguousBlocks.ts");var Eo=(t,e,o="preserve")=>{const r=t.getSelection(),i=t.getCurrentContent(),s="up"===e||"left"===e?r.getStartKey():r.getEndKey(),a=i.getBlockForKey(s);if(!Object(O.v)(a.getType()))return;const c=Object(oo.g)(a),l=c.colCount,d=c.colIndex,u=c.rowIndex,p=i.getBlocksAsArray(),h=Object(ko.a)(i,a);if(!h)return;let f=u,m=d;switch(e){case"up":f--;break;case"down":f++;break;case"left":--m<0&&(f--,m=l-1);break;case"right":++m>=l&&(f++,m=0)}const g={rowIndex:f,colIndex:m};let b=s;const y=co()(h.blocks,t=>Object(oo.h)(Object(oo.g)(t),g));if(y)b=y.getKey();else{const t=Object(oo.c)(g,c)<0?h.start-1:h.start+h.blocks.length;0<=t&&t<p.length&&(b=p[t].getKey())}const v=i.getBlockForKey(b);let x=0;"preserve"===o?x=wo()(r.getFocusOffset(),0,v.getLength()):"end"===o&&(x=v.getLength());const C=r.merge({anchorKey:b,focusKey:b,focusOffset:x,anchorOffset:x});return r!==C?n.EditorState.forceSelection(t,C):void 0},jo=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const To=(t,e)=>{const o=e.getCurrentContent(),n=e.getSelection(),r=o.getBlockForKey(n.getFocusKey());var i=Object(oo.e)(o,r,r);const s=jo(i,1)[0];if(!s)return;const a=Object(oo.g)(r);let c;return(c=a.colIndex===a.colCount-1&&a.rowIndex===s.blocks.length/a.colCount-1&&!t.shiftKey&&n.getFocusKey()===n.getAnchorKey()?So(e,"rows","after"):Eo(e,t.shiftKey?"left":"right","end"))?(t.preventDefault(),c):void 0},Io=(t,e)=>{if(t.shiftKey)return;const o=Eo(e,"up");return o&&t.preventDefault(),o},Ro=(t,e)=>{if(t.shiftKey)return;const o=Eo(e,"down");return o&&t.preventDefault(),o};class Ao{constructor(){this.lastRowInsertionState=null}undoRowInsertion(t){const e=n.EditorState.undo(t);return Eo(e,"down","end")||e}isSelectionInLastRow(t){const e=t.getCurrentContent(),o=t.getSelection(),n=e.getBlockForKey(o.getFocusKey());var r=Object(oo.e)(e,n,n);const i=jo(r,1)[0];if(!i)return!1;const s=Object(oo.g)(i.blocks[0]).colCount,a=i.blocks.length/s;return Object(oo.g)(n).rowIndex===a-1}insertNewRow(t){const e=t.getSelection();let o=So(t,"rows","after");return o=n.EditorState.forceSelection(o,e),o=Eo(o,"down")||o,this.lastRowInsertionState=o,o}handle(t){return t.getSelection().isCollapsed()?t===this.lastRowInsertionState?this.undoRowInsertion(t):this.isSelectionInLastRow(t)?this.insertNewRow(t):Eo(t,"down")||t:t}}const Mo=(t,e)=>{const o=t.getSelection();if(o.isCollapsed()||o.getStartKey()===o.getEndKey())return;const r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=jo(a,2);const l=c[0],d=c[1];if(l&&l===d){const i=Object(oo.o)(o,s,s,!1),a=B.b(r,i,e);return n.EditorState.push(t,a,io.c)}};var Bo=o("./node_modules/lodash/forEach.js"),Ko=o.n(Bo),Do=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const Po=(t,e)=>e?t[0]:t[t.length-1];var _o=(t,e)=>{return t.getSelection().isCollapsed()?((t,e)=>{const o=t.getSelection(),r=e.getSelection();if(!o.isCollapsed()||r.isCollapsed()||0!==r.getStartOffset()||r.getStartKey()!==o.getStartKey())return t;const i=t.getCurrentContent(),s=e.getCurrentContent(),a=i.getBlockForKey(o.getAnchorKey());if(!Object(O.v)(a.getType()))return t;var c=Object(oo.g)(a);const l=c.rowIndex,d=c.colIndex;if(0!==l||0!==d)return t;const u=i.getBlockMap(),p=s.getBlockMap();if(u.size>=p.size)return t;const h=i.getBlockAfter(o.getAnchorKey()),f=s.getBlockAfter(r.getEndKey());if(h&&h!==f)return t;const m=a.merge({type:O.n,data:Object(Ie.Map)({})}),g=i.merge({blockMap:u.set(a.getKey(),m)});return n.EditorState.set(t,{currentContent:g})})(t,e):((t,e)=>{const o=t.getSelection();if(o.isCollapsed())return t;if(e.getSelection()===o)return t;if(o.getFocusKey()===o.getAnchorKey())return t;const r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=Do(a,2);const l=c[0],d=c[1];if(!l&&!d)return t;let u=t;if(l!==d){const e=o.getIsBackward(),r=Object(oo.o)(o,l?Po(l.blocks,!e):null,d?Po(d.blocks,e):null,e);o!==r&&(u=n.EditorState.forceSelection(t,r))}else if(l&&d&&l===d){const e=Object(oo.g)(i),a=Object(oo.g)(s),c=r.getBlocksAsArray(),l=d.start,p=d.blocks,h=p[0],f=Object(oo.g)(h);if(0!==f.colIndex||0!==f.rowIndex)throw new Error("First table block must always has [0, 0] coordinate!");const m=Object(oo.b)(s,i)<0,g=Object(oo.k)(e,a),b=[],y=[];Ko()(p,t=>{const e=Object(oo.g)(t);g(e.rowIndex,e.colIndex)?b.push(t):t!==h&&y.push(t)});const v=b[0]===h;b.sort(oo.b);const x=[...c.slice(0,l),...v?[]:[h],...b,...y,...c.slice(l+p.length)],C=Po(b,!m),S=Po(b,m),O=Object(oo.o)(o,C,S,m),w=r.merge({blockMap:n.BlockMapBuilder.createFromArray(x),selectionAfter:O});u=n.EditorState.set(t,{currentContent:w}),O!==o&&(u=n.EditorState.forceSelection(u,O))}return u})(t,e)},Fo=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Lo=h.a.div.withConfig({componentId:"xu4no-0"})(["display: table-cell;box-sizing: border-box;padding: 8px 9px;position: relative;."," {",'}&[data-selected="true"] {background-color: #7dbcff99;}'],"public-DraftStyleDefault-block",t=>t.alignment?`text-align: ${oo.a[t.alignment]}`:""),No=h.a.div.withConfig({componentId:"xu4no-1"})(["display: table-row;"]),Uo=h.a.div.withConfig({componentId:"xu4no-2"})(["display: table;table-layout: fixed;width: 100%;box-sizing: border-box;border-radius: 4px;border: 1px solid ",";margin: 5px 0;",":not(:first-child) {border-left: 1px solid ",";}",":not(:last-child) "," {border-bottom: 1px solid ",";}",":first-child "," {font-weight: 500;}",":nth-child(2n) {background-color: rgba(0, 0, 0, 0.01);}",""],t=>Object(nt.c)(t).line,Lo,t=>Object(nt.c)(t).line,No,Lo,t=>Object(nt.c)(t).line,No,Lo,No,t=>t.isFakeSelectionActive?"\n    // In order to override selection style defined for the editor we\n    // have to use !important here\n    & ::selection { background: transparent !important; }\n  ":""),Ho=(t,e)=>{if(!t.contains(e))return;let o=e;for(;o&&o!==t;){if(o instanceof HTMLElement&&o.hasAttribute("data-row"))return o;o.parentElement&&(o=o.parentElement)}},zo=(t,e=10)=>{let o=t,n=e;for(;o&&n>0;){if(o instanceof HTMLElement&&o.dataset.table)return o;o.parentElement&&(o=o.parentElement),n--}},$o=t=>{const e=t.dataset;if("string"==typeof e.row&&"string"==typeof e.col)return{rowIndex:+e.row,colIndex:+e.col}},Wo=t=>{const e=window.getSelection(),o=e.focusNode,n=e.anchorNode,r=e.rangeCount;if(o!==n&&r&&t){const o=e.getRangeAt(0);return Object(G.h)(o,t)&&!t.contains(o.commonAncestorContainer)}return!1},Vo=t=>{const e=a.a.Children.toArray(t);var o=Object(M.e)(e[0]).props;const n=o.selection,r=o.contentState,i=o.block;const s=Object(oo.g)(i).colCount;e.sort((t,e)=>Object(oo.b)(Object(M.c)(t),Object(M.c)(e)));const c=_e()(e,s);let l,d,u=!1;if(n.getAnchorKey()!==n.getFocusKey()){const t=r.getBlocksAsArray(),o=r.getBlockForKey(n.getStartKey()),s=r.getBlockForKey(n.getEndKey()),a=t.indexOf(o),c=t.indexOf(s),p=t.indexOf(i),h=p+e.length-1;a<p&&p<c||a<h&&h<c?u=!0:p<=a&&c<=h&&(d=Object(oo.g)(n.getIsBackward()?s:o),l=Object(oo.g)(n.getIsBackward()?o:s))}return{rows:c,anchorCell:d,focusCell:l,isSelectWholeTable:u}};const qo=Object(Ie.Map)({[O.l]:{element:"div",wrapper:Fo(class extends a.a.Component{constructor(t){super(t),this.tableElem=null,this.onMouseDown=(t=>{if(!this.tableElem||t.nativeEvent.detail<2)return;const e=window.getSelection(),o=e.rangeCount?e.getRangeAt(0):null,n=Ho(this.tableElem,e.focusNode);if(o&&n)if(2===t.nativeEvent.detail&&e.isCollapsed){const r=o.cloneRange();r.setEndAfter(n),r.toString()||(t.preventDefault(),e.selectAllChildren(n))}else t.nativeEvent.detail>=3&&(e.selectAllChildren(n),t.preventDefault())}),this.onNativeSelectionChange=(()=>{const t=this.tableElem;if(!t)return;const e=window.getSelection();if(e.anchorNode===e.focusNode)return void this.resetSelection();const o=Ho(t,e.anchorNode),n=Ho(t,e.focusNode);o&&o===n?this.resetSelection():o&&n?this.setCellsRange(o,n):o||n?this.selectWholeTable():Wo(t)?this.selectWholeTable():this.resetSelection()}),this.resetSelection=(()=>{(this.state.anchorCell||this.state.focusCell||this.state.isSelectWholeTable)&&this.setState({isSelectWholeTable:!1,focusCell:void 0,anchorCell:void 0})}),this.setCellsRange=((t,e)=>{const o=$o(e),n=$o(t);Object(oo.h)(o,this.state.focusCell)&&Object(oo.h)(n,this.state.anchorCell)&&!this.state.isSelectWholeTable||this.setState({focusCell:o,anchorCell:n,isSelectWholeTable:!1})}),this.selectWholeTable=(()=>{!this.state.focusCell&&this.state.isSelectWholeTable||this.setState({focusCell:void 0,isSelectWholeTable:!0})}),this.state=Vo(t.children)}componentDidMount(){document.addEventListener("selectionchange",this.onNativeSelectionChange)}componentWillUnmount(){document.removeEventListener("selectionchange",this.onNativeSelectionChange)}componentWillReceiveProps(t){t.children!==this.props.children&&this.setState(Vo(t.children))}render(){var t=this.state;const e=t.rows,o=t.anchorCell,n=t.focusCell;let r;t.isSelectWholeTable?r=((t,e)=>!0):o&&n&&!Object(oo.h)(o,n)&&(r=Object(oo.k)(o,n));const i=e[0].map(t=>Object(oo.g)(Object(M.e)(t).props.block).alignment),s=e.map((t,e)=>Fo(No,{},e,t.map((t,o)=>Fo(Lo,{alignment:i[o],"data-row":e,"data-col":o,"data-selected":!!r&&r(e,o)},o,t))));return Fo(Uo,{innerRef:t=>this.tableElem=t,onMouseDown:this.onMouseDown,isFakeSelectionActive:!!r,"data-table":!0},void 0,s)}},{})}});var Zo=o("./node_modules/lodash/isEqual.js"),Xo=o.n(Zo),Go=o("./src/reddit/components/RichTextEditor/Tooltip/index.tsx"),Jo=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var Yo=h()(t=>Jo("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,Jo("g",{fill:"inherit",fillRule:"nonzero"},void 0,Jo("path",{d:"M3.5 11h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1zM7.42 16h5.08c.55 0 1-.45 1-1s-.45-1-1-1H7.42c-.56 0-1 .45-1 1s.44 1 1 1zM3.5 6h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1z"})))).withConfig({componentId:"s1477erb-0"})(["fill: ",";"],t=>Object(nt.c)(t).actionIcon),Qo=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var tn=h()(t=>Qo("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,Qo("g",{fill:"inherit",fillRule:"nonzero"},void 0,Qo("path",{d:"M3.5 11h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1zM3.5 16h5.4c.54 0 1-.45 1-1s-.46-1-1-1H3.5c-.55 0-1 .45-1 1s.45 1 1 1zM3.5 6h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1z"})))).withConfig({componentId:"s1veipw3-0"})(["fill: ",";"],t=>Object(nt.c)(t).actionIcon),en=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var on=h()(t=>en("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,en("g",{fill:"inherit",fillRule:"nonzero"},void 0,en("path",{d:"M3.5 11h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1zM11.5 16h5c.55 0 1-.45 1-1s-.45-1-1-1h-5c-.55 0-1 .45-1 1s.45 1 1 1zM3.5 6h13c.55 0 1-.45 1-1s-.45-1-1-1h-13c-.55 0-1 .45-1 1s.45 1 1 1z"})))).withConfig({componentId:"s1vhcuw1-0"})(["fill: ",";"],t=>Object(nt.c)(t).actionIcon),nn=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();var rn=h()(t=>nn("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,nn("g",{fill:"inherit",fillRule:"nonzero",transform:"vertical"===t.orientation?"rotate(90, 10, 10)":""},void 0,nn("path",{d:"M3 3c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V3zM2 3v14c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2z"}),nn("path",{d:"M2 15h16v1H2M2 4h16v1H2M7.17 11.4l4.24-4.23c.4-.4 1.04-.4 1.43 0 .4.4.4 1.03 0 1.42L8.6 12.82c-.4.4-1.04.4-1.43 0-.4-.4-.4-1.03 0-1.42z"}),nn("path",{d:"M8.6 7.17l4.23 4.24c.4.4.4 1.04 0 1.43-.4.4-1.03.4-1.42 0L7.18 8.6c-.4-.4-.4-1.04 0-1.43.4-.4 1.03-.4 1.42 0z"})))).withConfig({componentId:"s1g7wm7r-0"})(["fill: ",";"],t=>Object(nt.c)(t).actionIcon),sn=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const an={up:"rotate(180 10 10)",down:"",left:"rotate(90 10 10)",right:"rotate(-90 10 10)"};var cn=h()(t=>sn("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,sn("g",{fill:"inherit",fillRule:"nonzero",transform:an[t.orientation||"down"]},void 0,sn("path",{d:"M17 17c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v14zm1 0V3c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2z"}),sn("path",{d:"M18 6H2V5h16M13 13H7c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1z"}),sn("path",{d:"M9 15V9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1z"})))).withConfig({componentId:"s1wwnqje-0"})(["fill: ",";"],t=>Object(nt.c)(t).actionIcon),ln=o("./src/reddit/models/RichTextJson/index.ts"),dn=o("./src/reddit/components/RichTextEditor/HoverTooltip/index.tsx"),un=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var pn=(t,e=!1)=>{const o=t.getSelection(),r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=un(a,2);const l=c[0],d=c[1];if(l&&l===d){const e=l.blocks;e.sort(oo.b);const r=Object(oo.o)(o,e[0],ro()(e));return uo(n.EditorState.set(t,{selection:r}),"rows")}},hn=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var fn=(t,e)=>{const o=t.getSelection(),r=t.getCurrentContent(),i=r.getBlockForKey(o.getAnchorKey()),s=r.getBlockForKey(o.getFocusKey());var a=Object(oo.e)(r,i,s),c=hn(a,2);const l=c[0],d=c[1];if(!l||l!==d)return t;const u=Object(oo.g)(i),p=Object(oo.g)(s);var h=Object(oo.f)(u,p);const f=h.minCol,m=h.maxCol,g=l.blocks.map(t=>{const o=Object(oo.g)(t).colIndex;return f<=o&&o<=m?Object(oo.m)(t,{alignment:e}):t}),b=r.getBlockMap(),y=r.merge({blockMap:b.merge(n.BlockMapBuilder.createFromArray(g)),selectionAfter:o,selectionBefore:o});return n.EditorState.push(t,y,io.a)},mn=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),gn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t};const bn=Object(f.e)("postCreation.tableToolbar.alignLeft"),yn=Object(f.e)("postCreation.tableToolbar.alignCenter"),vn=Object(f.e)("postCreation.tableToolbar.alignRight"),xn=Object(f.e)("postCreation.tableToolbar.insertColumnBefore"),Cn=Object(f.e)("postCreation.tableToolbar.insertColumnAfter"),Sn=Object(f.e)("postCreation.tableToolbar.deleteColumn"),On=Object(f.e)("postCreation.tableToolbar.insertRowAbove"),wn=Object(f.e)("postCreation.tableToolbar.insertRowBelow"),kn=Object(f.e)("postCreation.tableToolbar.deleteRow"),En=Object(f.e)("postCreation.tableToolbar.deleteTable"),jn=h()(de.a).withConfig({componentId:"s13k559v-0"})(["line-height: 0;padding: 3px;"]),Tn=(t,e)=>o=>a.a.createElement(t,gn({},e,o)),In=Object(ue.f)(cn),Rn=Tn(In,{orientation:"up"}),An=Tn(In,{orientation:"right"}),Mn=Tn(In,{orientation:"left"}),Bn=Object(ue.f)(rn),Kn=Tn(Bn,{orientation:"vertical"}),Dn=Object(ue.f)(Yo),Pn=Object(ue.f)(tn),_n=Object(ue.f)(on),Fn=Object(ue.f)(ae.b),Ln=h()(ce.a).withConfig({componentId:"s13k559v-1"})(["width: ","px;box-sizing: border-box;background-color: ",";border-radius: 4px;padding: 2px 5px;box-shadow: 0 0 0 1px ",",0 1px 10px ",";// This is needed for removing tooltip delay when user moves mouse pointer\n// from one toolbar icon to other. Basically once tooltips are on, we need to\n// let the user hover around to quickly read all of the actions\n&:hover "," "," {opacity: 1;}"],309,t=>Object(nt.c)(t).field,t=>Object(nt.c)(t).line,t=>Object(nt.c)(t).line,dn.b,dn.a);var Nn=t=>{const e=t.editorState,o=t.language,n=t.onChange;return mn(Ln,{},void 0,mn(jn,{Icon:Pn,onClick:()=>n(fn(e,ln.e)),tooltip:bn(o)}),mn(jn,{Icon:Dn,onClick:()=>n(fn(e,ln.d)),tooltip:yn(o)}),mn(jn,{Icon:_n,onClick:()=>n(fn(e,ln.f)),tooltip:vn(o)}),mn(le.c,{}),mn(jn,{Icon:Mn,onClick:()=>n(So(e,"columns","before")),tooltip:xn(o)}),mn(jn,{Icon:An,onClick:()=>n(So(e,"columns","after")),tooltip:Cn(o)}),mn(jn,{Icon:Kn,onClick:()=>n(uo(e,"columns")),tooltip:Sn(o)}),mn(le.c,{}),mn(jn,{Icon:Rn,onClick:()=>n(So(e,"rows","before")),tooltip:On(o)}),mn(jn,{Icon:In,onClick:()=>n(So(e,"rows","after")),tooltip:wn(o)}),mn(jn,{Icon:Bn,onClick:()=>n(uo(e,"rows")),tooltip:kn(o)}),mn(le.c,{}),mn(jn,{Icon:Fn,onClick:()=>n(pn(e)||e),tooltip:En(o)}))},Un=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Hn=20,zn=h.a.div.withConfig({componentId:"s1pmk6kx-0"})(["position: relative;width: ","px;height: ","px;cursor: pointer;color: rgba(0, 0, 0, 0.5);border-radius: 2px;text-align: center;line-height: 2px;font-size: 16px;box-sizing: border-box;border: 1px solid transparent;",'&:hover {opacity: 1;}&::after {content: "','";}'],Hn,14,t=>t.pressed?"\n    background-color: #E0E0E0;\n    border-color: rgba(0, 0, 0, 0.3);\n  ":"\n    background-color: #FAFAFA;\n    border-color: rgba(0, 0, 0, 0.2);\n    opacity: 0.9;\n  ",""),$n=h.a.div.withConfig({componentId:"s1pmk6kx-1"})(["position: absolute;left: 50%;transform: translateX(-50%);bottom: ","px;"],16),Wn=t=>{const e={};if(!t||!document.documentElement)return e;const o=t.left-154.5,n=t.left+154.5-document.documentElement.clientWidth;return o<0?e.left=-o+Hn+2:n>0&&(e.left=-n+Hn-2),e},Vn=t=>{t.preventDefault(),t.stopPropagation()};class qn extends s.Component{constructor(t){super(t),this.containerElem=null,this.setContainerRef=(t=>this.containerElem=t),this.onResize=(t=>{this.hideToolbar(),this.state.tooltipRect&&this.updateForCurrentSelection()}),this.onDocumentClick=(t=>{this.state.isToolbarActive&&this.containerElem&&(this.containerElem.contains(t.target)||this.hideToolbar())}),this.onNativeSelectionChange=(()=>{this.updateForCurrentSelection()}),this.updateForCurrentSelection=(()=>{const t=window.getSelection();if(!t.rangeCount)return void this.hideActionButton();const e=t.getRangeAt(0).commonAncestorContainer;if(!this.props.rteDomRef.contains(e))return void this.hideActionButton();const o=zo(e);if(!o)return void this.hideActionButton();const n=Ho(o,t.anchorNode);if(!n)return void this.hideActionButton();const r=Ho(o,t.focusNode);r?this.updateActionButtonPosition(n,r):this.hideActionButton()}),this.updateActionButtonPosition=((t,e)=>{const o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r={top:Math.min(o.top,n.top),left:Math.max(o.right,n.right)-Hn};Xo()(this.state.tooltipRect,r)||this.setState({tooltipRect:r}),this.hideToolbar()}),this.hideActionButton=(()=>{this.hideToolbar(),this.state.tooltipRect&&this.setState({tooltipRect:null})}),this.hideToolbar=(()=>{this.state.isToolbarActive&&this.setState({isToolbarActive:!1})}),this.onActionButtonClick=(t=>{this.setState(t=>({isToolbarActive:!t.isToolbarActive})),Vn(t)}),this.state={isToolbarActive:!1,tooltipRect:null},this.api={hideActionButton:this.hideActionButton}}componentDidMount(){const t=this.props.onSetApi;document.addEventListener("selectionchange",this.onNativeSelectionChange),document.addEventListener("click",this.onDocumentClick),window.addEventListener("resize",this.onResize),t&&t(this.api)}componentWillUnmount(){const t=this.props.onSetApi;document.removeEventListener("selectionchange",this.onNativeSelectionChange),document.removeEventListener("click",this.onDocumentClick),window.removeEventListener("resize",this.onResize),t&&t(null)}componentWillReceiveProps(t){const e=t.editorState.getSelection(),o=this.props.editorState.getSelection();e.getHasFocus()&&Object(O.v)(n.RichUtils.getCurrentBlockType(t.editorState))?e!==o&&this.hideToolbar():this.hideActionButton()}render(){const t=!this.props.readOnly&&this.state.isToolbarActive,e=this.state.tooltipRect;return a.a.createElement("div",{ref:this.setContainerRef},Un(Go.a,{rect:e},void 0,Un(zn,{onMouseDown:Vn,onMouseMove:Vn,onClick:this.onActionButtonClick,pressed:t},void 0,t?Un($n,{style:Wn(e)},void 0,Un(Nn,{onChange:this.props.onChange,editorState:this.props.editorState,language:this.props.language})):null)))}}var Zn=o("./src/reddit/components/RichTextEditor/editorStateTransforms.ts"),Xn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Gn=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();function Jn(){return new Map}const Yn=a.a.createContext(Jn());var Qn=o("./src/reddit/components/RichTextEditor/entity/entityTypes.ts");const tr=new Set([Qn.a.LINK]);var er=o("./src/reddit/components/RichTextEditor/entity/link/helpers.tsx"),or=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const nr=h.a.a.withConfig({componentId:"s18magzr-0"})(["color: ",";text-decoration: underline;"],t=>Object(nt.c)(t).linkText),rr={strategy:er.a,component:function(t){class e extends a.a.Component{constructor(){super(...arguments),this.elementRef=null,this.updateElementRef=(t=>{const e=this.props.registry;this.elementRef=t,t?e.set(this.props.entityKey,t):e.delete(this.props.entityKey)})}componentWillReceiveProps(t){const e=this.props.registry;this.props.entityKey!==t.entityKey&&this.elementRef&&(e.get(this.props.entityKey)===this.elementRef&&e.delete(this.props.entityKey),e.set(t.entityKey,this.elementRef))}render(){return a.a.createElement("span",{ref:this.updateElementRef},a.a.createElement(t,this.props))}}return t=>Gn(Yn.Consumer,{},void 0,o=>a.a.createElement(e,Xn({},t,{registry:o})))}(t=>{const e=t.contentState.getEntity(t.entityKey).getData().url;return or(nr,{href:e},void 0,t.children)})},ir=()=>rr;var sr=o("./src/lib/linkMatchers/index.ts"),ar=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const cr=(t,e)=>{if(e.getType()===O.f)return[];return(t.match(e.getText())||[]).filter(t=>((t,{index:e,lastIndex:o})=>{for(let n=e;n<o;n++)if(t.getInlineStyleAt(n).contains(O.k.MONOSPACE))return!1;return!0})(e,t))},lr=(t,e,o,r)=>{const i=t.getBlockForKey(e),s=n.SelectionState.createEmpty(e),a=[],c=new Set;let l=t;const d=(t,e,n)=>{let r=null;for(let s=t;s<e;s++){const t=i.getEntityAt(s),e=t&&l.getEntity(t);if(e){if(e.getType()!==o)return;r||c.has(t)||(r=t)}}if(r){l.getEntity(r).getData().url!==n&&(l=l.mergeEntityData(r,{url:n}))}return r||(t=>(l=l.createEntity(o,"MUTABLE",{url:t})).getLastCreatedEntityKey())(n)},u=(t,e,o)=>{const r=s.merge({anchorOffset:t,focusOffset:e});l=n.Modifier.applyEntity(l,r,o)},p=(t,e)=>u(t,e,null),h=l.getBlockForKey(e);cr(r,h).forEach(({index:t,lastIndex:e,url:o})=>{const n=d(t,e,o);n&&(u(t,e,n),c.add(n),a.push([t,e]))});let f=0;return h.findEntityRanges(t=>{const e=t.getEntity();return!!e&&l.getEntity(e).getType()===o},(t,e)=>{if(f>=a.length)return void p(t,e);var o=ar(a[f],2);const n=o[0],r=o[1];e<=n?p(t,e):(t<n&&p(t,n-1),e>r&&p(r,e),f++)}),l},dr=(t,e)=>{const o=t.getCurrentContent(),r=e.getCurrentContent();if(o===r)return t;const i=o.getBlockMap(),s=r.getBlockMap();let a=o;return i.forEach((t,e)=>{if(e){if(t===s.get(e))return;a=lr(a,e,Qn.a.SUBREDDIT_LINK,sr.d),a=lr(a,e,Qn.a.USER_LINK,sr.g)}}),t.getCurrentContent()===a?t:(a=a.merge({selectionAfter:t.getCurrentContent().getSelectionAfter(),selectionBefore:t.getCurrentContent().getSelectionBefore()}),n.EditorState.set(t,{currentContent:a}))};var ur=t=>{return!!t.getCurrentContent().getBlockMap().filter(t=>!!t&&t.getType()===O.a).size};const pr=" ".repeat(4),hr=new RegExp("^ {1,4}|\\t"),fr=new Set([O.b.CODE_BLOCK]),mr=(t,e)=>{const o=e.getCurrentContent(),r=e.getSelection(),i=t.shiftKey;let s=o,a=r.getAnchorOffset(),c=r.getFocusOffset();if(Object(so.a)(o,r,(t,e)=>{const o=t.getType();if("paragraph"===o||!fr.has(o))return!1;let l=null;const d=t.getText(),u=n.SelectionState.createEmpty(e);if(i){const t=d.match(hr);if(t){const e=t[0].length;s=B.b(s,u.merge({focusOffset:e}),""),l=-e}}else s=B.a(s,r.isCollapsed()?r:u,pr),l=4;null!==l&&(e===r.getAnchorKey()&&(a+=l),e===r.getFocusKey()&&(c+=l))}),s!==o)return s=s.merge({selectionAfter:r.merge({anchorOffset:a,focusOffset:c})}),t.preventDefault(),n.EditorState.push(e,s,i?"remove-range":"insert-characters")},gr=t=>(t=>{const e=t.getSelection(),o=t.getCurrentContent();if(!e.isCollapsed())return ho(t);if(0===e.getStartOffset()){const n=o.getBlockForKey(e.getEndKey());if(Object(O.v)(n.getType()))return t;{const e=o.getBlockBefore(n.getKey());if(e&&Object(O.v)(e.getType()))return t}}})(t)||(t=>{const e=t.getSelection(),o=t.getCurrentContent();if(e.isCollapsed()&&0===e.getStartOffset()){const r=o.getBlockForKey(e.getEndKey());if(Object(O.o)(r.getType()))return Object(A.c)(t,r.getKey());if(Object(O.u)(r.getType())){const e=o.getBlockBefore(r.getKey());return n.EditorState.forceSelection(t,Object(M.b)(e))}}})(t),br=t=>(t=>{const e=t.getSelection(),o=t.getCurrentContent();if(!e.isCollapsed())return ho(t);{const n=o.getBlockForKey(e.getEndKey());if(e.getEndOffset()===n.getLength()){if(Object(O.v)(n.getType()))return t;{const e=o.getBlockAfter(n.getKey());if(e&&Object(O.v)(e.getType()))return t}}}})(t)||(t=>{const e=t.getSelection(),o=t.getCurrentContent();if(!e.isCollapsed())return;const n=o.getBlockForKey(e.getEndKey());if(e.getEndOffset()===n.getLength()){if(Object(O.o)(n.getType()))return Object(A.c)(t,n.getKey());{const n=o.getBlockAfter(e.getEndKey());if(n&&Object(O.o)(n.getType()))return Object(A.c)(t,n.getKey())}}})(t),yr=t=>{const e=t.getSelection();if(!e.isCollapsed())return!1;const o=n.RichUtils.getCurrentBlockType(t);if(!O.c.includes(o))return!1;if(e.getFocusOffset()>0){if("\n"===t.getCurrentContent().getBlockForKey(e.getFocusKey()).getText()[e.getFocusOffset()-1])return!1}return!0};var vr=o("./src/lib/memoizeByReference/index.ts");const xr=Object(vr.a)(t=>{const e=t.getSelection();if(!e.isCollapsed())return;const o=e.getStartOffset(),n=t.getCurrentContent(),r=n.getBlockForKey(e.getFocusKey());if(r.getType()!==O.n)return;const i=r.getText();if(i.startsWith("1.")&&2===o)return O.i.ORDERED;if(i.startsWith("*")&&1===o){const t=n.getBlockBefore(r.getKey());if(t&&t.getType()===O.n&&t.getText().startsWith("* "))return;return O.i.UNORDERED}}),Cr=t=>{const e=xr(t);if(!e)return t;const o=Object(Zn.a)(t);let r=n.Modifier.replaceText(o.getCurrentContent(),o.getSelection().merge({anchorOffset:0}),"");return r=n.Modifier.setBlockType(r,r.getSelectionAfter(),e),n.EditorState.push(o,r,io.b)};var Sr=o("./src/reddit/components/RichTextEditor/helpers/styles.ts"),Or=o("./src/reddit/components/RichTextEditor/spoiler/helpers.ts"),wr=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const kr=h.a.span.withConfig({componentId:"s1jkb60m-0"})(["background: #545452;color: #FFFFFF;padding: 0 4px;margin: 0 3px;caret-color: #FFFFFF;border-radius: 2px;"]),Er=()=>({strategy:Or.a,component:t=>wr(kr,{},void 0,wr("span",{}),t.children,wr("span",{}))});var jr=o("./src/reddit/components/FocusableContent/index.tsx"),Tr=o("./src/reddit/constants/componentSizes.ts"),Ir=o("./src/reddit/contexts/InsideOverlay.tsx"),Rr=o("./node_modules/lodash/debounce.js"),Ar=o.n(Rr),Mr=o("./src/reddit/actions/subredditAutocomplete.ts"),Br=o("./src/reddit/constants/zIndex.ts"),Kr=o("./src/reddit/helpers/name/index.ts"),Dr=o("./src/reddit/selectors/subredditAutocomplete.ts"),Pr=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),_r=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};const Fr=h()(t=>{t.isFocused;var e=_r(t,["isFocused"]);return a.a.createElement("div",e)}).withConfig({componentId:"s1duid27-0"})(["padding: 12px 16px;cursor: pointer;background-color: ",";color: ",";"],t=>t.isFocused?Object(nt.c)(t).button:"inherit",t=>t.isFocused?Object(nt.c)(t).lightText:Object(nt.c)(t).bodyText);class Lr extends s.Component{constructor(t){super(t),this.mouseDown=!1,this.onMouseUp=(()=>{this.mouseDown&&(this.props.onEntrySelect(this.props.entry),this.mouseDown=!1)}),this.onMouseDown=(t=>{this.mouseDown=!0,t.preventDefault()}),this.onMouseOver=(()=>{this.props.onEntryFocus(this.props.entry)}),this.mouseDown=!1}componentDidUpdate(){this.mouseDown=!1}render(){return Pr(Fr,{isFocused:this.props.isFocused,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseOver:this.onMouseOver},void 0,this.props.children)}}var Nr=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Ur=Object(l.createStructuredSelector)({subredditSuggestions:(t,e)=>{const o=Object(Dr.d)(t,e);return o?o.subreddits:[]}}),Hr=Object(c.connect)(Ur,(t,e)=>({onGetSubredditAutocomplete:e=>{t(Mr.d(e))}})),zr=h.a.div.withConfig({componentId:"s1r4bg51-0"})(["min-width: 240px;border-radius: 4px;overflow: hidden;background-color: ",";box-shadow: 0 0 0 1px ",",0px 2px 3px 2px ",";z-index: ",";"],t=>Object(nt.c)(t).body,t=>Object(nt.c)(t).line,t=>Object(nt.c)(t).line,Br.g);var $r=Hr(class extends s.Component{constructor(t){super(t),this.api=null,this.onEntrySelect=(t=>{this.props.onSelect(this.props.subredditSuggestions[t].name)}),this.onEntryFocus=(t=>{this.setState({selectedSuggestionIndex:t})}),this.moveUp=(()=>{if(this.props.subredditSuggestions.length>1){let t=this.state.selectedSuggestionIndex-1;return t=t<0?this.props.subredditSuggestions.length-1:t,this.setState({selectedSuggestionIndex:t}),!0}return!1}),this.moveDown=(()=>{if(this.props.subredditSuggestions.length>1){const t=(this.state.selectedSuggestionIndex+1)%this.props.subredditSuggestions.length;return this.setState({selectedSuggestionIndex:t}),!0}return!1}),this.selectCurrent=(()=>{if(this.props.subredditSuggestions.length){const t=this.props.subredditSuggestions[this.state.selectedSuggestionIndex];return t&&this.props.onSelect(t.name),!0}return!1}),this.state={selectedSuggestionIndex:0},this.requestSubredditAutocomplete=Ar()(this.requestSubredditAutocomplete.bind(this),200,{maxWait:200}),this.api={moveUp:this.moveUp,moveDown:this.moveDown,selectCurrent:this.selectCurrent}}componentDidMount(){this.requestSubredditAutocomplete(this.props.substring),this.props.onDropdownApi(this.api)}componentWillUnmount(){this.props.onDropdownApi(null)}componentWillReceiveProps(t){t.substring!==this.props.substring&&(this.requestSubredditAutocomplete(t.substring),this.setState({selectedSuggestionIndex:0}))}requestSubredditAutocomplete(t){this.props.onGetSubredditAutocomplete(t)}render(){return this.props.subredditSuggestions.length?Nr(zr,{className:this.props.className},void 0,this.props.subredditSuggestions.map((t,e)=>Nr(Lr,{"data-redditstyle":!0,entry:e,isFocused:e===this.state.selectedSuggestionIndex,onEntrySelect:this.onEntrySelect,onEntryFocus:this.onEntryFocus},t.name,Object(Kr.b)(t.name)))):null}}),Wr=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Vr=h.a.div.withConfig({componentId:"jpf2sw-0"})(["box-sizing: border-box;margin: 4px 8px;padding: 2px 0 2px 12px;line-height: 21px;position: relative;&:before {content: '';position: absolute;top: 0;left: 0;bottom: 0;width: 4px;border-radius: 4px;background-color: ",";}blockquote ~ blockquote {padding-top: 8px;}"],t=>Object(pt.f)(Object(nt.c)(t).bodyText,.1)),qr=Object(Ie.Map)({[O.e]:{element:"blockquote",wrapper:Wr(Vr,{})}});var Zr=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Xr=h.a.div.withConfig({componentId:"p27l2o-0"})(["","margin: 15px 0;padding: 8px;background: ",";color: #222;"],v.bodyFontMono,t=>"rgba(238, 238, 238, 0.8)"),Gr=Object(Ie.Map)({[O.f]:{element:"code",wrapper:Zr(Xr,{})}});var Jr=o("./node_modules/bowser/src/bowser.js"),Yr=o.n(Jr),Qr=o("./node_modules/lodash/includes.js"),ti=o.n(Qr),ei=o("./src/reddit/components/RichTextEditor/DragController/helpers.ts"),oi=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const ni=h.a.div.withConfig({componentId:"s1a2fjx4-0"})(["input,textarea,[contenteditable] {",";};"],t=>t.hideCaret?"caret-color: transparent":""),ri=h.a.div.withConfig({componentId:"s1a2fjx4-1"})(["display: block;height: 2px;border-radius: 1px;margin: 0 16px;background: ",";transform: translateY(-50%);"],t=>Object(nt.c)(t).button),ii=h()(Go.a).withConfig({componentId:"s1a2fjx4-2"})(["left: 0px;right: 0px;pointer-events: none;transition: top .2s;"]);class si extends s.Component{constructor(t){super(t),this.dragCount=0,this.setContainerRef=(t=>this.containerRef=t),this.preventDocumentDrop=(t=>{!!function t(e){return e.draggable?e:e.parentElement?t(e.parentElement):null}(t.target)||(t.preventDefault(),t.stopPropagation())}),this.onDragOver=(t=>{const e=ti()(t.dataTransfer.types,et);if(!e){if(!Object(ei.c)(t.dataTransfer)||!this.props.allowMedia)return}if(!e&&!Object(ei.c)(t.dataTransfer))return;t.preventDefault();try{t.dataTransfer.dropEffect=e?"move":"copy"}catch(i){}const o=this.props.editorState;let n=null;const r=Object(ei.b)(o,t);if(r){const t=this.containerRef.getBoundingClientRect().left;n={top:r.clientY,left:t}}Xo()(n,this.state.rect)||this.setState({rect:n})}),this.onDragEnter=(t=>{this.dragCount++}),this.onDragLeave=(t=>{this.dragCount--,0===this.dragCount&&this.state.rect&&this.setState({rect:null})}),this.onDrop=(t=>{const e=()=>{this.dragCount=0,this.setState({rect:null})},o=Yr.a.msie?null:t.dataTransfer.getData(et),n=Object(ei.a)(t.dataTransfer);if(!(o||n.length&&this.props.allowMedia))return void e();const r=this.props.editorState,i=Object(ei.b)(r,t);if(!i)return void e();t.preventDefault(),t.stopPropagation();const s=i.isBefore?M.a.before:M.a.after;o?this.props.onBlockMove(o,i.blockKey,s):setTimeout(()=>{this.props.onFilesDrop(n,i.blockKey,s)}),e()}),this.state={rect:null}}componentDidMount(){document.addEventListener("drop",this.preventDocumentDrop),document.addEventListener("dragover",this.preventDocumentDrop)}componentWillUnmount(){document.removeEventListener("drop",this.preventDocumentDrop),document.removeEventListener("dragover",this.preventDocumentDrop)}render(){const t=this.props.children,e=this.state.rect,o=a.a.Children.only(t);return oi(ni,{innerRef:this.setContainerRef,onDragOver:this.onDragOver,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,hideCaret:!!e},void 0,oi("div",{},void 0,o),oi(ii,{rect:e},void 0,oi(ri,{})))}}var ai=o("./node_modules/draft-js/lib/DraftPasteProcessor.js"),ci=o.n(ai),li=o("./node_modules/draft-js/lib/getEntityKeyForSelection.js"),di=o.n(li),ui=o("./node_modules/draft-js/lib/splitTextIntoTextBlocks.js"),pi=o.n(ui),hi=o("./src/reddit/components/RichTextEditor/entity/cloneEntitiesInFragment.ts"),fi=o("./src/reddit/components/RichTextEditor/entity/applyEntityToContentBlock.ts");var mi=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function gi(t,e,o){const r=Object(n.convertFromHTML)(e,void 0,o);if(r){const e=r.contentBlocks,o=r.entityMap;if(e){const r=n.BlockMapBuilder.createFromArray(function(t){return t.map(t=>Object(O.r)(t.getType())?E(t):t)}(e));return[t.set("entityMap",o),r]}}return[t,null]}function bi(t,e,o){const r=pi()(e),i=o&&1===r.length?o:n.CharacterMetadata.create(),s=ci.a.processText(r,i).map(t=>t.merge({type:O.n}));return n.BlockMapBuilder.createFromArray(s)}const yi=t=>{if(!t)return null;const e=document.createElement("div");e.innerHTML=t;const o=e.querySelector("[data-reddit-rtjson]");return o&&o.getAttribute("data-reddit-rtjson")},vi=t=>{if(Ye())return{text:window.clipboardData.getData("text"),html:null};{const e=t.clipboardData.getData("text/html");return{text:t.clipboardData.getData("text/plain"),html:e}}};function xi(t,e,o){var r=vi(o);const i=r.text,s=r.html,a=function(t,e,o,n){const r={text:e,html:o,rtjson:n,fragment:null},i=t.getClipboard();return i&&o&&function(t,e,o,n){return-1!==e.indexOf(n)||1===t.size&&t.first().getText()===o}(i,o,e,t.getEditorKey())&&(r.fragment=i),r}(e,i,s,s&&yi(s));e.getClipboard()&&!a.fragment&&e.setClipboard(null);const c=t.getCurrentContent(),l=t.getSelection(),d=t.getCurrentInlineStyle(),u=e.props.blockRenderMap;let p=null,h=c;if(!(p=function(t,e,o){const n=t.getBlockForKey(e.getStartKey()),r=t.getBlockForKey(e.getEndKey());if(n.getType()===O.f||r.getType()===O.f)return bi(0,o).map(t=>t.merge({type:O.f,depth:0}))}(h,l,a.text))&&a.fragment){p=a.fragment;var f=Object(hi.b)(h,p),m=mi(f,2);h=m[0],p=m[1],p=K(p)}if(!p&&a.rtjson&&(p=function(t){const e=JSON.parse(t);return Object(n.convertFromRaw)(e).getBlockMap()}(a.rtjson)),!p&&a.html){var g=gi(h,a.html,u),b=mi(g,2);h=b[0],p=b[1]}if(!p&&a.text){const t=function(t,e,o){return n.CharacterMetadata.create({style:o,entity:di()(t,e)})}(h,l,d);var y=function(t,e){let o=t,n=e;return e.forEach(t=>{const e=t.getText(),r=sr.c.match(e);if(!r)return;let i=t;r.forEach(({index:t,lastIndex:e,url:r})=>{const s=(o=o.createEntity(Qn.a.LINK,"MUTABLE",{url:r})).getLastCreatedEntityKey();i=Object(fi.a)(i,t,e,s),n=n.set(i.getKey(),i)})}),[o,n]}(h,p=bi(0,a.text,t)),v=mi(y,2);h=v[0],p=v[1]}if(p)return h=function(t,e,o){let n=xo(t,e,o)||D(t,e,o);return n||(n=B.c(t,e,o))}(h,l,p),n.EditorState.push(t,h,io.d)}var Ci=o("./src/reddit/components/RichTextEditor/entity/getSelectionEntityInfo.ts");var Si=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Oi=h.a.div.withConfig({componentId:"lolhue-0"})(["width: 0;height: 0;border-left: ","px solid transparent;border-right: ","px solid transparent;border-bottom: ","px solid ",";"],8,8,8,t=>Object(nt.c)(t).line),wi=h()(Oi).withConfig({componentId:"lolhue-1"})(["border-bottom-color: ",";"],t=>Object(nt.c)(t).body);var ki=h()(t=>Si("div",{className:t.className},void 0,Si(Oi,{}),Si(wi,{}))).withConfig({componentId:"lolhue-2"})(["position: relative;height: ","px;width: ","px;margin-left: ","px;"," {position: absolute;left: 0;top: 0;}"," {position: absolute;left: 0;top: 2px;}"],8,16,12,Oi,wi),Ei=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const ji=Object(f.e)("postCreation.linkDetailsPopup.changeButton"),Ti=Object(f.e)("postCreation.linkDetailsPopup.removeButton"),Ii=h.a.div.withConfig({componentId:"s1jbpm6n-0"})(["background-color: ",";padding: 10px;cursor: default;font-size: 14px;white-space: nowrap;box-shadow: 0 0 0 1px ",",0 1px 10px ",";"],t=>Object(nt.c)(t).body,t=>Object(nt.c)(t).line,t=>Object(nt.c)(t).line),Ri=h.a.a.withConfig({componentId:"s1jbpm6n-1"})(["max-width: 370px;display: inline-block;vertical-align: bottom;text-overflow: ellipsis;overflow: hidden;color: ",";text-decoration: none;&:hover {text-decoration: underline;}"],t=>Object(nt.c)(t).linkText),Ai=h.a.a.withConfig({componentId:"s1jbpm6n-2"})(["color: ",";cursor: pointer;&:hover {text-decoration: underline;}"],t=>Object(nt.c)(t).linkText);var Mi=t=>Ei("div",{},void 0,Ei(ki,{}),Ei(Ii,{onMouseDown:t=>t.preventDefault()},void 0,Ei(Ri,{href:t.url,target:"_blank"},void 0,t.url),Ei("span",{},void 0,"  "),Ei(Ai,{onClick:()=>t.onStartEdit(),role:"button"},void 0,ji(t.language)),Ei("span",{},void 0," | "),Ei(Ai,{onClick:()=>t.onRemove(),role:"button"},void 0,Ti(t.language)))),Bi=o("./src/reddit/controls/Input/index.tsx"),Ki=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const Di=Object(f.e)("postCreation.linkEditorPopup.insertButton"),Pi=Object(f.e)("postCreation.linkEditorPopup.applyButton"),_i=Object(f.e)("postCreation.linkEditorPopup.textLabel"),Fi=Object(f.e)("postCreation.linkEditorPopup.linkLabel"),Li=Object(f.e)("postCreation.linkEditorPopup.textInputPlaceholder"),Ni=Object(f.e)("postCreation.linkEditorPopup.linkInputPlaceholder"),Ui=Object(f.e)("postCreation.linkEditorPopup.invalidLinkHint"),Hi=h.a.form.withConfig({componentId:"s9vu9dw-0"})(["background-color: ",";padding: 10px;display: flex;flex-flow: column nowrap;min-width: 350px;box-shadow: 0 0 0 1px ",",0 1px 10px ",";"],t=>Object(nt.c)(t).body,t=>Object(nt.c)(t).line,t=>Object(nt.c)(t).line),zi=h()(t=>a.a.createElement("div",t,Ki(ki,{}),t.children)).withConfig({componentId:"s9vu9dw-1"})(["outline: none;font-size: 12px;margin-left: -20px;"," {margin-left: ","px;}"],ki,12),$i=h()(Bi.a).withConfig({componentId:"s9vu9dw-2"})(["display: inline-block;line-height: 28px;border-radius: 2px;color: ",";background-color: ",";margin: 0px 0px 4px 5px;font-size: 12px;border: 1px solid ",";;flex-grow: 1;"],t=>Object(nt.c)(t).bodyText,t=>Object(nt.c)(t).field,t=>Object(nt.c)(t).line),Wi=h.a.label.withConfig({componentId:"s9vu9dw-3"})(["display: flex;align-items: baseline;"]),Vi=h.a.div.withConfig({componentId:"s9vu9dw-4"})(["display: flex;flex-flow: row-reverse nowrap;justify-content: space-between;"]),qi=h.a.span.withConfig({componentId:"s9vu9dw-5"})(["color: ",";padding-top: 3px;align-self: flex-start;"],mt.a.warning),Zi=h()(gt.e).withConfig({componentId:"s9vu9dw-6"})(["line-height: 20px;min-width: 100px;align-self: flex-end;"]),Xi=t=>{t&&(t.focus(),t.select())},Gi=/ /g,Ji=t=>t.replace(Gi,"%20");class Yi extends s.Component{constructor(t){super(t),this.focused=!1,this.focusLostTimer=0,this.textInputElementRef=null,this.urlInputElementRef=null,this.onEdited=(()=>{const t=this.state.url.trim(),e=Ji(t),o=Object(sr.f)(e);if(!o)return this.setState({isInvalidUrl:!0}),void(this.urlInputElementRef&&this.urlInputElementRef.focus());const n=o.url;this.props.onEdited(n,this.state.displayText.trim()||t)}),this.onFocus=(()=>{this.focused=!0}),this.onBlur=(()=>{this.focused=!1,this.focusLostTimer=window.setTimeout(()=>{this.focused||this.props.onFocusLost()},0)}),this.onClick=(t=>{t.stopPropagation()}),this.handleUrlChange=(t=>{const e=t.target.value;let o=this.state.isInvalidUrl;o&&Object(sr.e)(sr.c,e)&&(o=!1),this.setState({url:e,isInvalidUrl:o})}),this.handleDisplayTextChange=(t=>{this.setState({displayText:t.target.value})}),this.handleSubmit=(t=>{this.onEdited(),t.preventDefault()}),this.state={url:t.url,displayText:t.displayText,isInvalidUrl:!1}}componentDidMount(){Object(sr.e)(sr.c,this.state.displayText)?Xi(this.textInputElementRef):Xi(this.urlInputElementRef)}componentWillUnmount(){this.focusLostTimer&&clearTimeout(this.focusLostTimer)}render(){var t=this.props;const e=t.language,o=t.isInsertMode;return Ki(zi,{tabIndex:0,onClick:this.onClick,onBlur:this.onBlur,onFocus:this.onFocus},void 0,Ki(Hi,{onSubmit:this.handleSubmit},void 0,Ki(Wi,{},void 0,_i(e),":",Ki($i,{innerRef:t=>this.textInputElementRef=t,type:"text",placeholder:Li(e),value:this.state.displayText,onChange:this.handleDisplayTextChange})),Ki(Wi,{},void 0,Fi(e),":",Ki($i,{innerRef:t=>this.urlInputElementRef=t,type:"text",placeholder:Ni(e),value:this.state.url,onChange:this.handleUrlChange})),Ki(Vi,{},void 0,Ki(Zi,{type:"submit",disabled:this.state.isInvalidUrl},void 0,o?Di(e):Pi(e)),this.state.isInvalidUrl?Ki(qi,{},void 0,Ui(e)):null)))}}var Qi=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();function ts(t,e,o){const n=t.getCurrentContent(),r={text:"",url:""};if(e.isCollapsed())return r;if(o)r.text=o.entityText,r.url=n.getEntity(o.entityKey).getData().url;else{r.text=function(t,e){if(t.getStartKey()!==t.getEndKey())throw new Error("Selection must be in a single block");return t.isCollapsed()?"":e.getBlockForKey(t.getStartKey()).getText().slice(t.getStartOffset(),t.getEndOffset())}(e,t.getCurrentContent());const o=Object(sr.e)(sr.c,r.text);o&&(r.url=o.url)}return r}function es(t,e){return n.EditorState.set(t,{currentContent:n.Modifier.removeInlineStyle(t.getCurrentContent(),e,O.k.HIGHLIGHT)})}class os extends s.Component{constructor(t){super(t),this.api=null,this.updateTooltipPosition=null,this.lastEditorSelectionClientRect=null,this.editLinkInSelection=(t=>{const e=this.props.editorState;let o=t,r=e;const i=e.getCurrentContent();if(!Object(er.e)(i,t))return!1;const s=Object(Ci.a)(i,t);if(s){if(i.getEntity(s.entityKey).getType()!==Qn.a.LINK)return!1;o=s.entitySelection}else this.isEditorFocused()&&(this.lastEditorSelectionClientRect=function(){const t=window.getSelection();if(!t.rangeCount)return null;const e=Object(n.getVisibleSelectionRect)(window);return e||(!e&&t.focusNode&&t.focusNode===t.anchorNode?t.focusNode.getBoundingClientRect():null)}());return this.state.linkSelection&&(r=es(e,this.state.linkSelection)),r=function(t,e){return n.EditorState.set(t,{currentContent:n.Modifier.applyInlineStyle(t.getCurrentContent(),e,O.k.HIGHLIGHT)})}(e,o),this.props.onChange(r,()=>{this.setState({linkSelection:o,linkEntity:s})}),!0}),this.hidePopup=(()=>{this.interruptLinkEditing(),this.hideDetailsPopup()}),this.showDetailsPopup=(()=>{this.state.isDetailsPopupActive||this.setState({isDetailsPopupActive:!0})}),this.hideDetailsPopup=(()=>{this.state.isDetailsPopupActive&&this.setState({isDetailsPopupActive:!1})}),this.updatePosition=(()=>{if(!this.updateTooltipPosition)return;const t=this.props.editorState,e=t.getCurrentContent();let o;if(this.state.linkSelection){const t=Object(Ci.a)(e,this.state.linkSelection);if(t){const e=this.props.entityElementRegistry.get(t.entityKey);o=e&&e.getBoundingClientRect()}else this.lastEditorSelectionClientRect&&(o=this.lastEditorSelectionClientRect)}else{const e=Object(er.b)(t);if(e){const t=this.props.entityElementRegistry.get(e.entityKey);o=t&&t.getBoundingClientRect()}}o&&(this.updateTooltipPosition({left:o.left,top:o.bottom}),this.lastEditorSelectionClientRect=null)}),this.handleLink=((t,e)=>{const o=this.state.linkSelection,r=this.props.editorState;let i=r;o&&(o.isCollapsed()||(i=es(r,o)),void 0!==t&&(i=Object(er.h)(i,o,t,e)),this.setState({linkSelection:null,linkEntity:null}),i!==r&&(i=n.EditorState.forceSelection(i,i.getSelection()),this.props.onChange(i)))}),this.onLinkEdited=((t,e)=>{this.handleLink(t,e)}),this.interruptLinkEditing=(()=>this.handleLink()),this.isEditorFocused=(()=>this.props.editorState.getSelection().getHasFocus()),this.onStartEditFocusedLink=(()=>{const t=this.props.editorState,e=Object(er.b)(t);e&&this.editLinkInSelection(e.entitySelection)}),this.onRemoveFocusedLink=(()=>{const t=this.props.editorState,e=Object(er.b)(t);e&&this.props.onChange(Object(er.h)(t,e.entitySelection,""))}),this.renderEditorPopup=(()=>{var t=this.state;const e=t.linkSelection,o=t.linkEntity,n=this.props.editorState;if(!e)return null;var r=ts(n,e,o);const i=r.text,s=r.url;return Qi(Yi,{url:s,displayText:i,isInsertMode:!o,onEdited:this.onLinkEdited,onFocusLost:this.interruptLinkEditing,language:this.props.language})}),this.renderDetailsPopup=(()=>{const t=Object(er.b)(this.props.editorState);return t&&this.isEditorFocused()&&this.state.isDetailsPopupActive?Qi(Mi,{url:t.url,onStartEdit:this.onStartEditFocusedLink,onRemove:this.onRemoveFocusedLink,language:this.props.language}):null}),this.state={isDetailsPopupActive:!1,linkSelection:null,linkEntity:null},this.api={editLinkInSelection:this.editLinkInSelection,hidePopup:this.hidePopup}}componentDidMount(){const t=this.props.onSetApi;this.api&&t&&t(this.api)}componentWillUnmount(){this.props.onSetApi&&this.props.onSetApi(null)}componentDidUpdate(t,e){e.linkSelection===this.state.linkSelection&&t.editorState===this.props.editorState||(this.showDetailsPopup(),this.updatePosition())}render(){return Qi(Go.a,{onSetPositionUpdater:t=>this.updateTooltipPosition=t},void 0,this.renderEditorPopup()||this.renderDetailsPopup())}}var ns=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const rs=h.a.ol.withConfig({componentId:"owf7sw-0"})(["margin: 4px 0px 4px 20px;& > li {margin: 0.4em 0;}"]),is=Object(Ie.Map)({[O.i.ORDERED]:{element:"li",aliasedElements:["li"],wrapper:ns(rs,{})}});var ss=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const as=h.a.div.withConfig({componentId:"s1hl0u2r-0"})(["&:first-child {div:first-child {padding-top: 0;}}& > div {padding: 0.25em 0;}"]),cs=Object(Ie.Map)({[O.n]:{element:"div",aliasedElements:["p"],wrapper:ss(as,{})}});var ls=o("./src/reddit/components/RichTextEditor/RTEState/index.tsx"),ds=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const us=Object(vr.a)(()=>({[O.k.SUPERSCRIPT]:{position:"relative",top:"-0.4em",fontSize:"0.7em",lineHeight:"0.7em"},[O.k.HIGHLIGHT]:{backgroundColor:"#b8e0f9"},[O.k.UNDERLINE]:{textDecoration:"none"},[O.k.MONOSPACE]:{backgroundColor:"rgba(238, 238, 238, 0.8)",caretColor:"#000",color:"#FF006D",fontFamily:v.CODE_FONT_FAMILY,padding:"0.1em 0.2em",fontSize:"0.8em",borderRadius:"3px"}})),ps=Object(p.css)(["margin-top: 1.4em;margin-bottom: 8px;"]),hs=h.a.div.withConfig({componentId:"s4tmjz9-0"})(["",";",""],ps,v.titleFontH1),fs=h.a.div.withConfig({componentId:"s4tmjz9-1"})(["",";",""],ps,v.titleFontH2),ms=h.a.div.withConfig({componentId:"s4tmjz9-2"})(["",";",""],ps,v.titleFontH3),gs=h.a.div.withConfig({componentId:"s4tmjz9-3"})(["",";",""],ps,v.titleFontH4),bs=h.a.div.withConfig({componentId:"s4tmjz9-4"})(["",";",""],ps,v.titleFontH5),ys=h.a.div.withConfig({componentId:"s4tmjz9-5"})(["",";",""],ps,v.titleFontH6),vs=t=>({component:e=>ds(t,{},void 0,a.a.createElement(n.EditorBlock,e)),editable:!0}),xs={[O.g.H1]:vs(hs),[O.g.H2]:vs(fs),[O.g.H3]:vs(ms),[O.g.H4]:vs(gs),[O.g.H5]:vs(bs),[O.g.H6]:vs(ys)},Cs=["italic normal 1em 'Noto Sans'","italic bold 1em 'Noto Sans'","normal bold 1em 'Noto Sans'"],Ss=()=>{const t=document.fonts;t&&t.load&&Cs.forEach(e=>t.load(e))};var Os=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}();const ws=h.a.ul.withConfig({componentId:"s1g3pxpq-0"})(["margin: 4px 0;& > li {margin: 0.4em 0;}"]),ks=Object(Ie.Map)({[O.i.UNORDERED]:{element:"li",aliasedElements:["li"],wrapper:Os(ws,{})}});var Es=o("./node_modules/lodash/dropRightWhile.js"),js=o.n(Es),Ts=o("./node_modules/lodash/flatMap.js"),Is=o.n(Ts),Rs=o("./node_modules/lodash/reduceRight.js"),As=o.n(Rs),Ms=o("./node_modules/lodash/trimEnd.js"),Bs=o.n(Ms),Ks=o("./node_modules/lodash/trimStart.js"),Ds=o.n(Ks),Ps=o("./src/lib/forEachGroup/index.ts");function _s(t,e){const o=[],n=t.withMutations(t=>{for(;t.size&&e(t.first());)o.push(t.first()),t.shift()});return{popped:o,stack:n}}var Fs=o("./src/lib/linkMatchers/customLinks.ts"),Ls=o("./src/lib/unicodeUtils/index.ts"),Ns=o("./src/reddit/models/RichTextJson/nodeMakers.ts");const Us={BOLD:ln.j.bold,ITALIC:ln.j.italic,MONOSPACE:ln.j.monospace,STRIKETHROUGH:ln.j.strikethrough,SUBSCRIPT:ln.j.subscript,SUPERSCRIPT:ln.j.superscript,UNDERLINE:ln.j.underline};var Hs=(t,e)=>zs(t.getBlockMap(),t,e);const zs=(t,e,o)=>{const n=[];let r=t.toStack();for(;r.size;){const t=r.first(),l=t.getType();switch(r=r.shift(),l){case O.g.H1:case O.g.H2:case O.g.H3:case O.g.H4:case O.g.H5:case O.g.H6:n.push(Zs(t,e));break;case O.e:{var i=_s(r,t=>t.getType()===O.e);const o=i.popped;r=i.stack,n.push(Xs([t,...o],e));break}case O.f:{var s=_s(r,t=>t.getType()===O.f);const e=s.popped;r=s.stack,n.push(Gs([t,...e]));break}case O.i.ORDERED:case O.i.UNORDERED:{var a=_s(r,t=>t.getType()===l);const o=a.popped;r=a.stack,n.push(Js([t,...o],e));break}case O.l:{var c=_s(r,t=>Object(O.v)(t.getType()));const o=c.popped;r=c.stack,n.push(Ys([t,...o],e));break}case O.a:{const e=r.first();o&&n.push(Qs(t,e,o)),r=r.shift();break}case O.n:default:n.push(Vs(t,e))}}return n},$s=(t,e)=>{const o=[],n=Object(Ls.b)(t);return Object(Ps.a)(e,{keyFn:t=>t.getStyle()},(e,r,i,s)=>{if(r.isEmpty())return;const a=t.slice(i,s),c=i+(a.length-Ds()(a).length),l=s-(a.length-Bs()(a).length),d=l-c,u=n[c],p=n[l]-u;d>0&&o.push([(t=>t.reduce((t,e)=>e===O.k.UNDERLINE||e===O.k.SUBSCRIPT?t:t|(Us[e]||0)|0,0))(r),u,p])}),o.length?o:null},Ws=(t,e)=>{const o=t.getText(),n=t.getCharacterList(),r=[],i=O.d.includes(t.getType()),s=O.c.includes(t.getType());return Object(Ps.a)(n,{keyFn:(t,n)=>i&&t.getStyle().contains(O.k.SPOILER)?"spoiler":Object(Qn.b)(t.getEntity(),e)?`link-${t.getEntity()}`:"\n"===o[n]?s?"linebreak":"skip":"text"},(t,i,s,a)=>{const c=o.slice(s,a),l=n.slice(s,a).toList();if("text"===i){const t=$s(c,l);r.push(Object(Ns.r)(c,t))}else if("spoiler"===i)r.push(Object(Ns.m)(c));else if(i.startsWith("link-")){const o=e.getEntity(t.getEntity());r.push(((t,e,o)=>{const n=t.getData().url,r="/"===e[0];if(t.getType()===Qn.a.SUBREDDIT_LINK){const t=e.replace(Fs.d,"");return Object(Ns.n)(t,r)}if(t.getType()===Qn.a.USER_LINK){const t=e.replace(Fs.d,"");return Object(Ns.s)(t,r)}const i=$s(e,o);return Object(Ns.h)(e,n,i)})(o,c,l))}else"linebreak"===i&&r.push(Object(Ns.g)())}),r},Vs=(t,e)=>Object(Ns.k)(Ws(t,e)),qs=t=>"text"===t.e?Object(Ns.l)(t.t):"link"===t.e?Object(Ns.h)(t.t,t.u,null):t.e===ln.x?t.c.map(qs):t.e===ln.n?Object(Ns.l)(""):t,Zs=(t,e)=>Object(Ns.e)(O.m[t.getType()],((t,e)=>As()(Is()(Ws(t,e),qs),([t,...e],o)=>{if(!t)return[o];const n=e.length?e:[];return t&&"raw"===o.e&&"raw"===t.e?[Object(Ns.l)(o.t+t.t),...n]:[o,t,...n]},[]))(t,e)),Xs=(t,e)=>Object(Ns.c)(js()(t.map(t=>((t,e)=>t.getText().trim().length?Vs(t,e):Ns.a)(t,e)),t=>t===Ns.a)),Gs=t=>Object(Ns.d)(t.map(t=>Object(Ns.l)(t.getText()))),Js=(t,e)=>{if(!t.length)return Object(Ns.j)([],!1);const o=t[0].getDepth();let n=null;const r=[];let i=[];const s=()=>null!==n||i.length,a=()=>{const t=[];null!==n&&(t.push(n),n=null),i.length&&(t.push(Js(i,e)),i=[]),r.push(Object(Ns.i)(t))};return t.forEach(t=>{t.getDepth()>o?i.push(t):(s()&&a(),n=Object(Ns.k)(Ws(t,e)))}),s()&&a(),Object(Ns.j)(r,t[0].getType()===O.i.ORDERED)},Ys=(t,e)=>{const o=[...t].sort(oo.b),n=o[0];const r=Object(oo.g)(n).colCount,i=_e()(o,r),s=i[0].map(t=>{const o=Object(oo.g)(t).alignment;return Object(Ns.p)(Ws(t,e),o)}),a=i.slice(1).map(t=>t.map(t=>Object(Ns.o)(Ws(t,e))));return Object(Ns.q)(s,a)},Qs=(t,e,o)=>{const n=Object(A.g)(t);if(!n)throw new Error("Invalid atomic block!");const r=n.uploadInfo,i=n.mediaAsset,s=n.makeGif,a=e.getText();if(r){const t=o[r.uploadKey],e=t&&t.metadata.mimetype||"";var c=Object(A.e)(n,o);const i=c.assetId,l=c.thumbnailAssetId;return Object(Y.i)(e)?Object(Ns.b)(i,a):Object(Y.j)(e)?Object(Ns.f)(i,a):Object(Ns.t)(i,a,l,s)}{const t=i.assetId;switch(i.type){case A.a.AnimatedImage:return Object(Ns.b)(t,a);case A.a.Image:return Object(Ns.f)(t,a);case A.a.Video:return Object(Ns.t)(t,a);default:throw new Error("Invalid media type")}}};var ta,ea=o("./src/reddit/constants/elementIds.ts");!function(t){t.Up="up",t.Down="down"}(ta||(ta={}));var oa=t=>{const e=window.getSelection().focusNode;if(!e||!e.parentElement)return;const o=document.getElementById(ea.d),n=o||document.documentElement;if(!n)return;const r=window.innerHeight;var i=e.parentElement.getBoundingClientRect();const s=i.bottom,a=i.top,c=o?0:Tr.j+Tr.D;t===ta.Up&&a<c?n.scrollBy(0,a-c):t===ta.Down&&s>r&&n.scrollBy(0,s-r)},na=(t,e,o)=>{const n={url:o};return t.createEntity(e,"MUTABLE",n)},ra=o("./node_modules/lodash/maxBy.js"),ia=o.n(ra);const sa=(t,e)=>{if(!e)return(t=>{const e=t.id;switch(t.e){case ln.m:return{assetId:e,type:A.a.Image};case ln.a:return{assetId:e,type:A.a.AnimatedImage};case ln.C:return{assetId:e,type:A.a.Video}}})(t);const o=e.id;switch(e.e){case ln.s:{const t=e.s;return{assetId:o,type:A.a.Image,imageUrl:t.u,width:t.x,height:t.y}}case ln.r:{const t=e.s;return{assetId:o,type:A.a.AnimatedImage,imageUrl:t.gif,posterUrl:t.p,dashUrl:t.mp4,width:t.x,height:t.y}}case ln.t:{const t=e.isGif,n=e.dashUrl,r=e.hlsUrl,i=e.p,s=e.x,a=e.y;let c;if(i){c=ia()(i,t=>t.x).u}return{assetId:o,type:A.a.Video,isGif:t,dashUrl:n,hlsUrl:r,posterUrl:c,width:s,height:a}}}};var aa=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();const ca=Object.keys(Us),la=(t,e,o)=>{switch(e.e){case ln.u:return ma(t,e.c,O.b.UNSTYLED);case ln.k:const r=O.h[e.l];return ma(t,e.c||[],r);case ln.p:return pa(t,e);case ln.b:return da(t,e);case ln.c:return void e.c.forEach(e=>ma(t,[e],O.b.CODE_BLOCK));case ln.z:return ua(t,e);case ln.m:case ln.a:case ln.C:return void t.blocks.push(...function(t,e){const o=t.id,r=t.c,i=ln.D(e,o),s=sa(t,i);return[new n.ContentBlock({key:Object(n.genKey)(),type:O.a,data:Object(Ie.Map)({mediaAsset:s})}),Object(M.g)(Object(n.genKey)(),r).merge({type:O.j})]}(e,o))}},da=(t,e)=>{e&&e.c&&e.c.length&&e.c.forEach(e=>e.e===ln.u?ma(t,e.c,O.b.BLOCK_QUOTE):la(t,e))},ua=(t,e)=>{const o=e.h,n=e.c,r=o.length;[o,...n].forEach((e,n)=>e.forEach((e,i)=>{var s=e.c;const a=void 0===s?[]:s,c={alignment:o[i].a,colCount:r,colIndex:i,rowIndex:n};ma(t,a,O.b.TABLE_CELL,c)}))},pa=(t,e,o=0)=>{const n=e.o?O.b.ORDERED_LIST:O.b.UNORDERED_LIST;e.c.forEach(e=>{const r=e.c;if(!r||!r.length)return;var i=aa(r,2);const s=i[0],a=i[1],c=s.e===ln.u?s.c:[];ma(t,c,n,void 0,o),a&&a.e===ln.p&&pa(t,a,o+1)})},ha={[ln.y]:["r/","/r/"],[ln.B]:["u/","/user/"],[ln.v]:["p/",""],[ln.g]:["c/",""]},fa={[ln.y]:Qn.a.SUBREDDIT_LINK,[ln.B]:Qn.a.USER_LINK,[ln.v]:Qn.a.POST_LINK,[ln.g]:Qn.a.COMMENT_LINK},ma=(t,e,o,r={},i,s=!1)=>{const a=t.content;var c=ga(e,a);const l=c.charList,d=c.text,u=c.updatedContent,p=new n.ContentBlock({key:Object(n.genKey)(),characterList:Object(Ie.List)(l),data:Object(Ie.fromJS)(r),depth:i,text:d,type:o});t.content=u||a,s?t.blocks.unshift(p):t.blocks.push(p)},ga=(t,e)=>{let o=e,n="";const r=[];if(t.forEach(t=>{const e=ba(t,o);o=e.updatedContent||o,n+=e.text,r.push(...e.charList)}),n.length!==r.length)throw new Error("Characters length mismatch!");return{charList:r,text:n,updatedContent:o!==e?o:void 0}},ba=(t,e)=>{switch(t.e){case ln.A:{const e=t.t,o=t.f;return{charList:ya(e,o),text:e}}case ln.x:{const o=t.c,r=ga(o,e);return r.charList=r.charList.map(t=>(t=>n.CharacterMetadata.create({style:t.getStyle().add(O.k.SPOILER),entity:t.getEntity()}))(t)),r}case ln.v:case ln.g:case ln.w:{const e=t.t;return{charList:ya(e),text:e}}case ln.y:case ln.B:{var o=aa(ha[t.e],2);const n=o[0],r=o[1],i=(t.l?"/":"")+n+t.t,s=r+t.t,a=na(e,fa[t.e],s),c=a.getLastCreatedEntityKey();return{charList:ya(i,void 0,c),text:i,updatedContent:a}}case ln.o:{const o=t.t,n=t.u,r=t.f,i=na(e,Qn.a.LINK,n),s=i.getLastCreatedEntityKey();return{charList:ya(o,r,s),text:o,updatedContent:i}}default:return{text:"",charList:ya("")}}},ya=(t,e,o=null)=>{const r=n.CharacterMetadata.create({entity:o}),i=Array(t.length).fill(r),s=Object(Ls.a)(t);return e&&e.forEach(t=>{var e=aa(t,3);const r=e[0],a=e[1],c=e[2],l=(t=>{const e=ca.filter(e=>!!(Us[e]&t));return Object(Ie.OrderedSet)(e)})(r),d=a+c,u=n.CharacterMetadata.create({entity:o,style:l});i.fill(u,s[a],s[d])}),i},va=t=>{t.blocks.length&&(t.blocks[0].getType()===O.b.TABLE_CELL&&ma(t,[],O.b.UNSTYLED,void 0,void 0,!0),t.blocks[t.blocks.length-1].getType()===O.b.TABLE_CELL&&ma(t,[],O.b.UNSTYLED))};var xa=(t,e)=>{const o="string"==typeof t?JSON.parse(t):t;if(!o||!o.document||!o.document.length)return null;const r={blocks:[],content:n.ContentState.createFromText("")};o.document.forEach(t=>{la(r,t,e)}),0===r.blocks.length&&ma(r,[],O.b.UNSTYLED),va(r);const i=n.BlockMapBuilder.createFromArray(r.blocks),s=n.SelectionState.createEmpty(i.first().getKey());return r.content.merge({blockMap:i,selectionBefore:s,selectionAfter:s})},Ca=o("./src/reddit/constants/keycodes.ts");o.d(e,"a",function(){return Ia});var Sa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},Oa=function(){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,o,n,r){var i=e&&e.defaultProps,s=arguments.length-3;if(o||0===s||(o={}),o&&i)for(var a in i)void 0===o[a]&&(o[a]=i[a]);else o||(o=i||{});if(1===s)o.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];o.children=c}return{$$typeof:t,type:e,key:void 0===n?null:""+n,ref:null,props:o,_owner:null}}}(),wa=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&(o[n[r]]=t[n[r]])}return o};Object(ls.b)({draftToRTFJson:Hs,getMediaCount:A.f,getPendingThumbnailUploads:A.h,isAllMediaUploaded:A.k});const ka="handled",Ea="not-handled",ja=/^\s*$/,Ta=20,Ia=h()(jr.a).withConfig({componentId:"h7ksvh-0"})(["background: ",";"],t=>Object(nt.c)(t).post),Ra=h()(t=>{t.customPlaceholder,t.initialHeight;var e=wa(t,["customPlaceholder","initialHeight"]);return a.a.createElement("div",e)}).withConfig({componentId:"h7ksvh-1"})(["."," {/* Resize handle has rendering issues in Chrome if background-color is not set */background-color: ",";color: ",";font-family: ",";height: ",";min-height: ","px;overflow: ",";;padding: ","px ","px;resize: vertical;/* Styles for custom placeholder */","}"," {/* Remove 0.1px width border to fix Safari cursor rendering problem. */border-left: none;}."," {/* There is an old scrolling bug in Draft.js when splitting long blocks* https://github.com/facebook/draft-js/issues/304\n* this line is a known workaround for that and can be safely removed when bug is fixed*/overflow: auto;}"],Re.a,t=>Object(nt.c)(t).body,t=>Object(nt.c)(t).bodyText,v.BODY_FONT_FAMILY,t=>t.initialHeight?`${t.initialHeight}px`:"unset",Tr.z,t=>t.initialHeight?"auto":"hidden",Tr.A,Tr.B,t=>t.customPlaceholder?`\n      .public-DraftStyleDefault-block[data-offset-key="${t.customPlaceholder.blockKey}-0-0"]::after {\n        content: '${t.customPlaceholder.text}';\n        color: ${Object(nt.c)(t).actionIcon};\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n      }\n    `:"",".DraftEditor-editorContainer",Re.b),Aa=Object(c.connect)(()=>{const t=(()=>Object(l.createSelector)(t=>t.uploads,(t,e)=>Object(S.e)(S.b.RTE_MEDIA,e.rteState.editorKey),(t,e)=>i()(t,t=>t.key.startsWith(e))))();return Object(l.createStructuredSelector)({editorUploads:t})},t=>({onTrackMediaDrop:e=>t((t,o)=>x.l(o(),e)),retryUpload:e=>t(y.a(e)),startUploads:(e,o,n)=>t(y.b(e,o,n))}));class Ma extends s.Component{constructor(t){super(t),this.blockRenderMap=n.DefaultDraftBlockRenderMap.merge(qr,Gr,qo,is,cs,ks,De),this.editorHeight=null,this.editorRef=null,this.editorRootStyleMutationObserver=null,this.linksControllerApi=null,this.subredditDropdownApi=null,this.tableToolbarControllerApi=null,this.updateSubredditDropdownPosition=null,this.isJustAutocompleteSelected=!1,this.isJustLinkified=!1,this.isMouseDown=!1,this.isJustConvertedToList=!1,this.needSyncScroll=null,this.transforms={[w.BREAK_HEADER_ENTITY]:Zn.b,[w.INSERT_LINE_BREAK]:Zn.e,[w.REDUCE_LIST_INDENT]:Zn.f,[w.RESET_CURRENT_AND_PREVIOUS_BLOCKS]:Zn.g,[w.REMOVE_EXTRA_LIST_ITEM]:Zn.h,[T.d]:br,[T.b]:gr,[T.f]:Zn.d,[T.c]:t=>Object(Zn.c)(O.k.BOLD,t),[T.e]:t=>Object(Zn.c)(O.k.ITALIC,t),[T.g]:t=>Object(Zn.c)(O.k.UNDERLINE,t)},this.setContainerRef=(t=>{const e=this.props.domRef;e&&e(t),this.setState({containerRef:t})}),this.setFocusableContentRef=(t=>this.setState({focusableContentRef:t})),this.clearEditorState=(()=>{this.blur(),this.setState({editorState:this.createInitialState(this.props.rteState.editorKey)})}),this.rteStateChanged=((t,e)=>{const o=Object.assign({},this.props.rteState,{isBound:!0,editorState:t});this.props.onChange(o,e)}),this.hideTooltips=(()=>{this.tableToolbarControllerApi&&this.tableToolbarControllerApi.hideActionButton(),this.linksControllerApi&&this.linksControllerApi.hidePopup(),this.suppressAutocompleteForFocusedLink()}),this.onEditorStyleChanged=(()=>{if(!this.editorRef)return;const t=this.editorRef.refs.editor,e=t.style.height?Number.parseInt(t.style.height):null;this.editorHeight!==e&&(this.hideTooltips(),this.editorHeight=e,e&&this.props.onEditorResize&&this.props.onEditorResize(e))}),this.insertValidatedMedia=(()=>{const t=this.props.editorUploads;var e=this.state;const o=e.editorState,n=e.mediaToInsert;if(!n)return;const r=n.files,i=n.blockKey,s=n.insertionMode,a=r.map(e=>t.find(t=>t.file===e)).filter(Boolean);this.setState({mediaToInsert:null});const c=a.filter(t=>!!t.metadata.mimetype);c.length&&this.onChange(Object(A.j)(o,c,i,s))}),this.focus=(()=>this.editorRef&&this.editorRef.focus()),this.blur=(()=>this.editorRef&&this.editorRef.blur()),this.isFocused=(()=>this.state.editorState.getSelection().getHasFocus()),this.setEditorRef=(t=>this.editorRef=t),this.setSubredditDropdownApi=(t=>this.subredditDropdownApi=t),this.setLinksControllerApi=(t=>this.linksControllerApi=t),this.setTableToolbarControllerApi=(t=>this.tableToolbarControllerApi=t),this.setSubredditDropdownPositionUpdater=(t=>this.updateSubredditDropdownPosition=t),this.getEditorState=(()=>this.state.editorState),this.setEditorState=((t,e)=>{const o=this.state.editorState.getCurrentContent()!==t.getCurrentContent();o&&this.props.readOnly||(this.setState({editorState:t},e),this.rteStateChanged(t,o))}),this.toolbarSetState=(t=>{const e=t.getInlineStyleOverride();let o=t;o.getSelection().getHasFocus()||(o=n.EditorState.forceSelection(o,o.getSelection()),e&&(o=n.EditorState.setInlineStyleOverride(o,e))),this.onChange(o)}),this.onChange=((t,e)=>{let o=t;o=_o(o,this.state.editorState),o=W(o),o=dr(o,this.state.editorState),o=Object(Sr.d)(o,this.state.editorState),this.state.shouldShowFtuMessage&&this.state.editorState.getCurrentContent()!==t.getCurrentContent()&&this.setState({shouldShowFtuMessage:!1}),this.setEditorState(o,e);let n=this.state.suppressAutocompleteForLink;if(n){const e=Object(er.c)(t);e&&e.entityKey===n||(n=null)}this.setState({suppressAutocompleteForLink:n}),this.isJustAutocompleteSelected=!1,this.isJustLinkified=!1,this.isMouseDown=!1,this.isJustConvertedToList=!1}),this.onFocus=(()=>{var t=this.props;const e=t.enableFtuMessage,o=t.onFocus;e&&this.setState({shouldShowFtuMessage:!0}),o&&o()}),this.handleBeforeInput=(t=>{const e=this.state.editorState;if(this.isMouseDown)return ka;if($(e,t))return ka;let o=function(t,e){const o=t.getSelection(),r=o.getFocusOffset();if(!o.isCollapsed()||0===r)return;const i=o.getFocusKey(),s=t.getCurrentContent(),a=s.getBlockForKey(i),c=a.getEntityAt(r-1),l=a.getEntityAt(r);if(!c||l&&l===c)return;const d=s.getEntity(c),u=tr.has(d.getType());if("MUTABLE"===d.getMutability()&&u){const r=n.Modifier.insertText(s,o,e,t.getCurrentInlineStyle());return n.EditorState.push(t,r,"insert-characters")}}(e,t)||e;return(o=Mo(o,t)||o)!==e?(this.onChange(o),ka):Ea}),this.keyBindingFN=(t=>{const e=this.state.editorState,o=e.getSelection();if(t.metaKey&&t.keyCode===Ca.a.K)return w.OPEN_LINK_TOOLTIP;if(t.keyCode===Ca.a.Space){if(xr(e))return w.CONVERT_TO_LIST_ON_SPACE;if(Object(er.d)(e))return w.LINKIFY_ON_SPACE}else if(t.keyCode===Ca.a.Enter){if(t.ctrlKey||t.metaKey)return w.SUBMIT;if(t.shiftKey&&yr(e))return w.INSERT_LINE_BREAK;{const t=this.enterKeyBinding(e);if(t)return t}}else if(t.keyCode===Ca.a.Backspace){if(this.isJustLinkified||this.isJustConvertedToList)return T.h;if(o.isCollapsed()){const t=e.getCurrentContent(),n=o.getEndKey(),r=o.getStartOffset(),i=t.getBlockForKey(n),s=i.getType();if((Object(O.s)(s)||Object(O.q)(s)||Object(O.p)(s))&&0===r&&i.getLength()>0){const e=t.getBlockBefore(n);if(!e||e.getType()!==s)return w.MAKE_PLAIN_BLOCK}}}return Object(n.getDefaultKeyBinding)(t)}),this.handleKeyCommand=(t=>{const e=this.state.editorState;let o=t,r=null;const i=t=>{let e=t;if(r){var o=r;const t=o.selection,n=o.url;e=Object(er.f)(e,t,n)}return this.onChange(e),this.isJustLinkified=!!r,ka};if(o===w.SUBMIT)this.props.onSubmit();else{if(o===w.CONVERT_TO_LIST_ON_SPACE){const t=i(Cr(e));return this.isJustConvertedToList=!0,t}if(o===w.LINKIFY_ON_SPACE)return r=Object(er.d)(e),i(Object(Zn.a)(e));if(o===w.LINKIFY_ON_ENTER&&(r=Object(er.d)(e),!(o=this.enterKeyBinding(e,!1))))return i(Object(Zn.d)(e))}if(o===w.OPEN_LINK_TOOLTIP)return this.onToolbarLinkButtonClick(),ka;if(o===w.MAKE_PLAIN_BLOCK){return i(Object(Zn.i)(O.n,e))}if(o===w.EXEC_TABLE_ON_ENTER_HANDLER)return i(this.tableOnEnterHandler.handle(e));const s=this.transforms[o];if(s){const t=s(e);if(t)return i(t)}const a=n.RichUtils.handleKeyCommand(e,o);return a?i(a):Ea}),this.handleOnTab=(t=>{if(this.subredditDropdownApi&&this.subredditDropdownApi.selectCurrent())return void t.preventDefault();const e=this.state.editorState;let o=To(t,e);if(o=o||mr(t,e))return void this.onChange(o);const r=n.RichUtils.onTab(t,e,2);this.onChange(r)}),this.handleOnUpArrow=(t=>{if(this.subredditDropdownApi&&this.subredditDropdownApi.moveUp())return void t.preventDefault();const e=Io(t,this.state.editorState)||H(t,this.state.editorState);e&&this.onChange(e),this.needSyncScroll=ta.Up}),this.handleOnDownArrow=(t=>{if(this.subredditDropdownApi&&this.subredditDropdownApi.moveDown())return void t.preventDefault();const e=Ro(t,this.state.editorState)||z(t,this.state.editorState);e&&this.onChange(e),this.needSyncScroll=ta.Down}),this.handleReturn=(t=>{const e=N(this.state.editorState);return e?(this.onChange(e),t.preventDefault(),ka):this.subredditDropdownApi&&this.subredditDropdownApi.selectCurrent()?(t.preventDefault(),ka):Ea}),this.suppressAutocompleteForFocusedLink=(()=>{const t=Object(er.c)(this.state.editorState);t&&this.state.suppressAutocompleteForLink!==t.entityKey&&this.setState({suppressAutocompleteForLink:t.entityKey})}),this.handleEscape=(t=>{this.suppressAutocompleteForFocusedLink()}),this.handleOnCopy=(t=>{this.editorRef&&eo(this.state.editorState,this.editorRef,t)}),this.handleOnCut=(t=>{const e=this.state.editorState;if(!this.editorRef)return;if(!eo(e,this.editorRef,t))return;const o=vo(e)||L(e)||Object(A.d)(e);o&&this.onChange(o)}),this.handleOnPaste=(t=>{const e=this.state.editorState;if(!this.editorRef)return;if(this.handleFilesPaste(t,e),t.isPropagationStopped())return;const o=xi(e,this.editorRef,t);o&&this.onChange(o)}),this.handleFilesPaste=((t,e)=>{const o=t.clipboardData.files;if(o&&o.length){const n=Array.from(o),r=e.getSelection().getEndKey();this.insertMediaFiles({files:n,blockKey:r,insertionMode:M.a.after,filesSource:b.FileSource.Clipboard}),t.stopPropagation()}}),this.handleOnMouseDown=(t=>{this.isMouseDown=!0}),this.handleOnMouseUp=(t=>{this.isMouseDown=!1}),this.handleDroppedFiles=((t,e)=>ka),this.handleDrop=((t,e,o)=>ka),this.handlePastedText=((t,e)=>ka),this.onSubredditSuggestionSelected=(t=>{this.onChange(Object(er.g)(this.state.editorState,t)),this.isJustAutocompleteSelected=!0}),this.onToolbarLinkButtonClick=(()=>{if(!this.linksControllerApi)return;const t=this.state.editorState;this.linksControllerApi.editLinkInSelection(t.getSelection())||Object(g.b)(void 0,"Current selection cannot be edited by link editor!")}),this.onToolbarFtuTooltipClick=(()=>{this.setState({shouldShowFtuMessage:!1})}),this.handleSwitchToMarkdownMode=(()=>{const t=this.state.editorState,e=ls.a.toRichTextJSON(Object.assign({},this.props.rteState,{isBound:!0,editorState:t}));this.props.onSwitchEditorMode(C.h.MARKDOWN,e),this.state.confirmModalOpen&&this.toggleConfirmModal()}),this.onToolbarMarkdownSwitchClick=(()=>{const t=this.state.editorState;t&&ur(t)?this.setState({confirmModalOpen:!0}):this.handleSwitchToMarkdownMode()}),this.toggleConfirmModal=(()=>{this.setState({confirmModalOpen:!this.state.confirmModalOpen})}),this.onToolbarOverflowMenuClick=(()=>{this.setState({shouldShowFtuMessage:!1})}),this.insertMediaFiles=(async t=>{this.setState({mediaToInsert:t});const e=t.files,o=t.filesSource,n=e.slice(0,Ta);await this.props.startUploads(n,o,this.props.rteState.editorKey),this.insertValidatedMedia()}),this.onRetryUpload=(t=>{this.props.retryUpload(t)}),this.onFilesSelect=(t=>{const e=this.state.editorState.getSelection().getEndKey();this.insertMediaFiles({files:t,blockKey:e,insertionMode:M.a.after,filesSource:b.FileSource.FileSelector})}),this.onFilesDrop=((t,e,o)=>{this.props.onTrackMediaDrop(t),this.insertMediaFiles({files:t,blockKey:e,insertionMode:o,filesSource:b.FileSource.DragAndDrop})}),this.onBlockMove=((t,e,o)=>{const n=this.state.editorState,r=Object(A.m)(n,t,e,o);r&&this.onChange(r)}),this.getAtomicBlocksRenderConfig=(()=>({component:Te,props:{getEditorState:this.getEditorState,onChange:this.onChange,onRetryUpload:this.onRetryUpload,rteFocusableContentRef:this.state.focusableContentRef}})),this.blockRendererFn=(t=>{const e=t.getType();return e===O.a?this.getAtomicBlocksRenderConfig():e in xs?xs[e]:void 0}),this.renderToolbar=(t=>a.a.createElement(le.b,t)),this.entityElementRegistry=Jn(),this.tableOnEnterHandler=new Ao;const e=t.initialHeight,o=t.rteState;let r;o.isBound?r=o.editorState:Object(ln.E)(o.initialRTJSON)?r=this.createInitialState(o.editorKey):(r=n.EditorState.createWithContent(xa(o.initialRTJSON,o.mediaMetadataMap),this.editorDecorators()),r=this.moveSelectionToEnd(r)),this.state={containerRef:null,confirmModalOpen:!1,editorState:r,focusableContentRef:null,initialHeight:e,mediaToInsert:null,shouldShowFtuMessage:!1,suppressAutocompleteForLink:null}}editorDecorators(){return new n.CompositeDecorator([Er(),ir()])}moveSelectionToEnd(t){const e=t.getCurrentContent().getBlockMap(),o=e.last().getKey(),r=e.last().getLength(),i=new n.SelectionState({anchorKey:o,anchorOffset:r,focusKey:o,focusOffset:r});return n.EditorState.acceptSelection(t,i)}createInitialState(t){return n.EditorState.createWithContent(n.ContentState.createFromBlockArray([new n.ContentBlock({key:`${t}_initial`})]),this.editorDecorators())}componentDidMount(){if(this.props.rteRef&&this.props.rteRef(this),m.a.write(Ss),this.rteStateChanged(this.state.editorState,!1),this.editorRef){const t=this.editorRef.refs.editor;t.addEventListener("scroll",this.hideTooltips),this.editorRootStyleMutationObserver=new MutationObserver(this.onEditorStyleChanged),this.editorRootStyleMutationObserver.observe(t,{attributes:!0,attributeFilter:["style"]})}}componentDidUpdate(t,e){const o=this.getLinkForAutocomplete();if(o&&this.updateSubredditDropdownPosition){const t=this.entityElementRegistry.get(o.entityKey);if(t){var n=t.getBoundingClientRect();const e=n.left,o=n.bottom;this.updateSubredditDropdownPosition({left:e,top:o})}}this.needSyncScroll&&(oa(this.needSyncScroll),this.needSyncScroll=null)}componentWillUnmount(){if(this.props.rteRef&&this.props.rteRef(null),this.insertValidatedMedia=(()=>{}),this.editorRef){this.editorRef.refs.editor.removeEventListener("scroll",this.hideTooltips)}this.editorRootStyleMutationObserver&&(this.editorRootStyleMutationObserver.disconnect(),this.editorRootStyleMutationObserver=null)}componentWillReceiveProps(t){t.rteState!==this.props.rteState&&t.rteState.isBound&&t.rteState.editorState!==this.state.editorState&&this.setState({editorState:t.rteState.editorState})}shouldComponentUpdate(t,e){if(e!==this.state)return!0;if(!(t.rteState.isBound&&t.rteState.editorState===this.state.editorState))return!0;return!u()(t,this.props,(t,e,o)=>"rteState"===o||void 0)}enterKeyBinding(t,e=!0){const o=t.getCurrentContent(),n=t.getSelection(),r=n.getStartKey(),i=n.getEndKey(),s=n.getEndOffset(),a=o.getBlockForKey(r).getType(),c=o.getBlockForKey(i),l=c.getType(),d=s===c.getText().length;if(a===O.l||l===O.l)return w.EXEC_TABLE_ON_ENTER_HANDLER;if(n.isCollapsed()){if(e&&Object(er.d)(t))return w.LINKIFY_ON_ENTER;if(Object(O.r)(l)&&d)return w.BREAK_HEADER_ENTITY;if(Object(O.s)(l)){if(ja.test(c.getText()))return c.getDepth()>0?w.REDUCE_LIST_INDENT:w.REMOVE_EXTRA_LIST_ITEM}else if(l===O.e){const t=o.getBlockBefore(i);if(t&&t.getType()===O.e&&ja.test(t.getText())&&ja.test(c.getText()))return w.RESET_CURRENT_AND_PREVIOUS_BLOCKS}else if(l===O.f){const t=o.getBlockBefore(i),e=o.getBlockAfter(i);if(!c.getText()&&t&&t.getType()===O.f&&!t.getText()&&(!e||e.getType()!==O.f))return w.RESET_CURRENT_AND_PREVIOUS_BLOCKS}}}getLinkForAutocomplete(){var t=this.state;const e=t.editorState,o=t.suppressAutocompleteForLink;if(!this.isJustAutocompleteSelected&&e.getSelection().getHasFocus()){const t=Object(er.c)(e);if(t&&t.entityKey!==o)return t}}renderSubredditDropdown(){const t=this.getLinkForAutocomplete();return t?Oa(Go.a,{onSetPositionUpdater:this.setSubredditDropdownPositionUpdater},void 0,Oa($r,{onDropdownApi:this.setSubredditDropdownApi,substring:t.subredditName,onSelect:this.onSubredditSuggestionSelected})):null}render(){var t=this.props;const e=t.className;var o=t.allowMedia;const r=void 0!==o&&o,i=t.dataTestId,s=t.destSubreddit,c=t.rteState,l=t.isOverlay,d=t.language,u=t.placeholderText;var p=t.toolbarPosition;const h=void 0===p?"top":p;var m=t.renderToolbar;const g=void 0===m?this.renderToolbar:m,b=c.editorKey;var y=this.state;const v=y.containerRef,x=y.editorState,C=y.mediaToInsert,S=y.shouldShowFtuMessage,O=y.confirmModalOpen,w=this.props.readOnly||!!C,E=k(x),T=E?{text:u,blockKey:E}:null,I=g({allowMedia:r,destSubreddit:s,editorKey:b,editorState:x,isOverlay:!!l,language:d,onChange:this.toolbarSetState,onFilesSelect:this.onFilesSelect,trackOnClick:this.props.trackToolbarClick,readOnly:w,onFtuTooltipClick:this.onToolbarFtuTooltipClick,onLinkButtonClick:this.onToolbarLinkButtonClick,onMarkdownButtonClick:this.onToolbarMarkdownSwitchClick,onOverflowMenuClick:this.onToolbarOverflowMenuClick,shouldShowFtuMessage:S});return a.a.createElement("div",{className:e,ref:this.setContainerRef},Oa(Ia,{isFocused:this.isFocused(),innerRef:this.setFocusableContentRef,"data-redditstyle":!0},void 0,"top"===h&&I,v&&Oa(qn,{editorState:x,readOnly:w,language:d,onChange:this.onChange,onSetApi:this.setTableToolbarControllerApi,rteDomRef:v}),Oa(Ra,{"data-test-id":i,initialHeight:this.props.initialHeight,onCopyCapture:this.handleOnCopy,onCutCapture:this.handleOnCut,onPasteCapture:this.handleOnPaste,onMouseDown:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,customPlaceholder:T},void 0,Oa(si,{allowMedia:r&&!w,onBlockMove:this.onBlockMove,onFilesDrop:this.onFilesDrop,editorState:x,onChange:this.onChange},void 0,Oa(Yn.Provider,{value:this.entityElementRegistry},void 0,a.a.createElement(n.Editor,{readOnly:w,ref:this.setEditorRef,blockRendererFn:this.blockRendererFn,blockRenderMap:this.blockRenderMap,editorKey:b,editorState:x,keyBindingFn:this.keyBindingFN,handleBeforeInput:this.handleBeforeInput,handleKeyCommand:this.handleKeyCommand,handlePastedText:this.handlePastedText,handleDroppedFiles:this.handleDroppedFiles,handleDrop:this.handleDrop,onBlur:this.props.onBlur,onChange:this.onChange,onFocus:this.onFocus,onTab:this.handleOnTab,onUpArrow:this.handleOnUpArrow,onDownArrow:this.handleOnDownArrow,onEscape:this.handleEscape,spellCheck:!0,handleReturn:this.handleReturn,customStyleMap:us()})))),"bottom"===h&&I,Oa(os,{editorState:x,entityElementRegistry:this.entityElementRegistry,language:d,onSetApi:this.setLinksControllerApi,onChange:this.onChange}),this.renderSubredditDropdown()),O&&Oa(j.a,{toggleModal:this.toggleConfirmModal,onConfirm:this.handleSwitchToMarkdownMode,actionText:"continue",cancelActionText:"cancel",headerText:Object(f.a)(d,"postCreation.discard.richTextFormatting.title"),modalText:Object(f.a)(d,"postCreation.discard.richTextFormatting.body"),trackClick:()=>{}}))}}e.b=Aa(Object(Ir.b)(t=>a.a.createElement(Ma,Sa({key:t.rteState.editorKey},t))))},"./src/reddit/components/RichTextEditor/media/MediaBlock/Toolbar/index.m.less":function(t,e,o){t.exports={container:"_3hDtN0e5U4EpahGe25ye-b",content:"_3wXzBVn-uBvRcixZwQWkNX"}},"./src/reddit/components/RichTextEditor/media/helpers.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"g",function(){return m}),o.d(e,"o",function(){return g}),o.d(e,"j",function(){return b}),o.d(e,"l",function(){return y}),o.d(e,"n",function(){return v}),o.d(e,"c",function(){return x}),o.d(e,"d",function(){return C}),o.d(e,"k",function(){return O}),o.d(e,"f",function(){return w}),o.d(e,"i",function(){return k}),o.d(e,"h",function(){return E}),o.d(e,"m",function(){return j}),o.d(e,"b",function(){return T}),o.d(e,"e",function(){return R});var n,r=o("./node_modules/draft-js/lib/Draft.js"),i=o("./node_modules/immutable/dist/immutable.js"),s=o("./node_modules/lodash/flatten.js"),a=o.n(s),c=o("./node_modules/lodash/last.js"),l=o.n(c),d=o("./src/reddit/helpers/media/index.ts"),u=o("./src/reddit/models/Upload/index.ts"),p=o("./src/reddit/components/RichTextEditor/constants/editorChangeTypes.ts"),h=o("./src/reddit/components/RichTextEditor/helpers/common.ts"),f=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");!function(t){t[t.Image=0]="Image",t[t.AnimatedImage=1]="AnimatedImage",t[t.Video=2]="Video"}(n||(n={}));const m=t=>{if(!Object(f.o)(t.getType()))return;const e=t.getData(),o=e.get("mediaAsset"),n=e.get("uploadInfo");if(!o&&!n)return;const r=e.get("thumbnail");return{makeGif:e.get("makeGif"),thumbnail:r,uploadInfo:n,mediaAsset:o}},g=(t,e,o)=>{let n=t.getCurrentContent();const s=n.getBlockForKey(e),a=m(s),c=a&&a.uploadInfo;if(!c)throw new Error("Block must contain `uploadInfo` data");if(o.makeGif===a.makeGif&&o.thumbnail===a.thumbnail)return t;const l=Object(i.Map)(o),d=n.getBlockMap().toKeyedSeq().filter(t=>{const e=m(t);return!!e&&!!e.uploadInfo&&e.uploadInfo.uploadKey===c.uploadKey}).map(t=>t.mergeIn(["data"],l));return n=(n=n.mergeIn(["blockMap"],d)).merge({selectionAfter:t.getSelection()}),r.EditorState.push(t,n,p.a)},b=(t,e,o,n)=>{let s=t.getCurrentContent();const c=a()(e.map(t=>{const e=Object(d.e)(t.metadata.mimetype),o=(t=>{if(t&&t.metadata.videoFirstFrameUrl)return{url:t.metadata.videoFirstFrameUrl,time:0}})(t);return[new r.ContentBlock({key:Object(r.genKey)(),type:f.a,data:Object(i.Map)({uploadInfo:{mediaType:e,uploadKey:t.key},thumbnail:o})}),new r.ContentBlock({key:Object(r.genKey)(),type:f.j})]}));s=Object(h.f)(s,o,c,n);const u=r.EditorState.push(t,s,p.d),m=l()(c);return r.EditorState.forceSelection(u,Object(h.b)(m,!0))};function y(t,e){return t.isCollapsed()&&t.getStartKey()===e&&0===t.getStartOffset()&&0===t.getEndOffset()}function v(t,e){const o=t.getCurrentContent().getBlockAfter(e);return r.EditorState.forceSelection(t,Object(h.b)(o,!0))}const x=(t,e,o=!0)=>{let n=t.getCurrentContent();const i=n.getBlockAfter(e);n=Object(h.h)(n,e),i&&Object(f.u)(i.getType())&&(n=Object(h.h)(n,i.getKey()));let s=o?r.EditorState.push(t,n,p.e):r.EditorState.set(t,{currentContent:n});return s=r.EditorState.forceSelection(s,n.getSelectionAfter())},C=t=>{let e=t.getCurrentContent();const o=t.getSelection();e=r.Modifier.removeRange(e,o,"forward");let n=r.EditorState.push(t,e,p.e);return n=r.EditorState.forceSelection(n,e.getSelectionAfter())},S=t=>t.getBlockMap().toSeq().filter(t=>!!t&&!!m(t)),O=(t,e)=>t.getBlockMap().toSeq().filter(t=>{const o=m(t),n=o&&o.uploadInfo&&o.uploadInfo.uploadKey;return!(!n||e[n]&&e[n].url)}).isEmpty(),w=t=>{const e=S(t),o={gifvideo:0,image:0,video:0,total:0};return e.forEach(t=>{const e=m(t);let r;r=e.makeGif?"gifvideo":e.uploadInfo&&"video"===e.uploadInfo.mediaType||e.mediaAsset&&e.mediaAsset.type===n.Video?"video":"image",o[r]++,o.total++}),o},k=t=>!S(t).isEmpty(),E=(t,e)=>{const o=S(t).map(t=>{const o=m(t),n=o.uploadInfo,r=o.thumbnail;if(!n||!r)return;const i=I(o),s=e[i];return s&&s.url?void 0:Object.assign({},r,{uploadKey:i})}).filter(Boolean).toArray();return o.length?o:void 0},j=(t,e,o,n)=>{let i=t.getCurrentContent();const s=i.getBlockForKey(e),a=i.getBlockAfter(e);if(e===o||o===a.getKey())return;const c=i.getBlockMap().remove(e).remove(a.getKey());i=i.set("blockMap",c),i=Object(h.f)(i,o,[s,a],n);const l=r.EditorState.push(t,i,p.d);return r.EditorState.forceSelection(l,Object(h.b)(a,!0))},T=(t,e,o=h.a.after)=>{const n=Object(h.g)(),i=Object(h.f)(t.getCurrentContent(),e,[n],o),s=r.EditorState.push(t,i,p.d);return r.EditorState.forceSelection(s,r.SelectionState.createEmpty(n.getKey()))},I=t=>t.thumbnail&&t.uploadInfo?`${t.uploadInfo.uploadKey}-thumbnail-${t.thumbnail.time}`:"",R=(t,e)=>{let o="",n="";if(t.uploadInfo){const r=e[t.uploadInfo.uploadKey];r&&r.url&&(o=Object(u.c)(r.url));const i=e[I(t)];i&&i.url&&(n=Object(u.c)(i.url))}return{assetId:o,thumbnailAssetId:n}}},"./src/reddit/components/RichTextEditor/spoiler/helpers.ts":function(t,e,o){"use strict";o.d(e,"b",function(){return i}),o.d(e,"a",function(){return s});var n=o("./src/lib/forEachGroup/index.ts"),r=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");const i=t=>t.getStyle().has(r.k.SPOILER);function s(t,e,o){const r=t.getCharacterList();Object(n.a)(r,{keyFn:i},(t,o,n,r)=>{o&&e(n,r)})}},"./src/reddit/components/RichTextEditor/table/helpers.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return c}),o.d(e,"g",function(){return l}),o.d(e,"m",function(){return u}),o.d(e,"n",function(){return p}),o.d(e,"j",function(){return h}),o.d(e,"l",function(){return f}),o.d(e,"f",function(){return m}),o.d(e,"k",function(){return g}),o.d(e,"c",function(){return b}),o.d(e,"h",function(){return y}),o.d(e,"b",function(){return v}),o.d(e,"i",function(){return x}),o.d(e,"e",function(){return C}),o.d(e,"o",function(){return S}),o.d(e,"d",function(){return O});var n=o("./node_modules/draft-js/lib/Draft.js"),r=o("./node_modules/immutable/dist/immutable.js"),i=o("./src/reddit/models/RichTextJson/index.ts"),s=o("./src/reddit/components/RichTextEditor/helpers/sliceContiguousBlocks.ts"),a=o("./src/reddit/components/RichTextEditor/styleAndBlockTypes.ts");const c={[i.e]:"left",[i.f]:"right",[i.d]:"center"},l=t=>{const e=t.getData();return{colIndex:e.get("colIndex"),rowIndex:e.get("rowIndex"),colCount:e.get("colCount"),alignment:e.get("alignment")}},d=["data"],u=(t,e)=>t.mergeIn(d,e),p=(t,e,o)=>t.merge({text:t.getText().slice(e,o),characterList:t.getCharacterList().slice(e,o)}),h=(t,e,o="",r)=>{const i=e.map(t=>t.getText()).join(o),s=o?r||n.CharacterMetadata.create():null,a=[];return e.forEach(t=>{a.push(...t.getCharacterList().toArray()),s&&e.length>1&&a.push(s)}),t.merge({text:i,characterList:a})},f=(t,e)=>{const o=[];for(let i=0;i<e;i++)for(let e=0;e<t;e++)o.push(new n.ContentBlock({key:Object(n.genKey)(),type:a.l,data:Object(r.Map)({colCount:t,colIndex:e,rowIndex:i})}));return o},m=(t,e)=>({minCol:Math.min(t.colIndex,e.colIndex),minRow:Math.min(t.rowIndex,e.rowIndex),maxCol:Math.max(t.colIndex,e.colIndex),maxRow:Math.max(t.rowIndex,e.rowIndex)}),g=(t,e)=>{var o=m(t,e);const n=o.minCol,r=o.minRow,i=o.maxCol,s=o.maxRow;return(t,e)=>r<=t&&t<=s&&n<=e&&e<=i},b=(t,e)=>t.rowIndex<e.rowIndex?-1:t.rowIndex>e.rowIndex?1:t.colIndex-e.colIndex,y=(t,e)=>t===e||!(!t||!e)&&0===b(t,e),v=(t,e)=>b(l(t),l(e)),x=t=>{if(Object(a.v)(t.getType())){return 0===l(t).rowIndex}return!1},C=(t,e,o)=>{const n=(e,o)=>{if(e){const n=Object(s.a)(t,e);return n&&o&&-1!==n.blocks.indexOf(o)?[n,n]:[n,o?Object(s.a)(t,o):null]}return o?n(o,null).reverse():[null,null]};return n(Object(a.v)(e.getType())?e:null,Object(a.v)(o.getType())?o:null)},S=(t,e,o,n=!1)=>{const r={isBackward:n};return e&&(r.anchorKey=e.getKey(),r.anchorOffset=n?e.getLength():0),o&&(r.focusKey=o.getKey(),r.focusOffset=n?0:o.getLength()),t.merge(r)},O=t=>{if(!t.length)return[];const e=t[0].length;return t.map((t,o)=>t.map((t,n)=>u(t,{rowIndex:o,colIndex:n,colCount:e})))}},"./src/reddit/components/ThumbnailSelector/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/lodash/debounce.js"),i=o.n(r),s=o("./node_modules/lodash/range.js"),a=o.n(s),c=o("./node_modules/react/index.js"),l=o.n(c),d=o("./bundled-modules/styled-components/styled-components.min.js"),u=o.n(d),p=o("./src/app/strings/index.ts"),h=o("./src/higherOrderComponents/asModal.tsx"),f=o("./src/reddit/controls/Button/index.tsx"),m=o("./src/reddit/helpers/media/index.ts"),g=o("./src/reddit/helpers/styles/mixins/loading.ts"),b=o("./src/reddit/icons/svgs/Close/index.tsx"),y=o("./src/reddit/layout/row/Inline/index.tsx"),v=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),x=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const C=10,S=Object(p.e)("postCreation.cancel"),O=Object(p.e)("postCreation.select"),w=Object(p.e)("postCreation.mediaInput.chooseThumbnail"),k=Object(h.a)(u.a.div.withConfig({componentId:"uv6zfr-0"})(["box-sizing: border-box;max-width: 80vw;border-radius: 4px;background-color: ",";border: 1px solid ",";box-shadow: 0 0 0 1px ",",0px 2px 3px 2px ",";"],t=>Object(v.c)(t).body,t=>Object(v.c)(t).line,t=>Object(v.c)(t).line,t=>Object(v.c)(t).line)),E=u()(y.a).withConfig({componentId:"uv6zfr-1"})(["font-size: 16px;padding: 8px 16px;"]),j=u()(b.a).withConfig({componentId:"uv6zfr-2"})(["height: 16px;width: 16px;padding: 4px;fill: ",";"],t=>Object(v.c)(t).actionIcon),T=u.a.div.withConfig({componentId:"uv6zfr-3"})(["cursor: pointer;margin-left: auto;"]),I=u.a.div.withConfig({componentId:"uv6zfr-4"})(["padding: 8px 0;border-bottom: 1px solid ",";border-top: 1px solid ",';display: flex;overflow-x: scroll;max-width: 600px;&:after {content: "";flex: 0 0 4px}'],t=>Object(v.c)(t).line,t=>Object(v.c)(t).line),R=u.a.img.withConfig({componentId:"uv6zfr-5"})(["max-width: 100%;max-height: 100%;border-radius: 4px;"]),A=u()(t=>l.a.createElement("div",{className:t.className,onClick:t.onClick,ref:t.elementRef},t.thumbnail.url&&x(R,{src:t.thumbnail.url}))).withConfig({componentId:"uv6zfr-6"})(["display: flex;flex: 0 0 auto;align-items: center;justify-content: center;height: 100px;width: 178px;margin: 4px;cursor: pointer;border-radius: 4px;border: ",";",";"],t=>t.isSelected?`3px solid ${Object(v.c)(t).active}`:`3px solid ${Object(v.c)(t).line}`,g.b),M=u()(y.a).withConfig({componentId:"uv6zfr-7"})(["padding: 16px 10px;justify-content: flex-end;"]),B=f.e,K=u()(f.h).withConfig({componentId:"uv6zfr-8"})(["margin-right: 10px;"]),D=(t,e)=>{if(1===t)return[0];const o=a()(0,e,e/(t-1));return o.push(e),o.map(t=>+t.toFixed(2))};e.a=class extends l.a.Component{constructor(t){super(t),this.isThumbnailsAreGenerating=!1,this.setSelectedElementRef=(t=>this.selectedElement=t),this.setThumbnails=i()(t=>this.setState({thumbnails:t}),100),this.scrollIntoView=(()=>{this.selectedElement&&this.selectedElement.scrollIntoView({})}),this.setSelected=(t=>{this.setState({selectedIndex:t})}),this.onSelectButton=(()=>{const t=this.state.selectedIndex,e=this.state.thumbnails[t];this.props.onSelect({time:e.time,url:e.url})});var e=this.props,o=e.thumbnailsCount;const n=void 0===o?C:o,r=e.selected,s=e.videoDuration,a=D(n,s).map(t=>({time:t,url:r&&r.time===t?r.url:void 0})),c=r?a.findIndex(t=>r.time===t.time):-1;this.state={thumbnails:a,selectedIndex:c}}componentDidMount(){this.scrollIntoView(),this.props.isOpen&&this.generateVideoThumbnails()}componentDidUpdate(t){this.props.isOpen&&!t.isOpen&&(this.scrollIntoView(),this.generateVideoThumbnails())}async generateVideoThumbnails(){const t=this.state.thumbnails;if(this.isThumbnailsAreGenerating||!t.find(t=>!t.url))return;this.isThumbnailsAreGenerating=!0;const e=document.createElement("video"),o=document.createElement("canvas");await Object(m.l)(e,this.props.videoSource);let n=0;e.currentTime=t[n].time,await Object(m.d)(e,o,e=>(t[n].url=e.dataUrl,n++,this.setThumbnails(t),n<t.length?t[n].time:null)),this.setState({thumbnails:t}),this.isThumbnailsAreGenerating=!1}render(){if(!this.props.isOpen)return null;var t=this.state;const e=t.selectedIndex,o=t.thumbnails;return x(k,{withOverlay:!0},void 0,x(E,{},void 0,w(this.props.language),x(T,{onClick:this.props.onToggleModal},void 0,x(j,{}))),x(I,{},void 0,o.map((t,o)=>x(A,{elementRef:o===e?this.setSelectedElementRef:void 0,gradientType:"posts",isLoading:!t.url,onClick:()=>this.setSelected(o),isSelected:o===e,thumbnail:t},o))),x(M,{},void 0,x(K,{onClick:this.props.onToggleModal},void 0,S(this.props.language)),x(B,{onClick:this.onSelectButton},void 0,O(this.props.language))))}}},"./src/reddit/constants/elementClassNames.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return n}),o.d(e,"b",function(){return r}),o.d(e,"c",function(){return i}),o.d(e,"e",function(){return s}),o.d(e,"f",function(){return a}),o.d(e,"g",function(){return c}),o.d(e,"h",function(){return l}),o.d(e,"d",function(){return d});const n="public-DraftEditor-content",r="DraftEditor-root",i="public-DraftStyleDefault-block",s="hidden",a="hovered",c="scrollerItem",l="threadline",d="header-user-dropdown"},"./src/reddit/controls/ToggleSwitch/index.tsx":function(t,e,o){"use strict";var n,r=o("./node_modules/polished/dist/polished.es.js"),i=(o("./node_modules/react/index.js"),o("./bundled-modules/styled-components/styled-components.min.js")),s=o.n(i),a=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),c=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});const l=s.a.div.withConfig({componentId:"s1n0x1vx-0"})(["background-color: #FFFFFF;box-shadow: 0 0 0 1px rgba(0,0,0,0.1), 0 2px 3px 0 rgba(0,0,0,0.2);transition: left 0.15s linear;border-radius: ","%;width: ","%;&::after {content: '';padding-top: 100%;display: block;}"],.57*100,.57*100);e.a=s()(t=>c("button",{"aria-checked":t.on,className:t.className,id:t.id,role:"switch",tabIndex:t.tabIndex,type:"button",onClick:()=>!t.disabled&&t.onToggle&&t.onToggle()},void 0,c(l,{}))).withConfig({componentId:"s1n0x1vx-1"})(["display: flex;justify-content: ",";background-color: ",";border: 2px solid transparent;border-radius: 100px;cursor: ",";position: relative;width: 35px;transition: border-color 0.15s linear,background-color 0.15s linear;"," {","}"],t=>t.on&&!t.disabled?"flex-end":"flex-start",t=>t.on&&!t.disabled?t.activeColorOverride||Object(a.c)(t).active:Object(r.f)(Object(a.c)(t).navIcon,.08),t=>t.disabled?"default ":"pointer",l,t=>t.disabled?"box-shadow: none;":"")},"./src/reddit/helpers/getOverlayContainerById/index.ts":function(t,e,o){"use strict";e.a=(t=>null)},"./src/reddit/icons/svgs/FormattingHyperlink/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});e.a=i()(t=>a("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,a("path",{d:"M17.15,2.86a6.33,6.33,0,1,0-9,9A1,1,0,0,0,9.6,10.4a4.39,4.39,0,1,1,4.92.83,7.41,7.41,0,0,1,.14,1.44c0,.23,0,.46,0,.68a6.33,6.33,0,0,0,2.51-10.5Z"}),a("path",{d:"M10.4,8.19a1,1,0,0,0,0,1.41,4.39,4.39,0,1,1-4.92-.83,7.41,7.41,0,0,1-.14-1.44c0-.23,0-.46,0-.68a6.33,6.33,0,1,0,6.44,1.54A1,1,0,0,0,10.4,8.19Z"}))).withConfig({componentId:"s1mb1b6i-0"})(["fill: ",";"],t=>Object(s.c)(t).actionIcon)},"./src/reddit/icons/svgs/Help/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});e.a=(t=>r("svg",{className:t.className,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},void 0,r("path",{fill:"inherit",d:"M8.622 10.616c.078.08.14.175.183.28.044.105.07.218.07.332 0 .237-.087.456-.253.62-.167.168-.385.255-.622.255-.236 0-.455-.087-.62-.254-.167-.166-.255-.385-.255-.622 0-.114.027-.227.07-.332.044-.105.105-.2.184-.28.087-.088.174-.15.288-.193.324-.13.71-.052.954.193zm-.205-6.242c1.595 0 2.466.807 2.466 1.92 0 .976-.556 1.448-1.238 1.816-.615.317-.83.518-.904.898 0 .004-.034.207-.036.21-.034.126-.087.244-.18.336-.14.14-.323.21-.524.21-.097 0-.192-.017-.29-.052-.087-.035-.165-.088-.235-.158-.14-.14-.22-.333-.22-.533 0-.11.02-.188.074-.348.16-.472.55-.896 1.056-1.17.577-.327.84-.558.84-1.07 0-.42-.357-.715-.987-.715-.496 0-.996.218-1.39.52-.26.2-.62.202-.858-.02l-.05-.05c-.313-.29-.27-.787.075-1.04.603-.444 1.394-.753 2.4-.753zM8 13.25c-2.895 0-5.25-2.355-5.25-5.25S5.105 2.75 8 2.75 13.25 5.105 13.25 8 10.895 13.25 8 13.25M8 1C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7"})))},"./src/reddit/icons/svgs/ImagePost/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});e.a=i()(t=>a("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,a("path",{d:"M16,2H4A2,2,0,0,0,2,4V16a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V4A2,2,0,0,0,16,2Zm0,14H10.14a.49.49,0,0,1,.05-.48l3.15-4.26a.5.5,0,0,1,.38-.2.53.53,0,0,1,.4.17L16,13.35ZM4,13.51,7.26,8.82a.54.54,0,0,1,.42-.21.5.5,0,0,1,.41.23l2.85,4.34L8.84,16H4Zm10.4-7.1a1.7,1.7,0,1,1-1.7-1.7A1.7,1.7,0,0,1,14.4,6.41Z"}))).withConfig({componentId:"s18ghrks-0"})(["fill: ",";"],t=>Object(s.c)(t).actionIcon)},"./src/reddit/icons/svgs/ThumbnailSelect/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=o("./bundled-modules/styled-components/styled-components.min.js"),i=o.n(r),s=o("./src/reddit/models/Theme/NewColorSystem/index.ts"),a=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});e.a=i()(t=>a("svg",{className:t.className,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},void 0,a("g",{fill:"none",fillRule:"evenodd"},void 0,a("path",{d:"M0 0h20v20H0z"}),a("path",{fill:"#A5A4A4",d:"M6 3h8c1.1046 0 2 .8954 2 2v10c0 1.1046-.8954 2-2 2H6c-1.1046 0-2-.8954-2-2V5c0-1.1046.8954-2 2-2zm11 1c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2V4zM3 4v12h-.6667C1.597 16 1 15.1734 1 14.1538V5.8462C1 4.8266 1.597 4 2.3333 4H3z"})))).withConfig({componentId:"s6oamef-0"})(["fill: ",";"],t=>Object(s.c)(t).actionIcon)},"./src/reddit/icons/svgs/Video/index.tsx":function(t,e,o){"use strict";o("./node_modules/react/index.js");var n,r=(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(t,e,o,r){var i=t&&t.defaultProps,s=arguments.length-3;if(e||0===s||(e={}),e&&i)for(var a in i)void 0===e[a]&&(e[a]=i[a]);else e||(e=i||{});if(1===s)e.children=r;else if(s>1){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+3];e.children=c}return{$$typeof:n,type:t,key:void 0===o?null:""+o,ref:null,props:e,_owner:null}});e.a=(t=>r("svg",{className:t.className,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},void 0,r("g",{transform:"translate(3, 4)"},void 0,r("path",{d:"M15.4927,2.1514 C15.1797,1.9734 14.7947,1.9784 14.4857,2.1644 L11.9997,3.6554 L11.9997,2.0004 C11.9997,0.8974 11.1027,0.0004 9.9997,0.0004 L1.9997,0.0004 C0.8967,0.0004 -0.0003,0.8974 -0.0003,2.0004 L-0.0003,10.0004 C-0.0003,11.1034 0.8967,12.0004 1.9997,12.0004 L9.9997,12.0004 C11.1027,12.0004 11.9997,11.1034 11.9997,10.0004 L11.9997,8.3664 L14.4907,9.8394 C14.6477,9.9324 14.8237,9.9784 14.9997,9.9784 C15.1707,9.9784 15.3417,9.9344 15.4957,9.8474 C15.8077,9.6694 15.9997,9.3384 15.9997,8.9784 L15.9997,3.0214 C15.9997,2.6614 15.8057,2.3284 15.4927,2.1514"}))))},"./src/reddit/selectors/editorContent.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o("./src/reddit/actions/postCreation/constants.ts");const r=(t,e)=>t.creations.api.editor.converting.pending[e||n.l]}}]);
//# sourceMappingURL=RichTextEditor.21e288bd2c30bd31fe63.js.map